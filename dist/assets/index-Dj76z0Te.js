var ky=Object.defineProperty;var Sy=(t,e,s)=>e in t?ky(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var J=(t,e,s)=>Sy(t,typeof e!="symbol"?e+"":e,s);function Cy(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ey(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var jp={exports:{}},rl={},Np={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=Symbol.for("react.element"),Ty=Symbol.for("react.portal"),My=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Ay=Symbol.for("react.profiler"),Dy=Symbol.for("react.provider"),Iy=Symbol.for("react.context"),Ry=Symbol.for("react.forward_ref"),Ly=Symbol.for("react.suspense"),Fy=Symbol.for("react.memo"),$y=Symbol.for("react.lazy"),ph=Symbol.iterator;function Uy(t){return t===null||typeof t!="object"?null:(t=ph&&t[ph]||t["@@iterator"],typeof t=="function"?t:null)}var kp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sp=Object.assign,Cp={};function Sr(t,e,s){this.props=t,this.context=e,this.refs=Cp,this.updater=s||kp}Sr.prototype.isReactComponent={};Sr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pp(){}Pp.prototype=Sr.prototype;function Ku(t,e,s){this.props=t,this.context=e,this.refs=Cp,this.updater=s||kp}var Gu=Ku.prototype=new Pp;Gu.constructor=Ku;Sp(Gu,Sr.prototype);Gu.isPureReactComponent=!0;var gh=Array.isArray,Ep=Object.prototype.hasOwnProperty,Ju={current:null},Tp={key:!0,ref:!0,__self:!0,__source:!0};function Mp(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ep.call(e,n)&&!Tp.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:ea,type:t,key:i,ref:o,props:r,_owner:Ju.current}}function zy(t,e){return{$$typeof:ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qu(t){return typeof t=="object"&&t!==null&&t.$$typeof===ea}function By(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var xh=/\/+/g;function Ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?By(""+t.key):e.toString(36)}function Xa(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ea:case Ty:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+Ll(o,0):n,gh(r)?(s="",t!=null&&(s=t.replace(xh,"$&/")+"/"),Xa(r,e,s,"",function(u){return u})):r!=null&&(Qu(r)&&(r=zy(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(xh,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",gh(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Ll(i,l);o+=Xa(i,e,s,c,r)}else if(c=Uy(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Ll(i,l++),o+=Xa(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xa(t,e,s){if(t==null)return t;var n=[],r=0;return Xa(t,n,"","",function(i){return e.call(s,i,r++)}),n}function qy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qe={current:null},Za={transition:null},Hy={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Za,ReactCurrentOwner:Ju};function Op(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:xa,forEach:function(t,e,s){xa(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return xa(t,function(){e++}),e},toArray:function(t){return xa(t,function(e){return e})||[]},only:function(t){if(!Qu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Sr;G.Fragment=My;G.Profiler=Ay;G.PureComponent=Ku;G.StrictMode=Oy;G.Suspense=Ly;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hy;G.act=Op;G.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Sp({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ju.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Ep.call(e,c)&&!Tp.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:ea,type:t.type,key:r,ref:i,props:n,_owner:o}};G.createContext=function(t){return t={$$typeof:Iy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dy,_context:t},t.Consumer=t};G.createElement=Mp;G.createFactory=function(t){var e=Mp.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:Ry,render:t}};G.isValidElement=Qu;G.lazy=function(t){return{$$typeof:$y,_payload:{_status:-1,_result:t},_init:qy}};G.memo=function(t,e){return{$$typeof:Fy,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=Za.transition;Za.transition={};try{t()}finally{Za.transition=e}};G.unstable_act=Op;G.useCallback=function(t,e){return Qe.current.useCallback(t,e)};G.useContext=function(t){return Qe.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return Qe.current.useDeferredValue(t)};G.useEffect=function(t,e){return Qe.current.useEffect(t,e)};G.useId=function(){return Qe.current.useId()};G.useImperativeHandle=function(t,e,s){return Qe.current.useImperativeHandle(t,e,s)};G.useInsertionEffect=function(t,e){return Qe.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return Qe.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return Qe.current.useMemo(t,e)};G.useReducer=function(t,e,s){return Qe.current.useReducer(t,e,s)};G.useRef=function(t){return Qe.current.useRef(t)};G.useState=function(t){return Qe.current.useState(t)};G.useSyncExternalStore=function(t,e,s){return Qe.current.useSyncExternalStore(t,e,s)};G.useTransition=function(){return Qe.current.useTransition()};G.version="18.3.1";Np.exports=G;var w=Np.exports;const ta=Py(w),Wy=Cy({__proto__:null,default:ta},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy=w,Yy=Symbol.for("react.element"),Ky=Symbol.for("react.fragment"),Gy=Object.prototype.hasOwnProperty,Jy=Vy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qy={key:!0,ref:!0,__self:!0,__source:!0};function Ap(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Gy.call(e,n)&&!Qy.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Yy,type:t,key:i,ref:o,props:r,_owner:Jy.current}}rl.Fragment=Ky;rl.jsx=Ap;rl.jsxs=Ap;jp.exports=rl;var a=jp.exports,Tc={},Dp={exports:{}},gt={},Ip={exports:{}},Rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,D){var O=P.length;P.push(D);e:for(;0<O;){var B=O-1>>>1,W=P[B];if(0<r(W,D))P[B]=D,P[O]=W,O=B;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var D=P[0],O=P.pop();if(O!==D){P[0]=O;e:for(var B=0,W=P.length,re=W>>>1;B<re;){var fe=2*(B+1)-1,$e=P[fe],me=fe+1,Ze=P[me];if(0>r($e,O))me<W&&0>r(Ze,$e)?(P[B]=Ze,P[me]=O,B=me):(P[B]=$e,P[fe]=O,B=fe);else if(me<W&&0>r(Ze,O))P[B]=Ze,P[me]=O,B=me;else break e}}return D}function r(P,D){var O=P.sortIndex-D.sortIndex;return O!==0?O:P.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var D=s(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=P)n(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=s(u)}}function _(P){if(x=!1,v(P),!g)if(s(c)!==null)g=!0,L(j);else{var D=s(u);D!==null&&z(_,D.startTime-P)}}function j(P,D){g=!1,x&&(x=!1,p(C),C=-1),m=!0;var O=f;try{for(v(D),h=s(c);h!==null&&(!(h.expirationTime>D)||P&&!T());){var B=h.callback;if(typeof B=="function"){h.callback=null,f=h.priorityLevel;var W=B(h.expirationTime<=D);D=t.unstable_now(),typeof W=="function"?h.callback=W:h===s(c)&&n(c),v(D)}else n(c);h=s(c)}if(h!==null)var re=!0;else{var fe=s(u);fe!==null&&z(_,fe.startTime-D),re=!1}return re}finally{h=null,f=O,m=!1}}var N=!1,S=null,C=-1,k=5,M=-1;function T(){return!(t.unstable_now()-M<k)}function A(){if(S!==null){var P=t.unstable_now();M=P;var D=!0;try{D=S(!0,P)}finally{D?F():(N=!1,S=null)}}else N=!1}var F;if(typeof y=="function")F=function(){y(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=A,F=function(){$.postMessage(null)}}else F=function(){b(A,0)};function L(P){S=P,N||(N=!0,F())}function z(P,D){C=b(function(){P(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,L(j))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var O=f;f=D;try{return P()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var O=f;f=P;try{return D()}finally{f=O}},t.unstable_scheduleCallback=function(P,D,O){var B=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,P){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=O+W,P={id:d++,callback:D,priorityLevel:P,startTime:O,expirationTime:W,sortIndex:-1},O>B?(P.sortIndex=O,e(u,P),s(c)===null&&P===s(u)&&(x?(p(C),C=-1):x=!0,z(_,O-B))):(P.sortIndex=W,e(c,P),g||m||(g=!0,L(j))),P},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(P){var D=f;return function(){var O=f;f=D;try{return P.apply(this,arguments)}finally{f=O}}}})(Rp);Ip.exports=Rp;var Xy=Ip.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy=w,mt=Xy;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lp=new Set,Pi={};function Dn(t,e){gr(t,e),gr(t+"Capture",e)}function gr(t,e){for(Pi[t]=e,t=0;t<e.length;t++)Lp.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=Object.prototype.hasOwnProperty,ev=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},vh={};function tv(t){return Mc.call(vh,t)?!0:Mc.call(yh,t)?!1:ev.test(t)?vh[t]=!0:(yh[t]=!0,!1)}function sv(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nv(t,e,s,n){if(e===null||typeof e>"u"||sv(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fe[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fe[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fe[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fe[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fe[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fe[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fe[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fe[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fe[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xu=/[\-:]([a-z])/g;function Zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);Fe[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);Fe[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xu,Zu);Fe[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fe[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fe[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,s,n){var r=Fe.hasOwnProperty(e)?Fe[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nv(e,s,r,n)&&(s=null),n||r===null?tv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var gs=Zy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ya=Symbol.for("react.element"),Gn=Symbol.for("react.portal"),Jn=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Oc=Symbol.for("react.profiler"),Fp=Symbol.for("react.provider"),$p=Symbol.for("react.context"),sd=Symbol.for("react.forward_ref"),Ac=Symbol.for("react.suspense"),Dc=Symbol.for("react.suspense_list"),nd=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),Up=Symbol.for("react.offscreen"),wh=Symbol.iterator;function Fr(t){return t===null||typeof t!="object"?null:(t=wh&&t[wh]||t["@@iterator"],typeof t=="function"?t:null)}var ye=Object.assign,Fl;function si(t){if(Fl===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Fl=e&&e[1]||""}return`
`+Fl+t}var $l=!1;function Ul(t,e){if(!t||$l)return"";$l=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{$l=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?si(t):""}function rv(t){switch(t.tag){case 5:return si(t.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return t=Ul(t.type,!1),t;case 11:return t=Ul(t.type.render,!1),t;case 1:return t=Ul(t.type,!0),t;default:return""}}function Ic(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jn:return"Fragment";case Gn:return"Portal";case Oc:return"Profiler";case td:return"StrictMode";case Ac:return"Suspense";case Dc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $p:return(t.displayName||"Context")+".Consumer";case Fp:return(t._context.displayName||"Context")+".Provider";case sd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nd:return e=t.displayName||null,e!==null?e:Ic(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return Ic(t(e))}catch{}}return null}function iv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ic(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function av(t){var e=zp(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function va(t){t._valueTracker||(t._valueTracker=av(t))}function Bp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=zp(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function go(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rc(t,e){var s=e.checked;return ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function bh(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Vs(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qp(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function Lc(t,e){qp(t,e);var s=Vs(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,s):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,Vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _h(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Fc(t,e,s){(e!=="number"||go(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var ni=Array.isArray;function lr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Vs(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function $c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jh(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(R(92));if(ni(s)){if(1<s.length)throw Error(R(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Vs(s)}}function Hp(t,e){var s=Vs(e.value),n=Vs(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Nh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wa,Vp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wa=wa||document.createElement("div"),wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ei(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var ui={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ov=["Webkit","ms","Moz","O"];Object.keys(ui).forEach(function(t){ov.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ui[e]=ui[t]})});function Yp(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||ui.hasOwnProperty(t)&&ui[t]?(""+e).trim():e+"px"}function Kp(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Yp(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var lv=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zc(t,e){if(e){if(lv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function rd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hc=null,cr=null,ur=null;function kh(t){if(t=ra(t)){if(typeof Hc!="function")throw Error(R(280));var e=t.stateNode;e&&(e=cl(e),Hc(t.stateNode,t.type,e))}}function Gp(t){cr?ur?ur.push(t):ur=[t]:cr=t}function Jp(){if(cr){var t=cr,e=ur;if(ur=cr=null,kh(t),e)for(t=0;t<e.length;t++)kh(e[t])}}function Qp(t,e){return t(e)}function Xp(){}var zl=!1;function Zp(t,e,s){if(zl)return t(e,s);zl=!0;try{return Qp(t,e,s)}finally{zl=!1,(cr!==null||ur!==null)&&(Xp(),Jp())}}function Ti(t,e){var s=t.stateNode;if(s===null)return null;var n=cl(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(R(231,e,typeof s));return s}var Wc=!1;if(ds)try{var $r={};Object.defineProperty($r,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",$r,$r),window.removeEventListener("test",$r,$r)}catch{Wc=!1}function cv(t,e,s,n,r,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var di=!1,xo=null,yo=!1,Vc=null,uv={onError:function(t){di=!0,xo=t}};function dv(t,e,s,n,r,i,o,l,c){di=!1,xo=null,cv.apply(uv,arguments)}function hv(t,e,s,n,r,i,o,l,c){if(dv.apply(this,arguments),di){if(di){var u=xo;di=!1,xo=null}else throw Error(R(198));yo||(yo=!0,Vc=u)}}function In(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function eg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sh(t){if(In(t)!==t)throw Error(R(188))}function fv(t){var e=t.alternate;if(!e){if(e=In(t),e===null)throw Error(R(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Sh(r),t;if(i===n)return Sh(r),e;i=i.sibling}throw Error(R(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(R(189))}}if(s.alternate!==n)throw Error(R(190))}if(s.tag!==3)throw Error(R(188));return s.stateNode.current===s?t:e}function tg(t){return t=fv(t),t!==null?sg(t):null}function sg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sg(t);if(e!==null)return e;t=t.sibling}return null}var ng=mt.unstable_scheduleCallback,Ch=mt.unstable_cancelCallback,mv=mt.unstable_shouldYield,pv=mt.unstable_requestPaint,_e=mt.unstable_now,gv=mt.unstable_getCurrentPriorityLevel,id=mt.unstable_ImmediatePriority,rg=mt.unstable_UserBlockingPriority,vo=mt.unstable_NormalPriority,xv=mt.unstable_LowPriority,ig=mt.unstable_IdlePriority,il=null,Vt=null;function yv(t){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(il,t,void 0,(t.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:bv,vv=Math.log,wv=Math.LN2;function bv(t){return t>>>=0,t===0?32:31-(vv(t)/wv|0)|0}var ba=64,_a=4194304;function ri(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wo(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=ri(l):(i&=o,i!==0&&(n=ri(i)))}else o=s&~r,o!==0?n=ri(o):i!==0&&(n=ri(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Lt(e),r=1<<s,n|=t[s],e&=~r;return n}function _v(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jv(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Lt(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=_v(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Yc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ag(){var t=ba;return ba<<=1,!(ba&4194240)&&(ba=64),t}function Bl(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function sa(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Lt(e),t[e]=s}function Nv(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-Lt(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function ad(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Lt(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var ne=0;function og(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lg,od,cg,ug,dg,Kc=!1,ja=[],Ds=null,Is=null,Rs=null,Mi=new Map,Oi=new Map,ks=[],kv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ph(t,e){switch(t){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":Mi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(e.pointerId)}}function Ur(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ra(e),e!==null&&od(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Sv(t,e,s,n,r){switch(e){case"focusin":return Ds=Ur(Ds,t,e,s,n,r),!0;case"dragenter":return Is=Ur(Is,t,e,s,n,r),!0;case"mouseover":return Rs=Ur(Rs,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Mi.set(i,Ur(Mi.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Oi.set(i,Ur(Oi.get(i)||null,t,e,s,n,r)),!0}return!1}function hg(t){var e=vn(t.target);if(e!==null){var s=In(e);if(s!==null){if(e=s.tag,e===13){if(e=eg(s),e!==null){t.blockedOn=e,dg(t.priority,function(){cg(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Gc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);qc=n,s.target.dispatchEvent(n),qc=null}else return e=ra(s),e!==null&&od(e),t.blockedOn=s,!1;e.shift()}return!0}function Eh(t,e,s){eo(t)&&s.delete(e)}function Cv(){Kc=!1,Ds!==null&&eo(Ds)&&(Ds=null),Is!==null&&eo(Is)&&(Is=null),Rs!==null&&eo(Rs)&&(Rs=null),Mi.forEach(Eh),Oi.forEach(Eh)}function zr(t,e){t.blockedOn===e&&(t.blockedOn=null,Kc||(Kc=!0,mt.unstable_scheduleCallback(mt.unstable_NormalPriority,Cv)))}function Ai(t){function e(r){return zr(r,t)}if(0<ja.length){zr(ja[0],t);for(var s=1;s<ja.length;s++){var n=ja[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Ds!==null&&zr(Ds,t),Is!==null&&zr(Is,t),Rs!==null&&zr(Rs,t),Mi.forEach(e),Oi.forEach(e),s=0;s<ks.length;s++)n=ks[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<ks.length&&(s=ks[0],s.blockedOn===null);)hg(s),s.blockedOn===null&&ks.shift()}var dr=gs.ReactCurrentBatchConfig,bo=!0;function Pv(t,e,s,n){var r=ne,i=dr.transition;dr.transition=null;try{ne=1,ld(t,e,s,n)}finally{ne=r,dr.transition=i}}function Ev(t,e,s,n){var r=ne,i=dr.transition;dr.transition=null;try{ne=4,ld(t,e,s,n)}finally{ne=r,dr.transition=i}}function ld(t,e,s,n){if(bo){var r=Gc(t,e,s,n);if(r===null)Xl(t,e,n,_o,s),Ph(t,n);else if(Sv(r,t,e,s,n))n.stopPropagation();else if(Ph(t,n),e&4&&-1<kv.indexOf(t)){for(;r!==null;){var i=ra(r);if(i!==null&&lg(i),i=Gc(t,e,s,n),i===null&&Xl(t,e,n,_o,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Xl(t,e,n,null,s)}}var _o=null;function Gc(t,e,s,n){if(_o=null,t=rd(n),t=vn(t),t!==null)if(e=In(t),e===null)t=null;else if(s=e.tag,s===13){if(t=eg(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _o=t,null}function fg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gv()){case id:return 1;case rg:return 4;case vo:case xv:return 16;case ig:return 536870912;default:return 16}default:return 16}}var Es=null,cd=null,to=null;function mg(){if(to)return to;var t,e=cd,s=e.length,n,r="value"in Es?Es.value:Es.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return to=r.slice(t,1<n?1-n:void 0)}function so(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Na(){return!0}function Th(){return!1}function xt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Na:Th,this.isPropagationStopped=Th,this}return ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Na)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Na)},persist:function(){},isPersistent:Na}),e}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ud=xt(Cr),na=ye({},Cr,{view:0,detail:0}),Tv=xt(na),ql,Hl,Br,al=ye({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Br&&(Br&&t.type==="mousemove"?(ql=t.screenX-Br.screenX,Hl=t.screenY-Br.screenY):Hl=ql=0,Br=t),ql)},movementY:function(t){return"movementY"in t?t.movementY:Hl}}),Mh=xt(al),Mv=ye({},al,{dataTransfer:0}),Ov=xt(Mv),Av=ye({},na,{relatedTarget:0}),Wl=xt(Av),Dv=ye({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),Iv=xt(Dv),Rv=ye({},Cr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lv=xt(Rv),Fv=ye({},Cr,{data:0}),Oh=xt(Fv),$v={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bv(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zv[t])?!!e[t]:!1}function dd(){return Bv}var qv=ye({},na,{key:function(t){if(t.key){var e=$v[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=so(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(t){return t.type==="keypress"?so(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?so(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hv=xt(qv),Wv=ye({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ah=xt(Wv),Vv=ye({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),Yv=xt(Vv),Kv=ye({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gv=xt(Kv),Jv=ye({},al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qv=xt(Jv),Xv=[9,13,27,32],hd=ds&&"CompositionEvent"in window,hi=null;ds&&"documentMode"in document&&(hi=document.documentMode);var Zv=ds&&"TextEvent"in window&&!hi,pg=ds&&(!hd||hi&&8<hi&&11>=hi),Dh=" ",Ih=!1;function gg(t,e){switch(t){case"keyup":return Xv.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qn=!1;function ew(t,e){switch(t){case"compositionend":return xg(e);case"keypress":return e.which!==32?null:(Ih=!0,Dh);case"textInput":return t=e.data,t===Dh&&Ih?null:t;default:return null}}function tw(t,e){if(Qn)return t==="compositionend"||!hd&&gg(t,e)?(t=mg(),to=cd=Es=null,Qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pg&&e.locale!=="ko"?null:e.data;default:return null}}var sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sw[t.type]:e==="textarea"}function yg(t,e,s,n){Gp(n),e=jo(e,"onChange"),0<e.length&&(s=new ud("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var fi=null,Di=null;function nw(t){Eg(t,0)}function ol(t){var e=er(t);if(Bp(e))return t}function rw(t,e){if(t==="change")return e}var vg=!1;if(ds){var Vl;if(ds){var Yl="oninput"in document;if(!Yl){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),Yl=typeof Lh.oninput=="function"}Vl=Yl}else Vl=!1;vg=Vl&&(!document.documentMode||9<document.documentMode)}function Fh(){fi&&(fi.detachEvent("onpropertychange",wg),Di=fi=null)}function wg(t){if(t.propertyName==="value"&&ol(Di)){var e=[];yg(e,Di,t,rd(t)),Zp(nw,e)}}function iw(t,e,s){t==="focusin"?(Fh(),fi=e,Di=s,fi.attachEvent("onpropertychange",wg)):t==="focusout"&&Fh()}function aw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Di)}function ow(t,e){if(t==="click")return ol(e)}function lw(t,e){if(t==="input"||t==="change")return ol(e)}function cw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:cw;function Ii(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Mc.call(e,r)||!$t(t[r],e[r]))return!1}return!0}function $h(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uh(t,e){var s=$h(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$h(s)}}function bg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _g(){for(var t=window,e=go();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=go(t.document)}return e}function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uw(t){var e=_g(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&bg(s.ownerDocument.documentElement,s)){if(n!==null&&fd(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=Uh(s,i);var o=Uh(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dw=ds&&"documentMode"in document&&11>=document.documentMode,Xn=null,Jc=null,mi=null,Qc=!1;function zh(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Qc||Xn==null||Xn!==go(n)||(n=Xn,"selectionStart"in n&&fd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),mi&&Ii(mi,n)||(mi=n,n=jo(Jc,"onSelect"),0<n.length&&(e=new ud("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Xn)))}function ka(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Zn={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionend:ka("Transition","TransitionEnd")},Kl={},jg={};ds&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function ll(t){if(Kl[t])return Kl[t];if(!Zn[t])return t;var e=Zn[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in jg)return Kl[t]=e[s];return t}var Ng=ll("animationend"),kg=ll("animationiteration"),Sg=ll("animationstart"),Cg=ll("transitionend"),Pg=new Map,Bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){Pg.set(t,e),Dn(e,[t])}for(var Gl=0;Gl<Bh.length;Gl++){var Jl=Bh[Gl],hw=Jl.toLowerCase(),fw=Jl[0].toUpperCase()+Jl.slice(1);Xs(hw,"on"+fw)}Xs(Ng,"onAnimationEnd");Xs(kg,"onAnimationIteration");Xs(Sg,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(Cg,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function qh(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,hv(n,e,void 0,t),t.currentTarget=null}function Eg(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;qh(r,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;qh(r,l,u),i=c}}}if(yo)throw t=Vc,yo=!1,Vc=null,t}function ue(t,e){var s=e[su];s===void 0&&(s=e[su]=new Set);var n=t+"__bubble";s.has(n)||(Tg(e,t,2,!1),s.add(n))}function Ql(t,e,s){var n=0;e&&(n|=4),Tg(s,t,n,e)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function Ri(t){if(!t[Sa]){t[Sa]=!0,Lp.forEach(function(s){s!=="selectionchange"&&(mw.has(s)||Ql(s,!1,t),Ql(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sa]||(e[Sa]=!0,Ql("selectionchange",!1,e))}}function Tg(t,e,s,n){switch(fg(e)){case 1:var r=Pv;break;case 4:r=Ev;break;default:r=ld}s=r.bind(null,e,s,t),r=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Xl(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=vn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Zp(function(){var u=i,d=rd(s),h=[];e:{var f=Pg.get(t);if(f!==void 0){var m=ud,g=t;switch(t){case"keypress":if(so(s)===0)break e;case"keydown":case"keyup":m=Hv;break;case"focusin":g="focus",m=Wl;break;case"focusout":g="blur",m=Wl;break;case"beforeblur":case"afterblur":m=Wl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Yv;break;case Ng:case kg:case Sg:m=Iv;break;case Cg:m=Gv;break;case"scroll":m=Tv;break;case"wheel":m=Qv;break;case"copy":case"cut":case"paste":m=Lv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ah}var x=(e&4)!==0,b=!x&&t==="scroll",p=x?f!==null?f+"Capture":null:f;x=[];for(var y=u,v;y!==null;){v=y;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,p!==null&&(_=Ti(y,p),_!=null&&x.push(Li(y,_,v)))),b)break;y=y.return}0<x.length&&(f=new m(f,g,null,s,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==qc&&(g=s.relatedTarget||s.fromElement)&&(vn(g)||g[hs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=s.relatedTarget||s.toElement,m=u,g=g?vn(g):null,g!==null&&(b=In(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(x=Mh,_="onMouseLeave",p="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ah,_="onPointerLeave",p="onPointerEnter",y="pointer"),b=m==null?f:er(m),v=g==null?f:er(g),f=new x(_,y+"leave",m,s,d),f.target=b,f.relatedTarget=v,_=null,vn(d)===u&&(x=new x(p,y+"enter",g,s,d),x.target=v,x.relatedTarget=b,_=x),b=_,m&&g)t:{for(x=m,p=g,y=0,v=x;v;v=$n(v))y++;for(v=0,_=p;_;_=$n(_))v++;for(;0<y-v;)x=$n(x),y--;for(;0<v-y;)p=$n(p),v--;for(;y--;){if(x===p||p!==null&&x===p.alternate)break t;x=$n(x),p=$n(p)}x=null}else x=null;m!==null&&Hh(h,f,m,x,!1),g!==null&&b!==null&&Hh(h,b,g,x,!0)}}e:{if(f=u?er(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=rw;else if(Rh(f))if(vg)j=lw;else{j=aw;var N=iw}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=ow);if(j&&(j=j(t,u))){yg(h,j,s,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Fc(f,"number",f.value)}switch(N=u?er(u):window,t){case"focusin":(Rh(N)||N.contentEditable==="true")&&(Xn=N,Jc=u,mi=null);break;case"focusout":mi=Jc=Xn=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,zh(h,s,d);break;case"selectionchange":if(dw)break;case"keydown":case"keyup":zh(h,s,d)}var S;if(hd)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qn?gg(t,s)&&(C="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(pg&&s.locale!=="ko"&&(Qn||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qn&&(S=mg()):(Es=d,cd="value"in Es?Es.value:Es.textContent,Qn=!0)),N=jo(u,C),0<N.length&&(C=new Oh(C,t,null,s,d),h.push({event:C,listeners:N}),S?C.data=S:(S=xg(s),S!==null&&(C.data=S)))),(S=Zv?ew(t,s):tw(t,s))&&(u=jo(u,"onBeforeInput"),0<u.length&&(d=new Oh("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=S))}Eg(h,e)})}function Li(t,e,s){return{instance:t,listener:e,currentTarget:s}}function jo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Ti(t,s),i!=null&&n.unshift(Li(t,i,r)),i=Ti(t,e),i!=null&&n.push(Li(t,i,r))),t=t.return}return n}function $n(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hh(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,r?(c=Ti(s,i),c!=null&&o.unshift(Li(s,c,l))):r||(c=Ti(s,i),c!=null&&o.push(Li(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var pw=/\r\n?/g,gw=/\u0000|\uFFFD/g;function Wh(t){return(typeof t=="string"?t:""+t).replace(pw,`
`).replace(gw,"")}function Ca(t,e,s){if(e=Wh(e),Wh(t)!==e&&s)throw Error(R(425))}function No(){}var Xc=null,Zc=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,Vh=typeof Promise=="function"?Promise:void 0,yw=typeof queueMicrotask=="function"?queueMicrotask:typeof Vh<"u"?function(t){return Vh.resolve(null).then(t).catch(vw)}:tu;function vw(t){setTimeout(function(){throw t})}function Zl(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Ai(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Ai(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Pr,Fi="__reactProps$"+Pr,hs="__reactContainer$"+Pr,su="__reactEvents$"+Pr,ww="__reactListeners$"+Pr,bw="__reactHandles$"+Pr;function vn(t){var e=t[Wt];if(e)return e;for(var s=t.parentNode;s;){if(e=s[hs]||s[Wt]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Yh(t);t!==null;){if(s=t[Wt])return s;t=Yh(t)}return e}t=s,s=t.parentNode}return null}function ra(t){return t=t[Wt]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function cl(t){return t[Fi]||null}var nu=[],tr=-1;function Zs(t){return{current:t}}function he(t){0>tr||(t.current=nu[tr],nu[tr]=null,tr--)}function ce(t,e){tr++,nu[tr]=t.current,t.current=e}var Ys={},Ye=Zs(Ys),ot=Zs(!1),Cn=Ys;function xr(t,e){var s=t.type.contextTypes;if(!s)return Ys;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lt(t){return t=t.childContextTypes,t!=null}function ko(){he(ot),he(Ye)}function Kh(t,e,s){if(Ye.current!==Ys)throw Error(R(168));ce(Ye,e),ce(ot,s)}function Mg(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(R(108,iv(t)||"Unknown",r));return ye({},s,n)}function So(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ys,Cn=Ye.current,ce(Ye,t),ce(ot,ot.current),!0}function Gh(t,e,s){var n=t.stateNode;if(!n)throw Error(R(169));s?(t=Mg(t,e,Cn),n.__reactInternalMemoizedMergedChildContext=t,he(ot),he(Ye),ce(Ye,t)):he(ot),ce(ot,s)}var rs=null,ul=!1,ec=!1;function Og(t){rs===null?rs=[t]:rs.push(t)}function _w(t){ul=!0,Og(t)}function en(){if(!ec&&rs!==null){ec=!0;var t=0,e=ne;try{var s=rs;for(ne=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}rs=null,ul=!1}catch(r){throw rs!==null&&(rs=rs.slice(t+1)),ng(id,en),r}finally{ne=e,ec=!1}}return null}var sr=[],nr=0,Co=null,Po=0,vt=[],wt=0,Pn=null,as=1,os="";function fn(t,e){sr[nr++]=Po,sr[nr++]=Co,Co=t,Po=e}function Ag(t,e,s){vt[wt++]=as,vt[wt++]=os,vt[wt++]=Pn,Pn=t;var n=as;t=os;var r=32-Lt(n)-1;n&=~(1<<r),s+=1;var i=32-Lt(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,as=1<<32-Lt(e)+r|s<<r|n,os=i+t}else as=1<<i|s<<r|n,os=t}function md(t){t.return!==null&&(fn(t,1),Ag(t,1,0))}function pd(t){for(;t===Co;)Co=sr[--nr],sr[nr]=null,Po=sr[--nr],sr[nr]=null;for(;t===Pn;)Pn=vt[--wt],vt[wt]=null,os=vt[--wt],vt[wt]=null,as=vt[--wt],vt[wt]=null}var ft=null,ht=null,pe=!1,Dt=null;function Dg(t,e){var s=bt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Jh(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,ht=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Pn!==null?{id:as,overflow:os}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=bt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,ft=t,ht=null,!0):!1;default:return!1}}function ru(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(pe){var e=ht;if(e){var s=e;if(!Jh(t,e)){if(ru(t))throw Error(R(418));e=Ls(s.nextSibling);var n=ft;e&&Jh(t,e)?Dg(n,s):(t.flags=t.flags&-4097|2,pe=!1,ft=t)}}else{if(ru(t))throw Error(R(418));t.flags=t.flags&-4097|2,pe=!1,ft=t}}}function Qh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function Pa(t){if(t!==ft)return!1;if(!pe)return Qh(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=ht)){if(ru(t))throw Ig(),Error(R(418));for(;e;)Dg(t,e),e=Ls(e.nextSibling)}if(Qh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){ht=Ls(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}ht=null}}else ht=ft?Ls(t.stateNode.nextSibling):null;return!0}function Ig(){for(var t=ht;t;)t=Ls(t.nextSibling)}function yr(){ht=ft=null,pe=!1}function gd(t){Dt===null?Dt=[t]:Dt.push(t)}var jw=gs.ReactCurrentBatchConfig;function qr(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(R(309));var n=s.stateNode}if(!n)throw Error(R(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(R(284));if(!s._owner)throw Error(R(290,t))}return t}function Ea(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xh(t){var e=t._init;return e(t._payload)}function Rg(t){function e(p,y){if(t){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function s(p,y){if(!t)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function n(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function r(p,y){return p=zs(p,y),p.index=0,p.sibling=null,p}function i(p,y,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,y,v,_){return y===null||y.tag!==6?(y=oc(v,p.mode,_),y.return=p,y):(y=r(y,v),y.return=p,y)}function c(p,y,v,_){var j=v.type;return j===Jn?d(p,y,v.props.children,_,v.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===js&&Xh(j)===y.type)?(_=r(y,v.props),_.ref=qr(p,y,v),_.return=p,_):(_=co(v.type,v.key,v.props,null,p.mode,_),_.ref=qr(p,y,v),_.return=p,_)}function u(p,y,v,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=lc(v,p.mode,_),y.return=p,y):(y=r(y,v.children||[]),y.return=p,y)}function d(p,y,v,_,j){return y===null||y.tag!==7?(y=kn(v,p.mode,_,j),y.return=p,y):(y=r(y,v),y.return=p,y)}function h(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=oc(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ya:return v=co(y.type,y.key,y.props,null,p.mode,v),v.ref=qr(p,null,y),v.return=p,v;case Gn:return y=lc(y,p.mode,v),y.return=p,y;case js:var _=y._init;return h(p,_(y._payload),v)}if(ni(y)||Fr(y))return y=kn(y,p.mode,v,null),y.return=p,y;Ea(p,y)}return null}function f(p,y,v,_){var j=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(p,y,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ya:return v.key===j?c(p,y,v,_):null;case Gn:return v.key===j?u(p,y,v,_):null;case js:return j=v._init,f(p,y,j(v._payload),_)}if(ni(v)||Fr(v))return j!==null?null:d(p,y,v,_,null);Ea(p,v)}return null}function m(p,y,v,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(v)||null,l(y,p,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ya:return p=p.get(_.key===null?v:_.key)||null,c(y,p,_,j);case Gn:return p=p.get(_.key===null?v:_.key)||null,u(y,p,_,j);case js:var N=_._init;return m(p,y,v,N(_._payload),j)}if(ni(_)||Fr(_))return p=p.get(v)||null,d(y,p,_,j,null);Ea(y,_)}return null}function g(p,y,v,_){for(var j=null,N=null,S=y,C=y=0,k=null;S!==null&&C<v.length;C++){S.index>C?(k=S,S=null):k=S.sibling;var M=f(p,S,v[C],_);if(M===null){S===null&&(S=k);break}t&&S&&M.alternate===null&&e(p,S),y=i(M,y,C),N===null?j=M:N.sibling=M,N=M,S=k}if(C===v.length)return s(p,S),pe&&fn(p,C),j;if(S===null){for(;C<v.length;C++)S=h(p,v[C],_),S!==null&&(y=i(S,y,C),N===null?j=S:N.sibling=S,N=S);return pe&&fn(p,C),j}for(S=n(p,S);C<v.length;C++)k=m(S,p,C,v[C],_),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?C:k.key),y=i(k,y,C),N===null?j=k:N.sibling=k,N=k);return t&&S.forEach(function(T){return e(p,T)}),pe&&fn(p,C),j}function x(p,y,v,_){var j=Fr(v);if(typeof j!="function")throw Error(R(150));if(v=j.call(v),v==null)throw Error(R(151));for(var N=j=null,S=y,C=y=0,k=null,M=v.next();S!==null&&!M.done;C++,M=v.next()){S.index>C?(k=S,S=null):k=S.sibling;var T=f(p,S,M.value,_);if(T===null){S===null&&(S=k);break}t&&S&&T.alternate===null&&e(p,S),y=i(T,y,C),N===null?j=T:N.sibling=T,N=T,S=k}if(M.done)return s(p,S),pe&&fn(p,C),j;if(S===null){for(;!M.done;C++,M=v.next())M=h(p,M.value,_),M!==null&&(y=i(M,y,C),N===null?j=M:N.sibling=M,N=M);return pe&&fn(p,C),j}for(S=n(p,S);!M.done;C++,M=v.next())M=m(S,p,C,M.value,_),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),y=i(M,y,C),N===null?j=M:N.sibling=M,N=M);return t&&S.forEach(function(A){return e(p,A)}),pe&&fn(p,C),j}function b(p,y,v,_){if(typeof v=="object"&&v!==null&&v.type===Jn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ya:e:{for(var j=v.key,N=y;N!==null;){if(N.key===j){if(j=v.type,j===Jn){if(N.tag===7){s(p,N.sibling),y=r(N,v.props.children),y.return=p,p=y;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===js&&Xh(j)===N.type){s(p,N.sibling),y=r(N,v.props),y.ref=qr(p,N,v),y.return=p,p=y;break e}s(p,N);break}else e(p,N);N=N.sibling}v.type===Jn?(y=kn(v.props.children,p.mode,_,v.key),y.return=p,p=y):(_=co(v.type,v.key,v.props,null,p.mode,_),_.ref=qr(p,y,v),_.return=p,p=_)}return o(p);case Gn:e:{for(N=v.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){s(p,y.sibling),y=r(y,v.children||[]),y.return=p,p=y;break e}else{s(p,y);break}else e(p,y);y=y.sibling}y=lc(v,p.mode,_),y.return=p,p=y}return o(p);case js:return N=v._init,b(p,y,N(v._payload),_)}if(ni(v))return g(p,y,v,_);if(Fr(v))return x(p,y,v,_);Ea(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(s(p,y.sibling),y=r(y,v),y.return=p,p=y):(s(p,y),y=oc(v,p.mode,_),y.return=p,p=y),o(p)):s(p,y)}return b}var vr=Rg(!0),Lg=Rg(!1),Eo=Zs(null),To=null,rr=null,xd=null;function yd(){xd=rr=To=null}function vd(t){var e=Eo.current;he(Eo),t._currentValue=e}function au(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function hr(t,e){To=t,xd=rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function kt(t){var e=t._currentValue;if(xd!==t)if(t={context:t,memoizedValue:e,next:null},rr===null){if(To===null)throw Error(R(308));rr=t,To.dependencies={lanes:0,firstContext:t}}else rr=rr.next=t;return e}var wn=null;function wd(t){wn===null?wn=[t]:wn.push(t)}function Fg(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,wd(e)):(s.next=r.next,r.next=s),e.interleaved=s,fs(t,n)}function fs(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ns=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $g(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Q&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,fs(t,s)}return r=n.interleaved,r===null?(e.next=e,wd(n)):(e.next=r.next,r.next=e),n.interleaved=e,fs(t,s)}function no(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,ad(t,s)}}function Zh(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Mo(t,e,s,n){var r=t.updateQueue;Ns=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,x=l;switch(f=e,m=s,x.tag){case 1:if(g=x.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=ye({},h,f);break e;case 2:Ns=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Tn|=o,t.lanes=o,t.memoizedState=h}}function ef(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(R(191,r));r.call(n)}}}var ia={},Yt=Zs(ia),$i=Zs(ia),Ui=Zs(ia);function bn(t){if(t===ia)throw Error(R(174));return t}function _d(t,e){switch(ce(Ui,e),ce($i,t),ce(Yt,ia),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uc(e,t)}he(Yt),ce(Yt,e)}function wr(){he(Yt),he($i),he(Ui)}function Ug(t){bn(Ui.current);var e=bn(Yt.current),s=Uc(e,t.type);e!==s&&(ce($i,t),ce(Yt,s))}function jd(t){$i.current===t&&(he(Yt),he($i))}var ge=Zs(0);function Oo(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tc=[];function Nd(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var ro=gs.ReactCurrentDispatcher,sc=gs.ReactCurrentBatchConfig,En=0,xe=null,Pe=null,Oe=null,Ao=!1,pi=!1,zi=0,Nw=0;function Ue(){throw Error(R(321))}function kd(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!$t(t[s],e[s]))return!1;return!0}function Sd(t,e,s,n,r,i){if(En=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ro.current=t===null||t.memoizedState===null?Pw:Ew,t=s(n,r),pi){i=0;do{if(pi=!1,zi=0,25<=i)throw Error(R(301));i+=1,Oe=Pe=null,e.updateQueue=null,ro.current=Tw,t=s(n,r)}while(pi)}if(ro.current=Do,e=Pe!==null&&Pe.next!==null,En=0,Oe=Pe=xe=null,Ao=!1,e)throw Error(R(300));return t}function Cd(){var t=zi!==0;return zi=0,t}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?xe.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function St(){if(Pe===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Oe===null?xe.memoizedState:Oe.next;if(e!==null)Oe=e,Pe=t;else{if(t===null)throw Error(R(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Oe===null?xe.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function Bi(t,e){return typeof e=="function"?e(t):e}function nc(t){var e=St(),s=e.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=t;var n=Pe,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((En&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,xe.lanes|=d,Tn|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,$t(n,e.memoizedState)||(it=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,xe.lanes|=i,Tn|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function rc(t){var e=St(),s=e.queue;if(s===null)throw Error(R(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);$t(i,e.memoizedState)||(it=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function zg(){}function Bg(t,e){var s=xe,n=St(),r=e(),i=!$t(n.memoizedState,r);if(i&&(n.memoizedState=r,it=!0),n=n.queue,Pd(Wg.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(s.flags|=2048,qi(9,Hg.bind(null,s,n,r,e),void 0,null),Ae===null)throw Error(R(349));En&30||qg(s,e,r)}return r}function qg(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Hg(t,e,s,n){e.value=s,e.getSnapshot=n,Vg(e)&&Yg(t)}function Wg(t,e,s){return s(function(){Vg(e)&&Yg(t)})}function Vg(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!$t(t,s)}catch{return!0}}function Yg(t){var e=fs(t,1);e!==null&&Ft(e,t,1,-1)}function tf(t){var e=qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},e.queue=t,t=t.dispatch=Cw.bind(null,xe,t),[e.memoizedState,t]}function qi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Kg(){return St().memoizedState}function io(t,e,s,n){var r=qt();xe.flags|=t,r.memoizedState=qi(1|e,s,void 0,n===void 0?null:n)}function dl(t,e,s,n){var r=St();n=n===void 0?null:n;var i=void 0;if(Pe!==null){var o=Pe.memoizedState;if(i=o.destroy,n!==null&&kd(n,o.deps)){r.memoizedState=qi(e,s,i,n);return}}xe.flags|=t,r.memoizedState=qi(1|e,s,i,n)}function sf(t,e){return io(8390656,8,t,e)}function Pd(t,e){return dl(2048,8,t,e)}function Gg(t,e){return dl(4,2,t,e)}function Jg(t,e){return dl(4,4,t,e)}function Qg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xg(t,e,s){return s=s!=null?s.concat([t]):null,dl(4,4,Qg.bind(null,e,t),s)}function Ed(){}function Zg(t,e){var s=St();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&kd(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function ex(t,e){var s=St();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&kd(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function tx(t,e,s){return En&21?($t(s,e)||(s=ag(),xe.lanes|=s,Tn|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=s)}function kw(t,e){var s=ne;ne=s!==0&&4>s?s:4,t(!0);var n=sc.transition;sc.transition={};try{t(!1),e()}finally{ne=s,sc.transition=n}}function sx(){return St().memoizedState}function Sw(t,e,s){var n=Us(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},nx(t))rx(e,s);else if(s=Fg(t,e,s,n),s!==null){var r=Je();Ft(s,t,n,r),ix(s,e,n)}}function Cw(t,e,s){var n=Us(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(nx(t))rx(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,$t(l,o)){var c=e.interleaved;c===null?(r.next=r,wd(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=Fg(t,e,r,n),s!==null&&(r=Je(),Ft(s,t,n,r),ix(s,e,n))}}function nx(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function rx(t,e){pi=Ao=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function ix(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,ad(t,s)}}var Do={readContext:kt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},Pw={readContext:kt,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:kt,useEffect:sf,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,io(4194308,4,Qg.bind(null,e,t),s)},useLayoutEffect:function(t,e){return io(4194308,4,t,e)},useInsertionEffect:function(t,e){return io(4,2,t,e)},useMemo:function(t,e){var s=qt();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=qt();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Sw.bind(null,xe,t),[n.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:tf,useDebugValue:Ed,useDeferredValue:function(t){return qt().memoizedState=t},useTransition:function(){var t=tf(!1),e=t[0];return t=kw.bind(null,t[1]),qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=xe,r=qt();if(pe){if(s===void 0)throw Error(R(407));s=s()}else{if(s=e(),Ae===null)throw Error(R(349));En&30||qg(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,sf(Wg.bind(null,n,i,t),[t]),n.flags|=2048,qi(9,Hg.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=qt(),e=Ae.identifierPrefix;if(pe){var s=os,n=as;s=(n&~(1<<32-Lt(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=zi++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Nw++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ew={readContext:kt,useCallback:Zg,useContext:kt,useEffect:Pd,useImperativeHandle:Xg,useInsertionEffect:Gg,useLayoutEffect:Jg,useMemo:ex,useReducer:nc,useRef:Kg,useState:function(){return nc(Bi)},useDebugValue:Ed,useDeferredValue:function(t){var e=St();return tx(e,Pe.memoizedState,t)},useTransition:function(){var t=nc(Bi)[0],e=St().memoizedState;return[t,e]},useMutableSource:zg,useSyncExternalStore:Bg,useId:sx,unstable_isNewReconciler:!1},Tw={readContext:kt,useCallback:Zg,useContext:kt,useEffect:Pd,useImperativeHandle:Xg,useInsertionEffect:Gg,useLayoutEffect:Jg,useMemo:ex,useReducer:rc,useRef:Kg,useState:function(){return rc(Bi)},useDebugValue:Ed,useDeferredValue:function(t){var e=St();return Pe===null?e.memoizedState=t:tx(e,Pe.memoizedState,t)},useTransition:function(){var t=rc(Bi)[0],e=St().memoizedState;return[t,e]},useMutableSource:zg,useSyncExternalStore:Bg,useId:sx,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=ye({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function ou(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:ye({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var hl={isMounted:function(t){return(t=t._reactInternals)?In(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Je(),r=Us(t),i=us(n,r);i.payload=e,s!=null&&(i.callback=s),e=Fs(t,i,r),e!==null&&(Ft(e,t,r,n),no(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Je(),r=Us(t),i=us(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Fs(t,i,r),e!==null&&(Ft(e,t,r,n),no(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Je(),n=Us(t),r=us(s,n);r.tag=2,e!=null&&(r.callback=e),e=Fs(t,r,n),e!==null&&(Ft(e,t,n,s),no(e,t,n))}};function nf(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ii(s,n)||!Ii(r,i):!0}function ax(t,e,s){var n=!1,r=Ys,i=e.contextType;return typeof i=="object"&&i!==null?i=kt(i):(r=lt(e)?Cn:Ye.current,n=e.contextTypes,i=(n=n!=null)?xr(t,r):Ys),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function rf(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&hl.enqueueReplaceState(e,e.state,null)}function lu(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},bd(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=kt(i):(i=lt(e)?Cn:Ye.current,r.context=xr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ou(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&hl.enqueueReplaceState(r,r.state,null),Mo(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function br(t,e){try{var s="",n=e;do s+=rv(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function ic(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mw=typeof WeakMap=="function"?WeakMap:Map;function ox(t,e,s){s=us(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Ro||(Ro=!0,vu=n),cu(t,e)},s}function lx(t,e,s){s=us(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){cu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){cu(t,e),typeof n!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function af(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new Mw;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Ww.bind(null,t,e,s),e.then(t,t))}function of(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lf(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=us(-1,1),e.tag=2,Fs(s,e,1))),s.lanes|=1),t)}var Ow=gs.ReactCurrentOwner,it=!1;function Ke(t,e,s,n){e.child=t===null?Lg(e,null,s,n):vr(e,t.child,s,n)}function cf(t,e,s,n,r){s=s.render;var i=e.ref;return hr(e,r),n=Sd(t,e,s,n,i,r),s=Cd(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ms(t,e,r)):(pe&&s&&md(e),e.flags|=1,Ke(t,e,n,r),e.child)}function uf(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!Ld(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,cx(t,e,i,n,r)):(t=co(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Ii,s(o,n)&&t.ref===e.ref)return ms(t,e,r)}return e.flags|=1,t=zs(i,n),t.ref=e.ref,t.return=e,e.child=t}function cx(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(Ii(i,n)&&t.ref===e.ref)if(it=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,ms(t,e,r)}return uu(t,e,s,n,r)}function ux(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(ar,dt),dt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(ar,dt),dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,ce(ar,dt),dt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,ce(ar,dt),dt|=n;return Ke(t,e,r,s),e.child}function dx(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function uu(t,e,s,n,r){var i=lt(s)?Cn:Ye.current;return i=xr(e,i),hr(e,r),s=Sd(t,e,s,n,i,r),n=Cd(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ms(t,e,r)):(pe&&n&&md(e),e.flags|=1,Ke(t,e,s,r),e.child)}function df(t,e,s,n,r){if(lt(s)){var i=!0;So(e)}else i=!1;if(hr(e,r),e.stateNode===null)ao(t,e),ax(e,s,n),lu(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=lt(s)?Cn:Ye.current,u=xr(e,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&rf(e,o,n,u),Ns=!1;var f=e.memoizedState;o.state=f,Mo(e,n,o,r),c=e.memoizedState,l!==n||f!==c||ot.current||Ns?(typeof d=="function"&&(ou(e,s,d,n),c=e.memoizedState),(l=Ns||nf(e,s,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,$g(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Mt(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=kt(c):(c=lt(s)?Cn:Ye.current,c=xr(e,c));var m=s.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&rf(e,o,n,c),Ns=!1,f=e.memoizedState,o.state=f,Mo(e,n,o,r);var g=e.memoizedState;l!==h||f!==g||ot.current||Ns?(typeof m=="function"&&(ou(e,s,m,n),g=e.memoizedState),(u=Ns||nf(e,s,u,n,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return du(t,e,s,n,i,r)}function du(t,e,s,n,r,i){dx(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&Gh(e,s,!1),ms(t,e,i);n=e.stateNode,Ow.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=vr(e,t.child,null,i),e.child=vr(e,null,l,i)):Ke(t,e,l,i),e.memoizedState=n.state,r&&Gh(e,s,!0),e.child}function hx(t){var e=t.stateNode;e.pendingContext?Kh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kh(t,e.context,!1),_d(t,e.containerInfo)}function hf(t,e,s,n,r){return yr(),gd(r),e.flags|=256,Ke(t,e,s,n),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function fx(t,e,s){var n=e.pendingProps,r=ge.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ce(ge,r&1),t===null)return iu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pl(o,n,0,null),t=kn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fu(s),e.memoizedState=hu,t):Td(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Aw(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=zs(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=zs(l,i):(i=kn(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?fu(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=hu,n}return i=t.child,t=i.sibling,n=zs(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Td(t,e){return e=pl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ta(t,e,s,n){return n!==null&&gd(n),vr(e,t.child,null,s),t=Td(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Aw(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=ic(Error(R(422))),Ta(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=pl({mode:"visible",children:n.children},r,0,null),i=kn(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&vr(e,t.child,null,o),e.child.memoizedState=fu(o),e.memoizedState=hu,i);if(!(e.mode&1))return Ta(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(R(419)),n=ic(i,n,void 0),Ta(t,e,o,n)}if(l=(o&t.childLanes)!==0,it||l){if(n=Ae,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,fs(t,r),Ft(n,t,r,-1))}return Rd(),n=ic(Error(R(421))),Ta(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Vw.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,ht=Ls(r.nextSibling),ft=e,pe=!0,Dt=null,t!==null&&(vt[wt++]=as,vt[wt++]=os,vt[wt++]=Pn,as=t.id,os=t.overflow,Pn=e),e=Td(e,n.children),e.flags|=4096,e)}function ff(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),au(t.return,e,s)}function ac(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function mx(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(Ke(t,e,n.children,s),n=ge.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ff(t,s,e);else if(t.tag===19)ff(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ce(ge,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&Oo(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),ac(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Oo(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}ac(e,!0,s,null,i);break;case"together":ac(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ao(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ms(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Tn|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,s=zs(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=zs(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Dw(t,e,s){switch(e.tag){case 3:hx(e),yr();break;case 5:Ug(e);break;case 1:lt(e.type)&&So(e);break;case 4:_d(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ce(Eo,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ce(ge,ge.current&1),e.flags|=128,null):s&e.child.childLanes?fx(t,e,s):(ce(ge,ge.current&1),t=ms(t,e,s),t!==null?t.sibling:null);ce(ge,ge.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return mx(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ce(ge,ge.current),n)break;return null;case 22:case 23:return e.lanes=0,ux(t,e,s)}return ms(t,e,s)}var px,mu,gx,xx;px=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};mu=function(){};gx=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,bn(Yt.current);var i=null;switch(s){case"input":r=Rc(t,r),n=Rc(t,n),i=[];break;case"select":r=ye({},r,{value:void 0}),n=ye({},n,{value:void 0}),i=[];break;case"textarea":r=$c(t,r),n=$c(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=No)}zc(s,n);var o;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}s&&(i=i||[]).push("style",s);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};xx=function(t,e,s,n){s!==n&&(e.flags|=4)};function Hr(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Iw(t,e,s){var n=e.pendingProps;switch(pd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return lt(e.type)&&ko(),ze(e),null;case 3:return n=e.stateNode,wr(),he(ot),he(Ye),Nd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(_u(Dt),Dt=null))),mu(t,e),ze(e),null;case 5:jd(e);var r=bn(Ui.current);if(s=e.type,t!==null&&e.stateNode!=null)gx(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(R(166));return ze(e),null}if(t=bn(Yt.current),Pa(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[Wt]=e,n[Fi]=i,t=(e.mode&1)!==0,s){case"dialog":ue("cancel",n),ue("close",n);break;case"iframe":case"object":case"embed":ue("load",n);break;case"video":case"audio":for(r=0;r<ii.length;r++)ue(ii[r],n);break;case"source":ue("error",n);break;case"img":case"image":case"link":ue("error",n),ue("load",n);break;case"details":ue("toggle",n);break;case"input":bh(n,i),ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ue("invalid",n);break;case"textarea":jh(n,i),ue("invalid",n)}zc(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ca(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ca(n.textContent,l,t),r=["children",""+l]):Pi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",n)}switch(s){case"input":va(n),_h(n,i,!0);break;case"textarea":va(n),Nh(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=No)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wp(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[Wt]=e,t[Fi]=n,px(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bc(s,n),s){case"dialog":ue("cancel",t),ue("close",t),r=n;break;case"iframe":case"object":case"embed":ue("load",t),r=n;break;case"video":case"audio":for(r=0;r<ii.length;r++)ue(ii[r],t);r=n;break;case"source":ue("error",t),r=n;break;case"img":case"image":case"link":ue("error",t),ue("load",t),r=n;break;case"details":ue("toggle",t),r=n;break;case"input":bh(t,n),r=Rc(t,n),ue("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=ye({},n,{value:void 0}),ue("invalid",t);break;case"textarea":jh(t,n),r=$c(t,n),ue("invalid",t);break;default:r=n}zc(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Kp(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vp(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Ei(t,c):typeof c=="number"&&Ei(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ue("scroll",t):c!=null&&ed(t,i,c,o))}switch(s){case"input":va(t),_h(t,n,!1);break;case"textarea":va(t),Nh(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Vs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?lr(t,!!n.multiple,i,!1):n.defaultValue!=null&&lr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=No)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)xx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(R(166));if(s=bn(Ui.current),bn(Yt.current),Pa(e)){if(n=e.stateNode,s=e.memoizedProps,n[Wt]=e,(i=n.nodeValue!==s)&&(t=ft,t!==null))switch(t.tag){case 3:Ca(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Wt]=e,e.stateNode=n}return ze(e),null;case 13:if(he(ge),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&ht!==null&&e.mode&1&&!(e.flags&128))Ig(),yr(),e.flags|=98560,i=!1;else if(i=Pa(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(R(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Wt]=e}else yr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),i=!1}else Dt!==null&&(_u(Dt),Dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Te===0&&(Te=3):Rd())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return wr(),mu(t,e),t===null&&Ri(e.stateNode.containerInfo),ze(e),null;case 10:return vd(e.type._context),ze(e),null;case 17:return lt(e.type)&&ko(),ze(e),null;case 19:if(he(ge),i=e.memoizedState,i===null)return ze(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Hr(i,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oo(t),o!==null){for(e.flags|=128,Hr(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ce(ge,ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&_e()>_r&&(e.flags|=128,n=!0,Hr(i,!1),e.lanes=4194304)}else{if(!n)if(t=Oo(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Hr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return ze(e),null}else 2*_e()-i.renderingStartTime>_r&&s!==1073741824&&(e.flags|=128,n=!0,Hr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_e(),e.sibling=null,s=ge.current,ce(ge,n?s&1|2:s&1),e):(ze(e),null);case 22:case 23:return Id(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?dt&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Rw(t,e){switch(pd(e),e.tag){case 1:return lt(e.type)&&ko(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),he(ot),he(Ye),Nd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jd(e),null;case 13:if(he(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));yr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ge),null;case 4:return wr(),null;case 10:return vd(e.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var Ma=!1,qe=!1,Lw=typeof WeakSet=="function"?WeakSet:Set,q=null;function ir(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){be(t,e,n)}else s.current=null}function pu(t,e,s){try{s()}catch(n){be(t,e,n)}}var mf=!1;function Fw(t,e){if(Xc=bo,t=_g(),fd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++u===r&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Zc={focusedElem:t,selectionRange:s},bo=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,b=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mt(e.type,x),b);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){be(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return g=mf,mf=!1,g}function gi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&pu(e,s,i)}r=r.next}while(r!==n)}}function fl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function gu(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function yx(t){var e=t.alternate;e!==null&&(t.alternate=null,yx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wt],delete e[Fi],delete e[su],delete e[ww],delete e[bw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vx(t){return t.tag===5||t.tag===3||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xu(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=No));else if(n!==4&&(t=t.child,t!==null))for(xu(t,e,s),t=t.sibling;t!==null;)xu(t,e,s),t=t.sibling}function yu(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yu(t,e,s),t=t.sibling;t!==null;)yu(t,e,s),t=t.sibling}var Re=null,Ot=!1;function ys(t,e,s){for(s=s.child;s!==null;)wx(t,e,s),s=s.sibling}function wx(t,e,s){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(il,s)}catch{}switch(s.tag){case 5:qe||ir(s,e);case 6:var n=Re,r=Ot;Re=null,ys(t,e,s),Re=n,Ot=r,Re!==null&&(Ot?(t=Re,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Re.removeChild(s.stateNode));break;case 18:Re!==null&&(Ot?(t=Re,s=s.stateNode,t.nodeType===8?Zl(t.parentNode,s):t.nodeType===1&&Zl(t,s),Ai(t)):Zl(Re,s.stateNode));break;case 4:n=Re,r=Ot,Re=s.stateNode.containerInfo,Ot=!0,ys(t,e,s),Re=n,Ot=r;break;case 0:case 11:case 14:case 15:if(!qe&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pu(s,e,o),r=r.next}while(r!==n)}ys(t,e,s);break;case 1:if(!qe&&(ir(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){be(s,e,l)}ys(t,e,s);break;case 21:ys(t,e,s);break;case 22:s.mode&1?(qe=(n=qe)||s.memoizedState!==null,ys(t,e,s),qe=n):ys(t,e,s);break;default:ys(t,e,s)}}function gf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Lw),e.forEach(function(n){var r=Yw.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Et(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Re=l.stateNode,Ot=!1;break e;case 3:Re=l.stateNode.containerInfo,Ot=!0;break e;case 4:Re=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(Re===null)throw Error(R(160));wx(i,o,r),Re=null,Ot=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){be(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bx(e,t),e=e.sibling}function bx(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),Ut(t),n&4){try{gi(3,t,t.return),fl(3,t)}catch(x){be(t,t.return,x)}try{gi(5,t,t.return)}catch(x){be(t,t.return,x)}}break;case 1:Et(e,t),Ut(t),n&512&&s!==null&&ir(s,s.return);break;case 5:if(Et(e,t),Ut(t),n&512&&s!==null&&ir(s,s.return),t.flags&32){var r=t.stateNode;try{Ei(r,"")}catch(x){be(t,t.return,x)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qp(r,i),Bc(l,o);var u=Bc(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Kp(r,h):d==="dangerouslySetInnerHTML"?Vp(r,h):d==="children"?Ei(r,h):ed(r,d,h,u)}switch(l){case"input":Lc(r,i);break;case"textarea":Hp(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?lr(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?lr(r,!!i.multiple,i.defaultValue,!0):lr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Fi]=i}catch(x){be(t,t.return,x)}}break;case 6:if(Et(e,t),Ut(t),n&4){if(t.stateNode===null)throw Error(R(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(x){be(t,t.return,x)}}break;case 3:if(Et(e,t),Ut(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ai(e.containerInfo)}catch(x){be(t,t.return,x)}break;case 4:Et(e,t),Ut(t);break;case 13:Et(e,t),Ut(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Ad=_e())),n&4&&gf(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(qe=(u=qe)||d,Et(e,t),qe=u):Et(e,t),Ut(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(h=q=d;q!==null;){switch(f=q,m=f.child,f.tag){case 0:case 11:case 14:case 15:gi(4,f,f.return);break;case 1:ir(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){be(n,s,x)}}break;case 5:ir(f,f.return);break;case 22:if(f.memoizedState!==null){yf(h);continue}}m!==null?(m.return=f,q=m):yf(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Yp("display",o))}catch(x){be(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){be(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Et(e,t),Ut(t),n&4&&gf(t);break;case 21:break;default:Et(e,t),Ut(t)}}function Ut(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(vx(s)){var n=s;break e}s=s.return}throw Error(R(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ei(r,""),n.flags&=-33);var i=pf(t);yu(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=pf(t);xu(t,l,o);break;default:throw Error(R(161))}}catch(c){be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $w(t,e,s){q=t,_x(t)}function _x(t,e,s){for(var n=(t.mode&1)!==0;q!==null;){var r=q,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||Ma;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||qe;l=Ma;var u=qe;if(Ma=o,(qe=c)&&!u)for(q=r;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?vf(r):c!==null?(c.return=o,q=c):vf(r);for(;i!==null;)q=i,_x(i),i=i.sibling;q=r,Ma=l,qe=u}xf(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,q=i):xf(t)}}function xf(t){for(;q!==null;){var e=q;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qe||fl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qe)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Mt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ef(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}ef(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ai(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}qe||e.flags&512&&gu(e)}catch(f){be(e,e.return,f)}}if(e===t){q=null;break}if(s=e.sibling,s!==null){s.return=e.return,q=s;break}q=e.return}}function yf(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var s=e.sibling;if(s!==null){s.return=e.return,q=s;break}q=e.return}}function vf(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{fl(4,e)}catch(c){be(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){be(e,r,c)}}var i=e.return;try{gu(e)}catch(c){be(e,i,c)}break;case 5:var o=e.return;try{gu(e)}catch(c){be(e,o,c)}}}catch(c){be(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var Uw=Math.ceil,Io=gs.ReactCurrentDispatcher,Md=gs.ReactCurrentOwner,jt=gs.ReactCurrentBatchConfig,Q=0,Ae=null,ke=null,Le=0,dt=0,ar=Zs(0),Te=0,Hi=null,Tn=0,ml=0,Od=0,xi=null,st=null,Ad=0,_r=1/0,ts=null,Ro=!1,vu=null,$s=null,Oa=!1,Ts=null,Lo=0,yi=0,wu=null,oo=-1,lo=0;function Je(){return Q&6?_e():oo!==-1?oo:oo=_e()}function Us(t){return t.mode&1?Q&2&&Le!==0?Le&-Le:jw.transition!==null?(lo===0&&(lo=ag()),lo):(t=ne,t!==0||(t=window.event,t=t===void 0?16:fg(t.type)),t):1}function Ft(t,e,s,n){if(50<yi)throw yi=0,wu=null,Error(R(185));sa(t,s,n),(!(Q&2)||t!==Ae)&&(t===Ae&&(!(Q&2)&&(ml|=s),Te===4&&Ss(t,Le)),ct(t,n),s===1&&Q===0&&!(e.mode&1)&&(_r=_e()+500,ul&&en()))}function ct(t,e){var s=t.callbackNode;jv(t,e);var n=wo(t,t===Ae?Le:0);if(n===0)s!==null&&Ch(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Ch(s),e===1)t.tag===0?_w(wf.bind(null,t)):Og(wf.bind(null,t)),yw(function(){!(Q&6)&&en()}),s=null;else{switch(og(n)){case 1:s=id;break;case 4:s=rg;break;case 16:s=vo;break;case 536870912:s=ig;break;default:s=vo}s=Tx(s,jx.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function jx(t,e){if(oo=-1,lo=0,Q&6)throw Error(R(327));var s=t.callbackNode;if(fr()&&t.callbackNode!==s)return null;var n=wo(t,t===Ae?Le:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fo(t,n);else{e=n;var r=Q;Q|=2;var i=kx();(Ae!==t||Le!==e)&&(ts=null,_r=_e()+500,Nn(t,e));do try{qw();break}catch(l){Nx(t,l)}while(!0);yd(),Io.current=i,Q=r,ke!==null?e=0:(Ae=null,Le=0,e=Te)}if(e!==0){if(e===2&&(r=Yc(t),r!==0&&(n=r,e=bu(t,r))),e===1)throw s=Hi,Nn(t,0),Ss(t,n),ct(t,_e()),s;if(e===6)Ss(t,n);else{if(r=t.current.alternate,!(n&30)&&!zw(r)&&(e=Fo(t,n),e===2&&(i=Yc(t),i!==0&&(n=i,e=bu(t,i))),e===1))throw s=Hi,Nn(t,0),Ss(t,n),ct(t,_e()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(R(345));case 2:mn(t,st,ts);break;case 3:if(Ss(t,n),(n&130023424)===n&&(e=Ad+500-_e(),10<e)){if(wo(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){Je(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=tu(mn.bind(null,t,st,ts),e);break}mn(t,st,ts);break;case 4:if(Ss(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-Lt(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=_e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Uw(n/1960))-n,10<n){t.timeoutHandle=tu(mn.bind(null,t,st,ts),n);break}mn(t,st,ts);break;case 5:mn(t,st,ts);break;default:throw Error(R(329))}}}return ct(t,_e()),t.callbackNode===s?jx.bind(null,t):null}function bu(t,e){var s=xi;return t.current.memoizedState.isDehydrated&&(Nn(t,e).flags|=256),t=Fo(t,e),t!==2&&(e=st,st=s,e!==null&&_u(e)),t}function _u(t){st===null?st=t:st.push.apply(st,t)}function zw(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!$t(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ss(t,e){for(e&=~Od,e&=~ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Lt(e),n=1<<s;t[s]=-1,e&=~n}}function wf(t){if(Q&6)throw Error(R(327));fr();var e=wo(t,0);if(!(e&1))return ct(t,_e()),null;var s=Fo(t,e);if(t.tag!==0&&s===2){var n=Yc(t);n!==0&&(e=n,s=bu(t,n))}if(s===1)throw s=Hi,Nn(t,0),Ss(t,e),ct(t,_e()),s;if(s===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mn(t,st,ts),ct(t,_e()),null}function Dd(t,e){var s=Q;Q|=1;try{return t(e)}finally{Q=s,Q===0&&(_r=_e()+500,ul&&en())}}function Mn(t){Ts!==null&&Ts.tag===0&&!(Q&6)&&fr();var e=Q;Q|=1;var s=jt.transition,n=ne;try{if(jt.transition=null,ne=1,t)return t()}finally{ne=n,jt.transition=s,Q=e,!(Q&6)&&en()}}function Id(){dt=ar.current,he(ar)}function Nn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,xw(s)),ke!==null)for(s=ke.return;s!==null;){var n=s;switch(pd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ko();break;case 3:wr(),he(ot),he(Ye),Nd();break;case 5:jd(n);break;case 4:wr();break;case 13:he(ge);break;case 19:he(ge);break;case 10:vd(n.type._context);break;case 22:case 23:Id()}s=s.return}if(Ae=t,ke=t=zs(t.current,null),Le=dt=e,Te=0,Hi=null,Od=ml=Tn=0,st=xi=null,wn!==null){for(e=0;e<wn.length;e++)if(s=wn[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}wn=null}return t}function Nx(t,e){do{var s=ke;try{if(yd(),ro.current=Do,Ao){for(var n=xe.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ao=!1}if(En=0,Oe=Pe=xe=null,pi=!1,zi=0,Md.current=null,s===null||s.return===null){Te=1,Hi=e,ke=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=Le,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=of(o);if(m!==null){m.flags&=-257,lf(m,o,l,i,e),m.mode&1&&af(i,u,e),e=m,c=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(c),e.updateQueue=x}else g.add(c);break e}else{if(!(e&1)){af(i,u,e),Rd();break e}c=Error(R(426))}}else if(pe&&l.mode&1){var b=of(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),lf(b,o,l,i,e),gd(br(c,l));break e}}i=c=br(c,l),Te!==4&&(Te=2),xi===null?xi=[i]:xi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=ox(i,c,e);Zh(i,p);break e;case 1:l=c;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&($s===null||!$s.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=lx(i,l,e);Zh(i,_);break e}}i=i.return}while(i!==null)}Cx(s)}catch(j){e=j,ke===s&&s!==null&&(ke=s=s.return);continue}break}while(!0)}function kx(){var t=Io.current;return Io.current=Do,t===null?Do:t}function Rd(){(Te===0||Te===3||Te===2)&&(Te=4),Ae===null||!(Tn&268435455)&&!(ml&268435455)||Ss(Ae,Le)}function Fo(t,e){var s=Q;Q|=2;var n=kx();(Ae!==t||Le!==e)&&(ts=null,Nn(t,e));do try{Bw();break}catch(r){Nx(t,r)}while(!0);if(yd(),Q=s,Io.current=n,ke!==null)throw Error(R(261));return Ae=null,Le=0,Te}function Bw(){for(;ke!==null;)Sx(ke)}function qw(){for(;ke!==null&&!mv();)Sx(ke)}function Sx(t){var e=Ex(t.alternate,t,dt);t.memoizedProps=t.pendingProps,e===null?Cx(t):ke=e,Md.current=null}function Cx(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Rw(s,e),s!==null){s.flags&=32767,ke=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,ke=null;return}}else if(s=Iw(s,e,dt),s!==null){ke=s;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Te===0&&(Te=5)}function mn(t,e,s){var n=ne,r=jt.transition;try{jt.transition=null,ne=1,Hw(t,e,s,n)}finally{jt.transition=r,ne=n}return null}function Hw(t,e,s,n){do fr();while(Ts!==null);if(Q&6)throw Error(R(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(Nv(t,i),t===Ae&&(ke=Ae=null,Le=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Oa||(Oa=!0,Tx(vo,function(){return fr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=ne;ne=1;var l=Q;Q|=4,Md.current=null,Fw(t,s),bx(s,t),uw(Zc),bo=!!Xc,Zc=Xc=null,t.current=s,$w(s),pv(),Q=l,ne=o,jt.transition=i}else t.current=s;if(Oa&&(Oa=!1,Ts=t,Lo=r),i=t.pendingLanes,i===0&&($s=null),yv(s.stateNode),ct(t,_e()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Ro)throw Ro=!1,t=vu,vu=null,t;return Lo&1&&t.tag!==0&&fr(),i=t.pendingLanes,i&1?t===wu?yi++:(yi=0,wu=t):yi=0,en(),null}function fr(){if(Ts!==null){var t=og(Lo),e=jt.transition,s=ne;try{if(jt.transition=null,ne=16>t?16:t,Ts===null)var n=!1;else{if(t=Ts,Ts=null,Lo=0,Q&6)throw Error(R(331));var r=Q;for(Q|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:gi(8,d,i)}var h=d.child;if(h!==null)h.return=d,q=h;else for(;q!==null;){d=q;var f=d.sibling,m=d.return;if(yx(d),d===u){q=null;break}if(f!==null){f.return=m,q=f;break}q=m}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:gi(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,q=p;break e}q=i.return}}var y=t.current;for(q=y;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=y;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fl(9,l)}}catch(j){be(l,l.return,j)}if(l===o){q=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,q=_;break e}q=l.return}}if(Q=r,en(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(il,t)}catch{}n=!0}return n}finally{ne=s,jt.transition=e}}return!1}function bf(t,e,s){e=br(s,e),e=ox(t,e,1),t=Fs(t,e,1),e=Je(),t!==null&&(sa(t,1,e),ct(t,e))}function be(t,e,s){if(t.tag===3)bf(t,t,s);else for(;e!==null;){if(e.tag===3){bf(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($s===null||!$s.has(n))){t=br(s,t),t=lx(e,t,1),e=Fs(e,t,1),t=Je(),e!==null&&(sa(e,1,t),ct(e,t));break}}e=e.return}}function Ww(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&s,Ae===t&&(Le&s)===s&&(Te===4||Te===3&&(Le&130023424)===Le&&500>_e()-Ad?Nn(t,0):Od|=s),ct(t,e)}function Px(t,e){e===0&&(t.mode&1?(e=_a,_a<<=1,!(_a&130023424)&&(_a=4194304)):e=1);var s=Je();t=fs(t,e),t!==null&&(sa(t,e,s),ct(t,s))}function Vw(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Px(t,s)}function Yw(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(e),Px(t,s)}var Ex;Ex=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||ot.current)it=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return it=!1,Dw(t,e,s);it=!!(t.flags&131072)}else it=!1,pe&&e.flags&1048576&&Ag(e,Po,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ao(t,e),t=e.pendingProps;var r=xr(e,Ye.current);hr(e,s),r=Sd(null,e,n,t,r,s);var i=Cd();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(n)?(i=!0,So(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bd(e),r.updater=hl,e.stateNode=r,r._reactInternals=e,lu(e,n,t,s),e=du(null,e,n,!0,i,s)):(e.tag=0,pe&&i&&md(e),Ke(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(ao(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Gw(n),t=Mt(n,t),r){case 0:e=uu(null,e,n,t,s);break e;case 1:e=df(null,e,n,t,s);break e;case 11:e=cf(null,e,n,t,s);break e;case 14:e=uf(null,e,n,Mt(n.type,t),s);break e}throw Error(R(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mt(n,r),uu(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mt(n,r),df(t,e,n,r,s);case 3:e:{if(hx(e),t===null)throw Error(R(387));n=e.pendingProps,i=e.memoizedState,r=i.element,$g(t,e),Mo(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=br(Error(R(423)),e),e=hf(t,e,n,s,r);break e}else if(n!==r){r=br(Error(R(424)),e),e=hf(t,e,n,s,r);break e}else for(ht=Ls(e.stateNode.containerInfo.firstChild),ft=e,pe=!0,Dt=null,s=Lg(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(yr(),n===r){e=ms(t,e,s);break e}Ke(t,e,n,s)}e=e.child}return e;case 5:return Ug(e),t===null&&iu(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,eu(n,r)?o=null:i!==null&&eu(n,i)&&(e.flags|=32),dx(t,e),Ke(t,e,o,s),e.child;case 6:return t===null&&iu(e),null;case 13:return fx(t,e,s);case 4:return _d(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=vr(e,null,n,s):Ke(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mt(n,r),cf(t,e,n,r,s);case 7:return Ke(t,e,e.pendingProps,s),e.child;case 8:return Ke(t,e,e.pendingProps.children,s),e.child;case 12:return Ke(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ce(Eo,n._currentValue),n._currentValue=o,i!==null)if($t(i.value,o)){if(i.children===r.children&&!ot.current){e=ms(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=us(-1,s&-s),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),au(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),au(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ke(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,hr(e,s),r=kt(r),n=n(r),e.flags|=1,Ke(t,e,n,s),e.child;case 14:return n=e.type,r=Mt(n,e.pendingProps),r=Mt(n.type,r),uf(t,e,n,r,s);case 15:return cx(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mt(n,r),ao(t,e),e.tag=1,lt(n)?(t=!0,So(e)):t=!1,hr(e,s),ax(e,n,r),lu(e,n,r,s),du(null,e,n,!0,t,s);case 19:return mx(t,e,s);case 22:return ux(t,e,s)}throw Error(R(156,e.tag))};function Tx(t,e){return ng(t,e)}function Kw(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,s,n){return new Kw(t,e,s,n)}function Ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gw(t){if(typeof t=="function")return Ld(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sd)return 11;if(t===nd)return 14}return 2}function zs(t,e){var s=t.alternate;return s===null?(s=bt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function co(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")Ld(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jn:return kn(s.children,r,i,e);case td:o=8,r|=8;break;case Oc:return t=bt(12,s,e,r|2),t.elementType=Oc,t.lanes=i,t;case Ac:return t=bt(13,s,e,r),t.elementType=Ac,t.lanes=i,t;case Dc:return t=bt(19,s,e,r),t.elementType=Dc,t.lanes=i,t;case Up:return pl(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fp:o=10;break e;case $p:o=9;break e;case sd:o=11;break e;case nd:o=14;break e;case js:o=16,n=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=bt(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function kn(t,e,s,n){return t=bt(7,t,n,e),t.lanes=s,t}function pl(t,e,s,n){return t=bt(22,t,n,e),t.elementType=Up,t.lanes=s,t.stateNode={isHidden:!1},t}function oc(t,e,s){return t=bt(6,t,null,e),t.lanes=s,t}function lc(t,e,s){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jw(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fd(t,e,s,n,r,i,o,l,c){return t=new Jw(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(i),t}function Qw(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Mx(t){if(!t)return Ys;t=t._reactInternals;e:{if(In(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var s=t.type;if(lt(s))return Mg(t,s,e)}return e}function Ox(t,e,s,n,r,i,o,l,c){return t=Fd(s,n,!0,t,r,i,o,l,c),t.context=Mx(null),s=t.current,n=Je(),r=Us(s),i=us(n,r),i.callback=e??null,Fs(s,i,r),t.current.lanes=r,sa(t,r,n),ct(t,n),t}function gl(t,e,s,n){var r=e.current,i=Je(),o=Us(r);return s=Mx(s),e.context===null?e.context=s:e.pendingContext=s,e=us(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fs(r,e,o),t!==null&&(Ft(t,r,o,i),no(t,r,o)),o}function $o(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _f(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function $d(t,e){_f(t,e),(t=t.alternate)&&_f(t,e)}function Xw(){return null}var Ax=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ud(t){this._internalRoot=t}xl.prototype.render=Ud.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));gl(t,e,null,null)};xl.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mn(function(){gl(null,t,null,null)}),e[hs]=null}};function xl(t){this._internalRoot=t}xl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ug();t={blockedOn:null,target:t,priority:e};for(var s=0;s<ks.length&&e!==0&&e<ks[s].priority;s++);ks.splice(s,0,t),s===0&&hg(t)}};function zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jf(){}function Zw(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var u=$o(o);i.call(u)}}var o=Ox(e,n,t,0,null,!1,!1,"",jf);return t._reactRootContainer=o,t[hs]=o.current,Ri(t.nodeType===8?t.parentNode:t),Mn(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=$o(c);l.call(u)}}var c=Fd(t,0,!1,null,null,!1,!1,"",jf);return t._reactRootContainer=c,t[hs]=c.current,Ri(t.nodeType===8?t.parentNode:t),Mn(function(){gl(e,c,s,n)}),c}function vl(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=$o(o);l.call(c)}}gl(e,o,t,r)}else o=Zw(s,e,t,r,n);return $o(o)}lg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ri(e.pendingLanes);s!==0&&(ad(e,s|1),ct(e,_e()),!(Q&6)&&(_r=_e()+500,en()))}break;case 13:Mn(function(){var n=fs(t,1);if(n!==null){var r=Je();Ft(n,t,1,r)}}),$d(t,1)}};od=function(t){if(t.tag===13){var e=fs(t,134217728);if(e!==null){var s=Je();Ft(e,t,134217728,s)}$d(t,134217728)}};cg=function(t){if(t.tag===13){var e=Us(t),s=fs(t,e);if(s!==null){var n=Je();Ft(s,t,e,n)}$d(t,e)}};ug=function(){return ne};dg=function(t,e){var s=ne;try{return ne=t,e()}finally{ne=s}};Hc=function(t,e,s){switch(e){case"input":if(Lc(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=cl(n);if(!r)throw Error(R(90));Bp(n),Lc(n,r)}}}break;case"textarea":Hp(t,s);break;case"select":e=s.value,e!=null&&lr(t,!!s.multiple,e,!1)}};Qp=Dd;Xp=Mn;var eb={usingClientEntryPoint:!1,Events:[ra,er,cl,Gp,Jp,Dd]},Wr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tb={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tg(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||Xw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{il=Aa.inject(tb),Vt=Aa}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eb;gt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zd(e))throw Error(R(200));return Qw(t,e,null,s)};gt.createRoot=function(t,e){if(!zd(t))throw Error(R(299));var s=!1,n="",r=Ax;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fd(t,1,!1,null,null,s,!1,n,r),t[hs]=e.current,Ri(t.nodeType===8?t.parentNode:t),new Ud(e)};gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=tg(e),t=t===null?null:t.stateNode,t};gt.flushSync=function(t){return Mn(t)};gt.hydrate=function(t,e,s){if(!yl(e))throw Error(R(200));return vl(null,t,e,!0,s)};gt.hydrateRoot=function(t,e,s){if(!zd(t))throw Error(R(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=Ax;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=Ox(e,null,t,1,s??null,r,!1,i,o),t[hs]=e.current,Ri(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new xl(e)};gt.render=function(t,e,s){if(!yl(e))throw Error(R(200));return vl(null,t,e,!1,s)};gt.unmountComponentAtNode=function(t){if(!yl(t))throw Error(R(40));return t._reactRootContainer?(Mn(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};gt.unstable_batchedUpdates=Dd;gt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!yl(s))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return vl(t,e,s,!1,n)};gt.version="18.3.1-next-f1338f8080-20240426";function Dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dx)}catch(t){console.error(t)}}Dx(),Dp.exports=gt;var sb=Dp.exports,Nf=sb;Tc.createRoot=Nf.createRoot,Tc.hydrateRoot=Nf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wi(){return Wi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Wi.apply(this,arguments)}var Ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ms||(Ms={}));const kf="popstate";function nb(t){t===void 0&&(t={});function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return ju("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:Uo(r)}return ib(e,s,null,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ix(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rb(){return Math.random().toString(36).substr(2,8)}function Sf(t,e){return{usr:t.state,key:t.key,idx:e}}function ju(t,e,s,n){return s===void 0&&(s=null),Wi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Er(e):e,{state:s,key:e&&e.key||n||rb()})}function Uo(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Er(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ib(t,e,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l=Ms.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Wi({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Ms.Pop;let b=d(),p=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:p})}function f(b,p){l=Ms.Push;let y=ju(x.location,b,p);u=d()+1;let v=Sf(y,u),_=x.createHref(y);try{o.pushState(v,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(_)}i&&c&&c({action:l,location:x.location,delta:1})}function m(b,p){l=Ms.Replace;let y=ju(x.location,b,p);u=d();let v=Sf(y,u),_=x.createHref(y);o.replaceState(v,"",_),i&&c&&c({action:l,location:x.location,delta:0})}function g(b){let p=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof b=="string"?b:Uo(b);return y=y.replace(/ $/,"%20"),Ne(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let x={get action(){return l},get location(){return t(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(kf,h),c=b,()=>{r.removeEventListener(kf,h),c=null}},createHref(b){return e(r,b)},createURL:g,encodeLocation(b){let p=g(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:m,go(b){return o.go(b)}};return x}var Cf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cf||(Cf={}));function ab(t,e,s){return s===void 0&&(s="/"),ob(t,e,s)}function ob(t,e,s,n){let r=typeof e=="string"?Er(e):e,i=Bd(r.pathname||"/",s);if(i==null)return null;let o=Rx(t);lb(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=wb(i);l=xb(o[c],u)}return l}function Rx(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ne(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Bs([n,c.relativePath]),d=s.concat(c);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rx(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:pb(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of Lx(i.path))r(i,o,c)}),e}function Lx(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=Lx(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function lb(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:gb(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const cb=/^:[\w-]+$/,ub=3,db=2,hb=1,fb=10,mb=-2,Pf=t=>t==="*";function pb(t,e){let s=t.split("/"),n=s.length;return s.some(Pf)&&(n+=mb),e&&(n+=db),s.filter(r=>!Pf(r)).reduce((r,i)=>r+(cb.test(i)?ub:i===""?hb:fb),n)}function gb(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function xb(t,e,s){let{routesMeta:n}=t,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=yb({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Bs([i,h.pathname]),pathnameBase:Nb(Bs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Bs([i,h.pathnameBase]))}return o}function yb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=vb(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[h];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function vb(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Ix(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function wb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ix(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function bb(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?Er(t):t;return{pathname:s?s.startsWith("/")?s:_b(s,e):e,search:kb(n),hash:Sb(r)}}function _b(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function cc(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jb(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function qd(t,e){let s=jb(t);return e?s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Hd(t,e,s,n){n===void 0&&(n=!1);let r;typeof t=="string"?r=Er(t):(r=Wi({},t),Ne(!r.pathname||!r.pathname.includes("?"),cc("?","pathname","search",r)),Ne(!r.pathname||!r.pathname.includes("#"),cc("#","pathname","hash",r)),Ne(!r.search||!r.search.includes("#"),cc("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=s;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=bb(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Bs=t=>t.join("/").replace(/\/\/+/g,"/"),Nb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),kb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Cb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fx=["post","put","patch","delete"];new Set(Fx);const Pb=["get",...Fx];new Set(Pb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vi(){return Vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Vi.apply(this,arguments)}const Wd=w.createContext(null),Eb=w.createContext(null),tn=w.createContext(null),wl=w.createContext(null),xs=w.createContext({outlet:null,matches:[],isDataRoute:!1}),$x=w.createContext(null);function Tb(t,e){let{relative:s}=e===void 0?{}:e;Tr()||Ne(!1);let{basename:n,navigator:r}=w.useContext(tn),{hash:i,pathname:o,search:l}=zx(t,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Bs([n,o])),r.createHref({pathname:c,search:l,hash:i})}function Tr(){return w.useContext(wl)!=null}function sn(){return Tr()||Ne(!1),w.useContext(wl).location}function Ux(t){w.useContext(tn).static||w.useLayoutEffect(t)}function ve(){let{isDataRoute:t}=w.useContext(xs);return t?qb():Mb()}function Mb(){Tr()||Ne(!1);let t=w.useContext(Wd),{basename:e,future:s,navigator:n}=w.useContext(tn),{matches:r}=w.useContext(xs),{pathname:i}=sn(),o=JSON.stringify(qd(r,s.v7_relativeSplatPath)),l=w.useRef(!1);return Ux(()=>{l.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Hd(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bs([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function aa(){let{matches:t}=w.useContext(xs),e=t[t.length-1];return e?e.params:{}}function zx(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=w.useContext(tn),{matches:r}=w.useContext(xs),{pathname:i}=sn(),o=JSON.stringify(qd(r,n.v7_relativeSplatPath));return w.useMemo(()=>Hd(t,JSON.parse(o),i,s==="path"),[t,o,i,s])}function Ob(t,e){return Ab(t,e)}function Ab(t,e,s,n){Tr()||Ne(!1);let{navigator:r}=w.useContext(tn),{matches:i}=w.useContext(xs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=sn(),d;if(e){var h;let b=typeof e=="string"?Er(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||Ne(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=ab(t,{pathname:m}),x=Fb(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Bs([c,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Bs([c,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,s,n);return e&&x?w.createElement(wl.Provider,{value:{location:Vi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ms.Pop}},x):x}function Db(){let t=Bb(),e=Cb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:r},s):null,null)}const Ib=w.createElement(Db,null);class Rb extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?w.createElement(xs.Provider,{value:this.props.routeContext},w.createElement($x.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lb(t){let{routeContext:e,match:s,children:n}=t,r=w.useContext(Wd);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),w.createElement(xs.Provider,{value:e},n)}function Fb(t,e,s,n){var r;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var i;if(!s)return null;if(s.errors)t=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=(r=s)==null?void 0:r.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ne(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=s,g=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,g=!1,x=null,b=null;s&&(m=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||Ib,c&&(u<0&&f===0?(Hb("route-fallback"),g=!0,b=null):u===f&&(g=!0,b=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,f+1)),y=()=>{let v;return m?v=x:g?v=b:h.route.Component?v=w.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,w.createElement(Lb,{match:h,routeContext:{outlet:d,matches:p,isDataRoute:s!=null},children:v})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(Rb,{location:s.location,revalidation:s.revalidation,component:x,error:m,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var Bx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Bx||{}),qx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qx||{});function $b(t){let e=w.useContext(Wd);return e||Ne(!1),e}function Ub(t){let e=w.useContext(Eb);return e||Ne(!1),e}function zb(t){let e=w.useContext(xs);return e||Ne(!1),e}function Hx(t){let e=zb(),s=e.matches[e.matches.length-1];return s.route.id||Ne(!1),s.route.id}function Bb(){var t;let e=w.useContext($x),s=Ub(),n=Hx();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function qb(){let{router:t}=$b(Bx.UseNavigateStable),e=Hx(qx.UseNavigateStable),s=w.useRef(!1);return Ux(()=>{s.current=!0}),w.useCallback(function(r,i){i===void 0&&(i={}),s.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Vi({fromRouteId:e},i)))},[t,e])}const Ef={};function Hb(t,e,s){Ef[t]||(Ef[t]=!0)}function Wb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ut(t){let{to:e,replace:s,state:n,relative:r}=t;Tr()||Ne(!1);let{future:i,static:o}=w.useContext(tn),{matches:l}=w.useContext(xs),{pathname:c}=sn(),u=ve(),d=Hd(e,qd(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:r}),[u,h,r,s,n]),null}function Z(t){Ne(!1)}function Vb(t){let{basename:e="/",children:s=null,location:n,navigationType:r=Ms.Pop,navigator:i,static:o=!1,future:l}=t;Tr()&&Ne(!1);let c=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Vi({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Er(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:g="default"}=n,x=w.useMemo(()=>{let b=Bd(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:g},navigationType:r}},[c,d,h,f,m,g,r]);return x==null?null:w.createElement(tn.Provider,{value:u},w.createElement(wl.Provider,{children:s,value:x}))}function Yb(t){let{children:e,location:s}=t;return Ob(Nu(e),s)}new Promise(()=>{});function Nu(t,e){e===void 0&&(e=[]);let s=[];return w.Children.forEach(t,(n,r)=>{if(!w.isValidElement(n))return;let i=[...e,r];if(n.type===w.Fragment){s.push.apply(s,Nu(n.props.children,i));return}n.type!==Z&&Ne(!1),!n.props.index||!n.props.children||Ne(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Nu(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ku.apply(this,arguments)}function Kb(t,e){if(t==null)return{};var s={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(s[r]=t[r]);return s}function Gb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Jb(t,e){return t.button===0&&(!e||e==="_self")&&!Gb(t)}const Qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xb="6";try{window.__reactRouterVersion=Xb}catch{}const Zb="startTransition",Tf=Wy[Zb];function e_(t){let{basename:e,children:s,future:n,window:r}=t,i=w.useRef();i.current==null&&(i.current=nb({window:r,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=w.useCallback(h=>{u&&Tf?Tf(()=>c(h)):c(h)},[c,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>Wb(n),[n]),w.createElement(Vb,{basename:e,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const t_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=w.forwardRef(function(e,s){let{onClick:n,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Kb(e,Qb),{basename:m}=w.useContext(tn),g,x=!1;if(typeof u=="string"&&s_.test(u)&&(g=u,t_))try{let v=new URL(window.location.href),_=u.startsWith("//")?new URL(v.protocol+u):new URL(u),j=Bd(_.pathname,m);_.origin===v.origin&&j!=null?u=j+_.search+_.hash:x=!0}catch{}let b=Tb(u,{relative:r}),p=n_(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function y(v){n&&n(v),v.defaultPrevented||p(v)}return w.createElement("a",ku({},f,{href:g||b,onClick:x||i?n:y,ref:s,target:c}))});var Mf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Mf||(Mf={}));var Of;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Of||(Of={}));function n_(t,e){let{target:s,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=ve(),u=sn(),d=zx(t,{relative:o});return w.useCallback(h=>{if(Jb(h,s)){h.preventDefault();let f=n!==void 0?n:Uo(u)===Uo(d);c(t,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,r,s,t,i,o,l])}let r_={data:""},i_=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||r_,a_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o_=/\/\*[^]*?\*\/|  +/g,Af=/\n+/g,Cs=(t,e)=>{let s="",n="",r="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?s=i+" "+o+";":n+=i[1]=="f"?Cs(o,i):i+"{"+Cs(o,i[1]=="k"?"":e)+"}":typeof o=="object"?n+=Cs(o,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Cs.p?Cs.p(i,o):i+":"+o+";")}return s+(e&&r?e+"{"+r+"}":r)+n},Jt={},Wx=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Wx(t[s]);return e}return t},l_=(t,e,s,n,r)=>{let i=Wx(t),o=Jt[i]||(Jt[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Jt[o]){let c=i!==t?t:(u=>{let d,h,f=[{}];for(;d=a_.exec(u.replace(o_,""));)d[4]?f.shift():d[3]?(h=d[3].replace(Af," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(Af," ").trim();return f[0]})(t);Jt[o]=Cs(r?{["@keyframes "+o]:c}:c,s?"":"."+o)}let l=s&&Jt.g?Jt.g:null;return s&&(Jt.g=Jt[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Jt[o],e,n,l),o},c_=(t,e,s)=>t.reduce((n,r,i)=>{let o=e[i];if(o&&o.call){let l=o(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Cs(l,""):l===!1?"":l}return n+r+(o??"")},"");function bl(t){let e=this||{},s=t.call?t(e.p):t;return l_(s.unshift?s.raw?c_(s,[].slice.call(arguments,1),e.p):s.reduce((n,r)=>Object.assign(n,r&&r.call?r(e.p):r),{}):s,i_(e.target),e.g,e.o,e.k)}let Vx,Su,Cu;bl.bind({g:1});let ps=bl.bind({k:1});function u_(t,e,s,n){Cs.p=e,Vx=t,Su=s,Cu=n}function nn(t,e){let s=this||{};return function(){let n=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;s.p=Object.assign({theme:Su&&Su()},l),s.o=/ *go\d+/.test(c),l.className=bl.apply(s,n)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),Cu&&u[0]&&Cu(l),Vx(u,l)}return r}}var d_=t=>typeof t=="function",zo=(t,e)=>d_(t)?t(e):t,h_=(()=>{let t=0;return()=>(++t).toString()})(),Yx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),f_=20,Kx=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,f_)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:s}=e;return Kx(t,{type:t.toasts.find(i=>i.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let r=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+r}))}}},uo=[],_n={toasts:[],pausedAt:void 0},Rn=t=>{_n=Kx(_n,t),uo.forEach(e=>{e(_n)})},m_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},p_=(t={})=>{let[e,s]=w.useState(_n),n=w.useRef(_n);w.useEffect(()=>(n.current!==_n&&s(_n),uo.push(s),()=>{let i=uo.indexOf(s);i>-1&&uo.splice(i,1)}),[]);let r=e.toasts.map(i=>{var o,l,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((l=t[i.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||m_[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:r}},g_=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||h_()}),oa=t=>(e,s)=>{let n=g_(e,t,s);return Rn({type:2,toast:n}),n.id},Ge=(t,e)=>oa("blank")(t,e);Ge.error=oa("error");Ge.success=oa("success");Ge.loading=oa("loading");Ge.custom=oa("custom");Ge.dismiss=t=>{Rn({type:3,toastId:t})};Ge.remove=t=>Rn({type:4,toastId:t});Ge.promise=(t,e,s)=>{let n=Ge.loading(e.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let i=e.success?zo(e.success,r):void 0;return i?Ge.success(i,{id:n,...s,...s==null?void 0:s.success}):Ge.dismiss(n),r}).catch(r=>{let i=e.error?zo(e.error,r):void 0;i?Ge.error(i,{id:n,...s,...s==null?void 0:s.error}):Ge.dismiss(n)}),t};var x_=(t,e)=>{Rn({type:1,toast:{id:t,height:e}})},y_=()=>{Rn({type:5,time:Date.now()})},vi=new Map,v_=1e3,w_=(t,e=v_)=>{if(vi.has(t))return;let s=setTimeout(()=>{vi.delete(t),Rn({type:4,toastId:t})},e);vi.set(t,s)},b_=t=>{let{toasts:e,pausedAt:s}=p_(t);w.useEffect(()=>{if(s)return;let i=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Ge.dismiss(l.id);return}return setTimeout(()=>Ge.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,s]);let n=w.useCallback(()=>{s&&Rn({type:6,time:Date.now()})},[s]),r=w.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(m=>(m.position||u)===(i.position||u)&&m.height),h=d.findIndex(m=>m.id===i.id),f=d.filter((m,g)=>g<h&&m.visible).length;return d.filter(m=>m.visible).slice(...l?[f+1]:[0,f]).reduce((m,g)=>m+(g.height||0)+c,0)},[e]);return w.useEffect(()=>{e.forEach(i=>{if(i.dismissed)w_(i.id,i.removeDelay);else{let o=vi.get(i.id);o&&(clearTimeout(o),vi.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:x_,startPause:y_,endPause:n,calculateOffset:r}}},__=ps`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,j_=ps`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,N_=ps`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,k_=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${__} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${j_} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${N_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,S_=ps`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,C_=nn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${S_} 1s linear infinite;
`,P_=ps`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,E_=ps`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,T_=nn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${P_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${E_} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,M_=nn("div")`
  position: absolute;
`,O_=nn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,A_=ps`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,D_=nn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${A_} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,I_=({toast:t})=>{let{icon:e,type:s,iconTheme:n}=t;return e!==void 0?typeof e=="string"?w.createElement(D_,null,e):e:s==="blank"?null:w.createElement(O_,null,w.createElement(C_,{...n}),s!=="loading"&&w.createElement(M_,null,s==="error"?w.createElement(k_,{...n}):w.createElement(T_,{...n})))},R_=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,L_=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,F_="0%{opacity:0;} 100%{opacity:1;}",$_="0%{opacity:1;} 100%{opacity:0;}",U_=nn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,z_=nn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,B_=(t,e)=>{let s=t.includes("top")?1:-1,[n,r]=Yx()?[F_,$_]:[R_(s),L_(s)];return{animation:e?`${ps(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ps(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},q_=w.memo(({toast:t,position:e,style:s,children:n})=>{let r=t.height?B_(t.position||e||"top-center",t.visible):{opacity:0},i=w.createElement(I_,{toast:t}),o=w.createElement(z_,{...t.ariaProps},zo(t.message,t));return w.createElement(U_,{className:t.className,style:{...r,...s,...t.style}},typeof n=="function"?n({icon:i,message:o}):w.createElement(w.Fragment,null,i,o))});u_(w.createElement);var H_=({id:t,className:e,style:s,onHeightUpdate:n,children:r})=>{let i=w.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return w.createElement("div",{ref:i,className:e,style:s},r)},W_=(t,e)=>{let s=t.includes("top"),n=s?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(s?1:-1)}px)`,...n,...r}},V_=bl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Da=16,Y_=({reverseOrder:t,position:e="top-center",toastOptions:s,gutter:n,children:r,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=b_(s);return w.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Da,left:Da,right:Da,bottom:Da,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,h=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),f=W_(d,h);return w.createElement(H_,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?V_:"",style:f},u.type==="custom"?zo(u.message,u):r?r(u):w.createElement(q_,{toast:u,position:d}))}))},E=Ge;const K_="modulepreload",G_=function(t){return"/"+t},Df={},la=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=G_(c),c in Df)return;Df[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":K_,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},J_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>la(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Vd extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class Q_ extends Vd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class If extends Vd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rf extends Vd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pu;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Pu||(Pu={}));var X_=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Z_{constructor(e,{headers:s={},customFetch:n,region:r=Pu.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=J_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return X_(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:d}).catch(x=>{throw new Q_(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new If(h);if(!h.ok)throw new Rf(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield h.json():m==="application/octet-stream"?g=yield h.blob():m==="text/event-stream"?g=h:m==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof Rf||r instanceof If?r.context:void 0}}})}}var nt={},Yd={},_l={},ca={},jl={},Nl={},ej=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jr=ej();const tj=jr.fetch,Gx=jr.fetch.bind(jr),Jx=jr.Headers,sj=jr.Request,nj=jr.Response,Mr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jx,Request:sj,Response:nj,default:Gx,fetch:tj},Symbol.toStringTag,{value:"Module"})),rj=Ey(Mr);var kl={};Object.defineProperty(kl,"__esModule",{value:!0});let ij=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};kl.default=ij;var Qx=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nl,"__esModule",{value:!0});const aj=Qx(rj),oj=Qx(kl);let lj=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=aj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,m="OK")}catch{i.status===404&&x===""?(f=204,m="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new oj.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};Nl.default=lj;var cj=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jl,"__esModule",{value:!0});const uj=cj(Nl);let dj=class extends uj.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jl.default=dj;var hj=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ca,"__esModule",{value:!0});const fj=hj(jl);let mj=class extends fj.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};ca.default=mj;var pj=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_l,"__esModule",{value:!0});const Vr=pj(ca);let gj=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Vr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Vr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Vr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_l.default=gj;var Sl={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.version=void 0;Cl.version="0.0.0-automated";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.DEFAULT_HEADERS=void 0;const xj=Cl;Sl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${xj.version}`};var Xx=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yd,"__esModule",{value:!0});const yj=Xx(_l),vj=Xx(ca),wj=Sl;let bj=class Zx{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},wj.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new yj.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Zx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=s);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new vj.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Yd.default=bj;var Or=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nt,"__esModule",{value:!0});nt.PostgrestError=nt.PostgrestBuilder=nt.PostgrestTransformBuilder=nt.PostgrestFilterBuilder=nt.PostgrestQueryBuilder=nt.PostgrestClient=void 0;const e0=Or(Yd);nt.PostgrestClient=e0.default;const t0=Or(_l);nt.PostgrestQueryBuilder=t0.default;const s0=Or(ca);nt.PostgrestFilterBuilder=s0.default;const n0=Or(jl);nt.PostgrestTransformBuilder=n0.default;const r0=Or(Nl);nt.PostgrestBuilder=r0.default;const i0=Or(kl);nt.PostgrestError=i0.default;var _j=nt.default={PostgrestClient:e0.default,PostgrestQueryBuilder:t0.default,PostgrestFilterBuilder:s0.default,PostgrestTransformBuilder:n0.default,PostgrestBuilder:r0.default,PostgrestError:i0.default};const{PostgrestClient:jj,PostgrestQueryBuilder:gE,PostgrestFilterBuilder:xE,PostgrestTransformBuilder:yE,PostgrestBuilder:vE,PostgrestError:wE}=_j;class Nj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const s=parseInt(process.versions.node.split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const kj="2.15.1",Sj=`realtime-js/${kj}`,Cj="1.0.0",Eu=1e4,Pj=1e3,Ej=100;var wi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(wi||(wi={}));var Ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ce||(Ce={}));var At;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(At||(At={}));var Tu;(function(t){t.websocket="websocket"})(Tu||(Tu={}));var yn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yn||(yn={}));class Tj{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class a0{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(le||(le={}));const Lf=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Mj(o,t,e,r),i),{})},Mj=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?o0(i,o):Mu(o)},o0=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Ij(e,s)}switch(t){case le.bool:return Oj(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Aj(e);case le.json:case le.jsonb:return Dj(e);case le.timestamp:return Rj(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Mu(e);default:return Mu(e)}},Mu=t=>t,Oj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Aj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Dj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ij=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>o0(e,l))}return t},Rj=t=>typeof t=="string"?t.replace(" ","T"):t,l0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class uc{constructor(e,s,n={},r=Eu){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ff;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ff||(Ff={}));class bi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=bi.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=bi.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),g=d.filter(b=>m.indexOf(b.presence_ref)<0),x=h.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(l[u]=g),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,r(l,u,c),u.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $f;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($f||($f={}));var _i;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_i||(_i={}));var ss;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class Kd{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new uc(this,At.join,this.params,this.timeout),this.rejoinTimer=new a0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(At.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new bi(this),this.broadcastEndpointURL=l0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&r!==void 0?r:[],u=!!this.bindings[_i.PRESENCE]&&this.bindings[_i.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(ss.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e==null||e(ss.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,b=[];for(let p=0;p<x;p++){const y=g[p],{filter:{event:v,schema:_,table:j,filter:N}}=y,S=f&&f[p];if(S&&S.event===v&&S.schema===_&&S.table===j&&S.filter===N)b.push(Object.assign(Object.assign({},y),{id:S.id}));else{this.unsubscribe(),this.state=Ce.errored,e==null||e(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(ss.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ce.errored,e==null||e(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===Ce.joined&&e===_i.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ce.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(At.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new uc(this,At.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new uc(this,e,s,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ej){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=At;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var g,x,b;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(x=m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,x,b,p,y,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((x=s.ids)===null||x===void 0?void 0:x.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(y=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((v=s==null?void 0:s.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:x,table:b,commit_timestamp:p,type:y,errors:v}=g;f=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:p,eventType:y,new:{},old:{},errors:v}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Kd.isEqual(r.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(At.close,{},e)}_onError(e){this._on(At.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Lf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Lf(e.columns,e.old_record)),s}}const Uf=()=>{},Ia={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lj=[1e3,2e3,5e3,1e4],Fj=1e4,$j=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Uj{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Eu,this.transport=null,this.heartbeatIntervalMs=Ia.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uf,this.ref=0,this.reconnectTimer=null,this.logger=Uf,this.conn=null,this.sendBuffer=[],this.serializer=new Tj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>la(async()=>{const{default:l}=await Promise.resolve().then(()=>Mr);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Tu.websocket}`,this.httpEndpoint=l0(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Nj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cj}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return yn.Connecting;case wi.open:return yn.Open;case wi.closing:return yn.Closing;default:return yn.Closed}}isConnected(){return this.connectionState()===yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Kd(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Pj,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ia.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{s.topic==="phoenix"&&s.event==="phx_reply"&&this.heartbeatCallback(s.payload.status==="ok"?"ok":"error"),s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:o}=s,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${r} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(At.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([$j],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:Sj};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(At.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new a0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ia.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,r,i,o,l,c,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Eu,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Ia.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>Lj[d-1]||Fj,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Gd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class zj extends Gd{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ou extends Gd{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Bj=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const c0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>la(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},qj=()=>Bj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield la(()=>Promise.resolve().then(()=>Mr),void 0)).Response:Response}),Au=t=>{if(Array.isArray(t))return t.map(s=>Au(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Au(n)}),e},Hj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ln=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const dc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Wj=(t,e,s)=>Ln(void 0,void 0,void 0,function*(){const n=yield qj();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new zj(dc(r),i,o))}).catch(r=>{e(new Ou(dc(r),r))}):e(new Ou(dc(t),t))}),Vj=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?r:(Hj(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),s))};function ua(t,e,s,n,r,i){return Ln(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Vj(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Wj(c,l,n))})})}function Bo(t,e,s,n){return Ln(this,void 0,void 0,function*(){return ua(t,"GET",e,s,n)})}function ns(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return ua(t,"POST",e,n,r,s)})}function Du(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return ua(t,"PUT",e,n,r,s)})}function Yj(t,e,s,n){return Ln(this,void 0,void 0,function*(){return ua(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function u0(t,e,s,n,r){return Ln(this,void 0,void 0,function*(){return ua(t,"DELETE",e,n,r,s)})}var et=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Kj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gj{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=c0(r)}uploadOrUpdate(e,s,n,r){return et(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},zf),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield(e=="PUT"?Du:ns)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(Me(i))return{data:null,error:i};throw i}})}upload(e,s,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return et(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:zf.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Du(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(Me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return et(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield ns(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Gd("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}update(e,s,n){return et(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return et(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}copy(e,s,n){return et(this,void 0,void 0,function*(){try{return{data:{path:(yield ns(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return et(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ns(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return et(this,void 0,void 0,function*(){try{const r=yield ns(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}download(e,s){return et(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Bo(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Me(l))return{data:null,error:l};throw l}})}info(e){return et(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Bo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Au(n),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}exists(e){return et(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Yj(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Me(n)&&n instanceof Ou){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return et(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}list(e,s,n){return et(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Kj),s),{prefix:e||""});return{data:yield ns(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Jj="2.10.5",Qj={"X-Client-Info":`storage-js/${Jj}`};var Un=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class Xj{constructor(e,s={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Qj),s),this.fetch=c0(n)}listBuckets(){return Un(this,void 0,void 0,function*(){try{return{data:yield Bo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Me(e))return{data:null,error:e};throw e}})}getBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield Bo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Un(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Un(this,void 0,void 0,function*(){try{return{data:yield Du(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Me(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield ns(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Un(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Me(s))return{data:null,error:s};throw s}})}}class Zj extends Xj{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new Gj(this.url,this.headers,e,this.fetch)}}const e1="2.55.0";let ai="";typeof Deno<"u"?ai="deno":typeof document<"u"?ai="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ai="react-native":ai="node";const t1={"X-Client-Info":`supabase-js-${ai}/${e1}`},s1={headers:t1},n1={schema:"public"},r1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i1={};var a1=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const o1=t=>{let e;return t?e=t:typeof fetch>"u"?e=Gx:e=fetch,(...s)=>e(...s)},l1=()=>typeof Headers>"u"?Jx:Headers,c1=(t,e,s)=>{const n=o1(s),r=l1();return(i,o)=>a1(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var u1=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function d1(t){return t.endsWith("/")?t:t+"/"}function h1(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>u1(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const d0="2.71.1",Yn=30*1e3,Iu=3,hc=Iu*Yn,f1="http://localhost:9999",m1="supabase.auth.token",p1={"X-Client-Info":`gotrue-js/${d0}`},Ru="X-Supabase-Api-Version",h0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},g1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,x1=10*60*1e3;class Jd extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class y1 extends Jd{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function v1(t){return Y(t)&&t.name==="AuthApiError"}class f0 extends Jd{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class rn extends Jd{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class _s extends rn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function w1(t){return Y(t)&&t.name==="AuthSessionMissingError"}class Ra extends rn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class La extends rn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fa extends rn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function b1(t){return Y(t)&&t.name==="AuthImplicitGrantRedirectError"}class Bf extends rn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lu extends rn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function fc(t){return Y(t)&&t.name==="AuthRetryableFetchError"}class qf extends rn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Fu extends rn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hf=` 	
\r=`.split(""),_1=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Hf.length;e+=1)t[Hf[e].charCodeAt(0)]=-2;for(let e=0;e<qo.length;e+=1)t[qo[e].charCodeAt(0)]=e;return t})();function Wf(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(qo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(qo[n]),e.queuedBits-=6}}function m0(t,e,s){const n=_1[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Vf(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{k1(o,n,s)};for(let o=0;o<t.length;o+=1)m0(t.charCodeAt(o),r,i);return e.join("")}function j1(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function N1(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}j1(n,e)}}function k1(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function S1(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)m0(t.charCodeAt(r),s,n);return new Uint8Array(e)}function C1(t){const e=[];return N1(t,s=>e.push(s)),new Uint8Array(e)}function P1(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Wf(r,s,n)),Wf(null,s,n),e.join("")}function E1(t){return Math.round(Date.now()/1e3)+t}function T1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",on={tested:!1,writable:!1},p0=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(on.tested)return on.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),on.tested=!0,on.writable=!0}catch{on.tested=!0,on.writable=!1}return on.writable};function M1(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const g0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>la(async()=>{const{default:n}=await Promise.resolve().then(()=>Mr);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},O1=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Kn=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ln=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},vs=async(t,e)=>{await t.removeItem(e)};class Pl{constructor(){this.promise=new Pl.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Pl.promiseConstructor=Promise;function mc(t){const e=t.split(".");if(e.length!==3)throw new Fu("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!g1.test(e[n]))throw new Fu("JWT not in base64url format");return{header:JSON.parse(Vf(e[0])),payload:JSON.parse(Vf(e[1])),signature:S1(e[2]),raw:{header:e[0],payload:e[1]}}}async function A1(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function D1(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function I1(t){return("0"+t.toString(16)).substr(-2)}function R1(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,I1).join("")}async function L1(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function F1(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await L1(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zn(t,e,s=!1){const n=R1();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Kn(t,`${e}-code-verifier`,r);const i=await F1(n);return[i,n===i?"plain":"s256"]}const $1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U1(t){const e=t.headers.get(Ru);if(!e||!e.match($1))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function z1(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function B1(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const q1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bn(t){if(!q1.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pc(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Yf(t){return JSON.parse(JSON.stringify(t))}var H1=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const pn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),W1=[502,503,504];async function Kf(t){var e;if(!O1(t))throw new Lu(pn(t),0);if(W1.includes(t.status))throw new Lu(pn(t),t.status);let s;try{s=await t.json()}catch(i){throw new f0(pn(i),i)}let n;const r=U1(t);if(r&&r.getTime()>=h0["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new qf(pn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new _s}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new qf(pn(s),t.status,s.weak_password.reasons);throw new y1(pn(s),t.status||500,n)}const V1=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function K(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Ru]||(i[Ru]=h0["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Y1(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Y1(t,e,s,n,r,i){const o=V1(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new Lu(pn(c),0)}if(l.ok||await Kf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Kf(c)}}function Xt(t){var e;let s=null;Q1(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=E1(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Gf(t){const e=Xt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ps(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function K1(t){return{data:t,error:null}}function G1(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=H1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function J1(t){return t}function Q1(t){return t.access_token&&t.refresh_token&&t.expires_in}const gc=["global","local","others"];var X1=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class Z1{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=g0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=gc[0]){if(gc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gc.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ps})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=X1(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:G1,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Y(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ps})}catch(s){if(Y(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:J1});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Y(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Bn(e);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ps})}catch(s){if(Y(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Bn(e);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Ps})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Bn(e);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ps})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Bn(e.userId);try{const{data:s,error:n}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Bn(e.userId),Bn(e.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}}}function Jf(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function eN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qn={debug:!!(globalThis&&p0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class x0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class tN extends x0{}async function sN(t,e,s){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new tN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}eN();const nN={url:f1,storageKey:m1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Qf(t,e,s){return await s()}const Hn={};class Yi{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yi.nextInstanceID,Yi.nextInstanceID+=1,this.instanceID>0&&Tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},nN),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Z1({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=g0(r.fetch),this.lock=r.lock||Qf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Tt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=sN:this.lock=Qf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:p0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jf(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Jf(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Hn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Hn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${d0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=M1(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Tt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),b1(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Y(s)?{error:s}:{error:new f0("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Xt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await zn(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:Xt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Xt})}else throw new La("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Y(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gf})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gf})}else throw new La("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ra}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,u,d,h,f,m;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:b,wallet:p,statement:y,options:v}=e;let _;if(Tt())if(typeof p=="object")_=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=p}const j=new URL((s=v==null?void 0:v.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),x=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:b,error:p}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:P1(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Xt});if(p)throw p;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ra}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:p})}catch(b){if(Y(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const s=await ln(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Xt});if(await vs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ra}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Y(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Xt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ra}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await zn(this.storage,this.storageKey));const{error:h}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new La("You must provide either an email or phone number.")}catch(l){if(Y(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Xt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(Y(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zn(this.storage,this.storageKey)),await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:K1})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new _s;const{error:r}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await K(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await K(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new La("You must provide either an email or phone number and a type")}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ln(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<hc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await ln(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=pc()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ps}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _s}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ps})})}catch(s){if(Y(s))return w1(s)&&(await this._removeSession(),await vs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new _s;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await zn(this.storage,this.storageKey));const{data:u,error:d}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ps});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _s;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=mc(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(Y(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new _s;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Tt())throw new Fa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bf("No code detected.");const{data:y,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Fa("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Yn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const p={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(n){if(Y(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ln(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(v1(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=T1(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await zn(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Y(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Tt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Y(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await D1(async r=>(r>0&&await A1(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xt})),(r,i)=>{const o=200*Math.pow(2,r);return i&&fc(i)&&Date.now()+o-n<Yn})}catch(n){if(this._debug(s,"error",n),Y(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Tt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ln(this.storage,this.storageKey);if(r&&this.userStorage){let o=await ln(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Kn(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:pc()}else if(r&&!r.user&&!r.user){const o=await ln(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await vs(this.storage,this.storageKey+"-user"),await Kn(this.storage,this.storageKey,r)):r.user=pc()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<hc;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${hc}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),fc(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new _s;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Pl;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new _s;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),Y(i)){const o={session:null,error:i};return fc(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Kn(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=Yf(r);await Kn(this.storage,this.storageKey,i)}else{const r=Yf(s);await Kn(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await vs(this.storage,this.storageKey),await vs(this.storage,this.storageKey+"-code-verifier"),await vs(this.storage,this.storageKey+"-user"),this.userStorage&&await vs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Yn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Yn}ms, refresh threshold is ${Iu} ticks`),r<=Iu&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof x0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(Y(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Y(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mc(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+x1>r)return n;const{data:i,error:o}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=mc(n);s!=null&&s.allowExpired||z1(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const d=B1(r.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,C1(`${l}.${c}`)))throw new Fu("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}}Yi.nextInstanceID=0;const rN=Yi;class iN extends rN{constructor(e){super(e)}}var aN=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class oN{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=d1(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:n1,realtime:i1,auth:Object.assign(Object.assign({},r1),{storageKey:u}),global:s1},h=h1(n??{},d);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=c1(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new jj(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Zj(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Z_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return aN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iN({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Uj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lN=(t,e,s)=>new oN(t,e,s);function cN(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uN="https://mddooginrusnncohfmcy.supabase.co",dN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1kZG9vZ2lucnVzbm5jb2hmbWN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMzQ0NTIsImV4cCI6MjA3MDgxMDQ1Mn0.p0yoV89E37HdJfjCzYihp9jc-m7ksja2wYDB8wny6cI",I=lN(uN,dN);window.supabase=I;const y0=w.createContext(void 0),oe=()=>{const t=w.useContext(y0);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},hN=({children:t})=>{const[e,s]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!0);w.useEffect(()=>{console.log("1. AuthProvider useEffect fired. Setting up listener..."),I.auth.getSession().then(({data:{session:m}})=>{console.log("2. Initial session fetched.",m),r(m),m&&(console.log("--- DEBUG: COPY THIS TOKEN ---"),console.log(m.access_token),console.log("--- END DEBUG ---")),m!=null&&m.user?(console.log("3. Initial user found. Fetching profile..."),l(m.user.id)):o(!1)});const{data:{subscription:f}}=I.auth.onAuthStateChange(async(m,g)=>{console.log(`4. onAuthStateChange fired. Event: ${m}`),r(g),g!=null&&g.user?(console.log("5. User session changed. Fetching profile..."),l(g.user.id)):(console.log("5b. No user session. Clearing user."),s(null),o(!1))});return()=>{console.log("AuthProvider unmounting. Unsubscribing."),f.unsubscribe()}},[]);const l=async f=>{console.log("6. Inside fetchUserProfile for user:",f);try{const{data:m,error:g}=await I.from("admin_profiles").select("role, full_name, city, state").eq("id",f).single();if(m){console.log("7b. Admin profile found:",m);const{data:{user:y}}=await I.auth.getUser();s({...y,...m});return}if(g&&g.code!=="PGRST116")throw g;console.log("7c. No admin profile found. Checking regular 'profiles' table...");const{data:x,error:b}=await I.from("profiles").select("role, full_name, city, state").eq("id",f).single();if(b)throw b;console.log("8. Regular profile found:",x);const{data:{user:p}}=await I.auth.getUser();s({...p,...x})}catch(m){console.error("Error fetching user profile:",m);const{data:{user:g}}=await I.auth.getUser();g&&s(g)}finally{console.log("9. fetchUserProfile finished. Setting loading to false."),o(!1)}},h={user:e,session:n,loading:i,signIn:async(f,m)=>{o(!0);try{const{error:g}=await I.auth.signInWithPassword({email:f,password:m});if(g)throw g;E.success("Signed in successfully!")}catch(g){throw E.error(g.message||"Error signing in"),g}finally{o(!1)}},signUp:async(f,m,g)=>{o(!0);try{const{data:x,error:b}=await I.auth.signUp({email:f,password:m});if(b)throw b;if(!x.user)throw new Error("User creation failed");const{error:p}=await I.from("profiles").insert({id:x.user.id,email:f,role:g.role,full_name:g.full_name,phone:g.phone});if(p)throw p;E.success("Account created successfully!")}catch(x){throw E.error(x.message||"Error creating account"),x}finally{o(!1)}},signOut:async()=>{try{const{error:f}=await I.auth.signOut();if(f)throw f;E.success("Signed out successfully!")}catch(f){E.error(f.message||"Error signing out")}}};return a.jsx(y0.Provider,{value:h,children:t})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),H=(t,e)=>{const s=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>w.createElement("svg",{ref:d,...fN,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${mN(t)}`,l].join(" "),...u},[...e.map(([h,f])=>w.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=H("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=H("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=H("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=H("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=H("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=H("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=H("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=H("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=H("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=H("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=H("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=H("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=H("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=H("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=H("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=H("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=H("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=H("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=H("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=H("FileClock",[["path",{d:"M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"9lo3o3"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"8",cy:"16",r:"6",key:"10v15b"}],["path",{d:"M9.5 17.5 8 16.25V14",key:"1o80t2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=H("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=H("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=H("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=H("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=H("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=H("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=H("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=H("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=H("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=H("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=H("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=H("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=H("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=H("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=H("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=H("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=H("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=H("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=H("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=H("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=H("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=H("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=H("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=H("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=H("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=H("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=H("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=H("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=H("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=H("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=H("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=H("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=H("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=H("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=H("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=H("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S0="/assets/horizontal-logo-CFaWkA8o.png",ON=()=>{const[t,e]=w.useState(""),[s,n]=w.useState(""),[r,i]=w.useState(!1),[o,l]=w.useState(!1),{signIn:c}=oe(),u=async d=>{if(d.preventDefault(),!t||!s){E.error("Please fill in all fields");return}l(!0);try{await c(t,s)}catch{}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen flex flex-col justify-between bg-gradient-to-br from-primary-50 to-primary-100 py-12 px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"flex-grow flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex justify-center",children:[a.jsx("img",{src:S0,alt:"Logo",className:"h-16 w-auto"})," "]}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"mosque Collection Management System"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(da,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>e(d.target.value),className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:z-10",placeholder:"Enter your email"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(NN,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:d=>n(d.target.value),className:"appearance-none relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:z-10",placeholder:"Enter your password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!r),children:r?a.jsx($u,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):a.jsx(Ks,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:o?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Sign In"})}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx(pt,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200",children:"Sign up here"})]})})]})]})}),a.jsxs("div",{className:"text-center py-4 text-sm text-gray-500",children:["Created by ",a.jsx("span",{className:"font-semibold text-primary-600",children:"Shahid Shaikh"})]})]})},AN=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],DN=()=>{const[t,e]=w.useState(""),[s,n]=w.useState(""),[r,i]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,h]=w.useState(""),[f,m]=w.useState("household"),[g,x]=w.useState(""),[b,p]=w.useState([]),[y,v]=w.useState(""),[_,j]=w.useState({house_number:"",male_count:"",female_count:"",monthly_amount:""}),[N,S]=w.useState(null),[C,k]=w.useState({name:"",address:"",monthly_amount:"500",upi_id:""}),[M,T]=w.useState(!1),[A,F]=w.useState(!1),[U,$]=w.useState(!1),L=ve();w.useEffect(()=>{const O=async()=>{if(c.length<3){p([]);return}try{const{data:W,error:re}=await I.rpc("get_mosques_by_city",{city_name:c});if(re)throw re;p(W||[])}catch(W){console.error("Error fetching mosques:",W),p([])}},B=setTimeout(()=>{f==="household"&&O()},500);return()=>clearTimeout(B)},[c,f]),w.useEffect(()=>{(async()=>{if(!y){S(null),j(B=>({...B,monthly_amount:""}));return}try{const{data:B,error:W}=await I.from("mosques").select("annual_amount").eq("id",y).single();if(W)throw W;if(B){const re=Math.round(B.annual_amount/12);S(re),j(fe=>({...fe,monthly_amount:re.toString()}))}}catch{E.error("Could not fetch mosque details.")}})()},[y]);const z=O=>{j({..._,monthly_amount:O.target.value})},P=()=>{N!==null&&(parseInt(_.monthly_amount)||0)<N&&(E.error(`Amount cannot be less than the minimum of ${N}.`),j({..._,monthly_amount:N.toString()}))},D=async O=>{if(O.preventDefault(),r!==o)return E.error("Passwords do not match");if(r.length<6)return E.error("Password must be at least 6 characters");const B=parseInt(_.monthly_amount)||0;if(f==="household"&&N&&B<N)return E.error(`Contribution cannot be less than the minimum of ${N}.`);$(!0);const W=parseInt(_.male_count)||0,re=parseInt(_.female_count)||0,fe=parseInt(C.monthly_amount)||0,$e={email:s,password:r,fullName:t,city:c,state:d,role:f,contactNumber:g,mosqueId:f==="household"?y:void 0,householdDetails:f==="household"?{..._,contact_number:g,male_count:W,female_count:re,members_count:W+re,annual_amount:B*12}:void 0,mosqueDetails:f==="mosque_admin"?{name:C.name,address:C.address,upi_id:C.upi_id,annual_amount:fe*12}:void 0};try{const{error:me}=await I.functions.invoke("unified-signup",{body:$e});if(me)throw new Error(me.message);E.success("Registration successful! Please wait for approval."),L("/awaiting-approval")}catch(me){E.error(me.message||"Sign-up failed.")}finally{$(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 py-12 px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(De,{className:"h-12 w-12 text-primary-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Create your account"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:D,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Your Full Name",required:!0,value:t,onChange:O=>e(O.target.value),className:"input-field"}),a.jsx("input",{type:"email",placeholder:"Email Address",required:!0,value:s,onChange:O=>n(O.target.value),className:"input-field"}),a.jsx("input",{type:"tel",placeholder:"Contact Number",required:!0,value:g,onChange:O=>x(O.target.value),className:"input-field"}),a.jsxs("select",{value:d,onChange:O=>h(O.target.value),className:"input-field",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"-- Select Your State --"}),AN.map(O=>a.jsx("option",{value:O,children:O},O))]}),a.jsx("input",{type:"text",placeholder:"City",required:!0,value:c,onChange:O=>u(O.target.value),className:"input-field"}),a.jsxs("select",{value:f,onChange:O=>m(O.target.value),className:"input-field",children:[a.jsx("option",{value:"household",children:"Join a mosque (as a Household)"}),a.jsx("option",{value:"mosque_admin",children:"Register a New mosque (as an Admin)"})]})]}),a.jsx("hr",{}),f==="household"&&a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-center text-gray-700",children:"Household Details"}),a.jsx("p",{className:"text-xs text-center text-gray-500 -mt-2",children:"The person registering is considered the head of the house."}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Select a mosque in ",c||"your city"]}),a.jsxs("select",{value:y,onChange:O=>v(O.target.value),className:"input-field",required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"-- Select a mosque --"}),b.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})]}),a.jsx("input",{type:"text",placeholder:"Jamat Number",required:!0,value:_.house_number,onChange:O=>j({..._,house_number:O.target.value}),className:"input-field"}),a.jsx("input",{type:"number",placeholder:"Number of Male Members",required:!0,min:"0",value:_.male_count,onChange:O=>j({..._,male_count:O.target.value}),className:"input-field"}),a.jsx("input",{type:"number",placeholder:"Number of Female Members",required:!0,min:"0",value:_.female_count,onChange:O=>j({..._,female_count:O.target.value}),className:"input-field"}),y&&N!==null&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Monthly Contribution"}),a.jsx("input",{type:"number",placeholder:"Monthly Amount",required:!0,min:N,value:_.monthly_amount,onChange:z,onBlur:P,className:"input-field"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum amount for this mosque is ",N,"."]})]})]}),f==="mosque_admin"&&a.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-center text-gray-700",children:"New mosque Details"}),a.jsx("input",{type:"text",placeholder:"mosque Name",required:!0,value:C.name,onChange:O=>k({...C,name:O.target.value}),className:"input-field"}),a.jsx("input",{type:"text",placeholder:"mosque Address",required:!0,value:C.address,onChange:O=>k({...C,address:O.target.value}),className:"input-field"}),a.jsx("input",{type:"text",placeholder:"UPI ID (e.g., yourname@upi)",required:!0,value:C.upi_id,onChange:O=>k({...C,upi_id:O.target.value}),className:"input-field"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Monthly Amount"}),a.jsx("input",{type:"number",required:!0,value:C.monthly_amount,onChange:O=>k({...C,monthly_amount:O.target.value}),className:"input-field"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:M?"text":"password",required:!0,value:r,onChange:O=>i(O.target.value),className:"input-field",placeholder:"Create a password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>T(!M),children:M?a.jsx($u,{className:"h-5 w-5 text-gray-400"}):a.jsx(Ks,{className:"h-5 w-5 text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:A?"text":"password",required:!0,value:o,onChange:O=>l(O.target.value),className:"input-field",placeholder:"Confirm your password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>F(!A),children:A?a.jsx($u,{className:"h-5 w-5 text-gray-400"}):a.jsx(Ks,{className:"h-5 w-5 text-gray-400"})})]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:U,className:"btn-primary w-full",children:U?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mx-auto"}):"Create Account"})}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx(pt,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in here"})]})})]})]})})};function Ho(t){"@babel/helpers - typeof";return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(t)}function On(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ie(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function He(t){Ie(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Ho(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function IN(t,e){Ie(2,arguments);var s=He(t).getTime(),n=On(e);return new Date(s+n)}var RN={};function fa(){return RN}function zu(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function LN(t,e){Ie(2,arguments);var s=He(t),n=He(e),r=s.getTime()-n.getTime();return r<0?-1:r>0?1:r}function FN(t){return Ie(1,arguments),t instanceof Date||Ho(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $N(t){if(Ie(1,arguments),!FN(t)&&typeof t!="number")return!1;var e=He(t);return!isNaN(Number(e))}function UN(t,e){Ie(2,arguments);var s=On(e);return IN(t,-s)}var zN=864e5;function BN(t){Ie(1,arguments);var e=He(t),s=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),r=s-n;return Math.floor(r/zN)+1}function Wo(t){Ie(1,arguments);var e=1,s=He(t),n=s.getUTCDay(),r=(n<e?7:0)+n-e;return s.setUTCDate(s.getUTCDate()-r),s.setUTCHours(0,0,0,0),s}function C0(t){Ie(1,arguments);var e=He(t),s=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(s+1,0,4),n.setUTCHours(0,0,0,0);var r=Wo(n),i=new Date(0);i.setUTCFullYear(s,0,4),i.setUTCHours(0,0,0,0);var o=Wo(i);return e.getTime()>=r.getTime()?s+1:e.getTime()>=o.getTime()?s:s-1}function qN(t){Ie(1,arguments);var e=C0(t),s=new Date(0);s.setUTCFullYear(e,0,4),s.setUTCHours(0,0,0,0);var n=Wo(s);return n}var HN=6048e5;function WN(t){Ie(1,arguments);var e=He(t),s=Wo(e).getTime()-qN(e).getTime();return Math.round(s/HN)+1}function Vo(t,e){var s,n,r,i,o,l,c,u;Ie(1,arguments);var d=fa(),h=On((s=(n=(r=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&s!==void 0?s:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=He(t),m=f.getUTCDay(),g=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-g),f.setUTCHours(0,0,0,0),f}function P0(t,e){var s,n,r,i,o,l,c,u;Ie(1,arguments);var d=He(t),h=d.getUTCFullYear(),f=fa(),m=On((s=(n=(r=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&n!==void 0?n:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(h+1,0,m),g.setUTCHours(0,0,0,0);var x=Vo(g,e),b=new Date(0);b.setUTCFullYear(h,0,m),b.setUTCHours(0,0,0,0);var p=Vo(b,e);return d.getTime()>=x.getTime()?h+1:d.getTime()>=p.getTime()?h:h-1}function VN(t,e){var s,n,r,i,o,l,c,u;Ie(1,arguments);var d=fa(),h=On((s=(n=(r=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&s!==void 0?s:1),f=P0(t,e),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var g=Vo(m,e);return g}var YN=6048e5;function KN(t,e){Ie(1,arguments);var s=He(t),n=Vo(s,e).getTime()-VN(s,e).getTime();return Math.round(n/YN)+1}function te(t,e){for(var s=t<0?"-":"",n=Math.abs(t).toString();n.length<e;)n="0"+n;return s+n}var ws={y:function(e,s){var n=e.getUTCFullYear(),r=n>0?n:1-n;return te(s==="yy"?r%100:r,s.length)},M:function(e,s){var n=e.getUTCMonth();return s==="M"?String(n+1):te(n+1,2)},d:function(e,s){return te(e.getUTCDate(),s.length)},a:function(e,s){var n=e.getUTCHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,s){return te(e.getUTCHours()%12||12,s.length)},H:function(e,s){return te(e.getUTCHours(),s.length)},m:function(e,s){return te(e.getUTCMinutes(),s.length)},s:function(e,s){return te(e.getUTCSeconds(),s.length)},S:function(e,s){var n=s.length,r=e.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return te(i,s.length)}},Wn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GN={G:function(e,s,n){var r=e.getUTCFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,s,n){if(s==="yo"){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ws.y(e,s)},Y:function(e,s,n,r){var i=P0(e,r),o=i>0?i:1-i;if(s==="YY"){var l=o%100;return te(l,2)}return s==="Yo"?n.ordinalNumber(o,{unit:"year"}):te(o,s.length)},R:function(e,s){var n=C0(e);return te(n,s.length)},u:function(e,s){var n=e.getUTCFullYear();return te(n,s.length)},Q:function(e,s,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return te(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,s,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return te(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,s,n){var r=e.getUTCMonth();switch(s){case"M":case"MM":return ws.M(e,s);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,s,n){var r=e.getUTCMonth();switch(s){case"L":return String(r+1);case"LL":return te(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,s,n,r){var i=KN(e,r);return s==="wo"?n.ordinalNumber(i,{unit:"week"}):te(i,s.length)},I:function(e,s,n){var r=WN(e);return s==="Io"?n.ordinalNumber(r,{unit:"week"}):te(r,s.length)},d:function(e,s,n){return s==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):ws.d(e,s)},D:function(e,s,n){var r=BN(e);return s==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):te(r,s.length)},E:function(e,s,n){var r=e.getUTCDay();switch(s){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,s,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(o);case"ee":return te(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,s,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(o);case"cc":return te(o,s.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,s,n){var r=e.getUTCDay(),i=r===0?7:r;switch(s){case"i":return String(i);case"ii":return te(i,s.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,s,n){var r=e.getUTCHours(),i=r/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,s,n){var r=e.getUTCHours(),i;switch(r===12?i=Wn.noon:r===0?i=Wn.midnight:i=r/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,s,n){var r=e.getUTCHours(),i;switch(r>=17?i=Wn.evening:r>=12?i=Wn.afternoon:r>=4?i=Wn.morning:i=Wn.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,s,n){if(s==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ws.h(e,s)},H:function(e,s,n){return s==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ws.H(e,s)},K:function(e,s,n){var r=e.getUTCHours()%12;return s==="Ko"?n.ordinalNumber(r,{unit:"hour"}):te(r,s.length)},k:function(e,s,n){var r=e.getUTCHours();return r===0&&(r=24),s==="ko"?n.ordinalNumber(r,{unit:"hour"}):te(r,s.length)},m:function(e,s,n){return s==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ws.m(e,s)},s:function(e,s,n){return s==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ws.s(e,s)},S:function(e,s){return ws.S(e,s)},X:function(e,s,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(s){case"X":return rm(o);case"XXXX":case"XX":return gn(o);case"XXXXX":case"XXX":default:return gn(o,":")}},x:function(e,s,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(s){case"x":return rm(o);case"xxxx":case"xx":return gn(o);case"xxxxx":case"xxx":default:return gn(o,":")}},O:function(e,s,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+nm(o,":");case"OOOO":default:return"GMT"+gn(o,":")}},z:function(e,s,n,r){var i=r._originalDate||e,o=i.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+nm(o,":");case"zzzz":default:return"GMT"+gn(o,":")}},t:function(e,s,n,r){var i=r._originalDate||e,o=Math.floor(i.getTime()/1e3);return te(o,s.length)},T:function(e,s,n,r){var i=r._originalDate||e,o=i.getTime();return te(o,s.length)}};function nm(t,e){var s=t>0?"-":"+",n=Math.abs(t),r=Math.floor(n/60),i=n%60;if(i===0)return s+String(r);var o=e;return s+String(r)+o+te(i,2)}function rm(t,e){if(t%60===0){var s=t>0?"-":"+";return s+te(Math.abs(t)/60,2)}return gn(t,e)}function gn(t,e){var s=e||"",n=t>0?"-":"+",r=Math.abs(t),i=te(Math.floor(r/60),2),o=te(r%60,2);return n+i+s+o}var im=function(e,s){switch(e){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},E0=function(e,s){switch(e){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},JN=function(e,s){var n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return im(e,s);var o;switch(r){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;case"PPPP":default:o=s.dateTime({width:"full"});break}return o.replace("{{date}}",im(r,s)).replace("{{time}}",E0(i,s))},QN={p:E0,P:JN},XN=["D","DD"],ZN=["YY","YYYY"];function ek(t){return XN.indexOf(t)!==-1}function tk(t){return ZN.indexOf(t)!==-1}function am(t,e,s){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(s,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var sk={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nk=function(e,s,n){var r,i=sk[e];return typeof i=="string"?r=i:s===1?r=i.one:r=i.other.replace("{{count}}",s.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xc(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=e.width?String(e.width):t.defaultWidth,n=t.formats[s]||t.formats[t.defaultWidth];return n}}var rk={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ik={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ak={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ok={date:xc({formats:rk,defaultWidth:"full"}),time:xc({formats:ik,defaultWidth:"full"}),dateTime:xc({formats:ak,defaultWidth:"full"})},lk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ck=function(e,s,n,r){return lk[e]};function Yr(t){return function(e,s){var n=s!=null&&s.context?String(s.context):"standalone",r;if(n==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=s!=null&&s.width?String(s.width):i;r=t.formattingValues[o]||t.formattingValues[i]}else{var l=t.defaultWidth,c=s!=null&&s.width?String(s.width):t.defaultWidth;r=t.values[c]||t.values[l]}var u=t.argumentCallback?t.argumentCallback(e):e;return r[u]}}var uk={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dk={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hk={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fk={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pk={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gk=function(e,s){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xk={ordinalNumber:gk,era:Yr({values:uk,defaultWidth:"wide"}),quarter:Yr({values:dk,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Yr({values:hk,defaultWidth:"wide"}),day:Yr({values:fk,defaultWidth:"wide"}),dayPeriod:Yr({values:mk,defaultWidth:"wide",formattingValues:pk,defaultFormattingWidth:"wide"})};function Kr(t){return function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.width,r=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;var o=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?vk(l,function(h){return h.test(o)}):yk(l,function(h){return h.test(o)}),u;u=t.valueCallback?t.valueCallback(c):c,u=s.valueCallback?s.valueCallback(u):u;var d=e.slice(o.length);return{value:u,rest:d}}}function yk(t,e){for(var s in t)if(t.hasOwnProperty(s)&&e(t[s]))return s}function vk(t,e){for(var s=0;s<t.length;s++)if(e(t[s]))return s}function wk(t){return function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(t.matchPattern);if(!n)return null;var r=n[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;var l=e.slice(r.length);return{value:o,rest:l}}}var bk=/^(\d+)(th|st|nd|rd)?/i,_k=/\d+/i,jk={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nk={any:[/^b/i,/^(a|c)/i]},kk={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sk={any:[/1/i,/2/i,/3/i,/4/i]},Ck={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pk={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ek={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tk={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mk={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ok={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ak={ordinalNumber:wk({matchPattern:bk,parsePattern:_k,valueCallback:function(e){return parseInt(e,10)}}),era:Kr({matchPatterns:jk,defaultMatchWidth:"wide",parsePatterns:Nk,defaultParseWidth:"any"}),quarter:Kr({matchPatterns:kk,defaultMatchWidth:"wide",parsePatterns:Sk,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Kr({matchPatterns:Ck,defaultMatchWidth:"wide",parsePatterns:Pk,defaultParseWidth:"any"}),day:Kr({matchPatterns:Ek,defaultMatchWidth:"wide",parsePatterns:Tk,defaultParseWidth:"any"}),dayPeriod:Kr({matchPatterns:Mk,defaultMatchWidth:"any",parsePatterns:Ok,defaultParseWidth:"any"})},T0={code:"en-US",formatDistance:nk,formatLong:ok,formatRelative:ck,localize:xk,match:Ak,options:{weekStartsOn:0,firstWeekContainsDate:1}},Dk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ik=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rk=/^'([^]*?)'?$/,Lk=/''/g,Fk=/[a-zA-Z]/;function cs(t,e,s){var n,r,i,o,l,c,u,d,h,f,m,g,x,b;Ie(2,arguments);var p=String(e),y=fa(),v=(n=(r=void 0)!==null&&r!==void 0?r:y.locale)!==null&&n!==void 0?n:T0,_=On((i=(o=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:y.firstWeekContainsDate)!==null&&o!==void 0?o:(u=y.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=On((h=(f=(m=(g=void 0)!==null&&g!==void 0?g:void 0)!==null&&m!==void 0?m:y.weekStartsOn)!==null&&f!==void 0?f:(x=y.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&h!==void 0?h:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!v.localize)throw new RangeError("locale must contain localize property");if(!v.formatLong)throw new RangeError("locale must contain formatLong property");var N=He(t);if(!$N(N))throw new RangeError("Invalid time value");var S=zu(N),C=UN(N,S),k={firstWeekContainsDate:_,weekStartsOn:j,locale:v,_originalDate:N},M=p.match(Ik).map(function(T){var A=T[0];if(A==="p"||A==="P"){var F=QN[A];return F(T,v.formatLong)}return T}).join("").match(Dk).map(function(T){if(T==="''")return"'";var A=T[0];if(A==="'")return $k(T);var F=GN[A];if(F)return tk(T)&&am(T,e,String(t)),ek(T)&&am(T,e,String(t)),F(C,T,v.localize,k);if(A.match(Fk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return T}).join("");return M}function $k(t){var e=t.match(Rk);return e?e[1].replace(Lk,"'"):t}function M0(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}function Uk(t){return M0({},t)}var om=1e3*60,Yo=60*24,lm=Yo*30,cm=Yo*365;function zk(t,e,s){var n,r,i;Ie(2,arguments);var o=fa(),l=(n=(r=s==null?void 0:s.locale)!==null&&r!==void 0?r:o.locale)!==null&&n!==void 0?n:T0;if(!l.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var c=LN(t,e);if(isNaN(c))throw new RangeError("Invalid time value");var u=M0(Uk(s),{addSuffix:!!(s!=null&&s.addSuffix),comparison:c}),d,h;c>0?(d=He(e),h=He(t)):(d=He(t),h=He(e));var f=String((i=s==null?void 0:s.roundingMethod)!==null&&i!==void 0?i:"round"),m;if(f==="floor")m=Math.floor;else if(f==="ceil")m=Math.ceil;else if(f==="round")m=Math.round;else throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var g=h.getTime()-d.getTime(),x=g/om,b=zu(h)-zu(d),p=(g-b)/om,y=s==null?void 0:s.unit,v;if(y?v=String(y):x<1?v="second":x<60?v="minute":x<Yo?v="hour":p<lm?v="day":p<cm?v="month":v="year",v==="second"){var _=m(g/1e3);return l.formatDistance("xSeconds",_,u)}else if(v==="minute"){var j=m(x);return l.formatDistance("xMinutes",j,u)}else if(v==="hour"){var N=m(x/60);return l.formatDistance("xHours",N,u)}else if(v==="day"){var S=m(p/Yo);return l.formatDistance("xDays",S,u)}else if(v==="month"){var C=m(p/lm);return C===12&&y!=="month"?l.formatDistance("xYears",1,u):l.formatDistance("xMonths",C,u)}else if(v==="year"){var k=m(p/cm);return l.formatDistance("xYears",k,u)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function Bk(t,e){return Ie(1,arguments),zk(t,Date.now(),e)}const qk=t=>{if(!t)return"";try{return Bk(new Date(t),{addSuffix:!0})}catch{return t}},Hk=t=>t<=999?t.toString():t<1e6?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K":(t/1e6).toFixed(1).replace(/\.0$/,"")+"M",Wk=({count:t})=>t===0?null:a.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full","aria-label":`${t} unread notifications`,children:Hk(t)}),um={success:{color:"text-green-700",bg:"bg-green-100",icon:ie},error:{color:"text-red-700",bg:"bg-red-100",icon:Al},warning:{color:"text-yellow-700",bg:"bg-yellow-100",icon:El},info:{color:"text-primary-700",bg:"bg-primary-100",icon:jN},system:{color:"text-gray-700",bg:"bg-gray-100",icon:wN}},Vk=({notification:t,onMarkRead:e})=>{const s=!t.is_read,n=um[t.type]||um.info,r=n.icon,i=()=>{s&&e(t.id)};return a.jsx("li",{className:`p-4 border-b last:border-b-0 cursor-pointer transition-all hover:bg-gray-100 ${s?"font-semibold "+n.bg:"text-gray-600"}`,onClick:i,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:`p-2 rounded-full ${n.bg} mr-3`,children:a.jsx(r,{className:`h-5 w-5 ${n.color}`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:`text-sm ${s?"text-gray-900":"text-gray-700"}`,children:t.title}),a.jsx("span",{className:"text-xs text-gray-400",children:qk(t.created_at)})]}),a.jsx("p",{className:"mt-1 text-sm",children:t.message}),s&&a.jsx("button",{onClick:o=>{o.stopPropagation(),e(t.id)},className:"mt-2 text-xs text-primary-500 hover:text-primary-700",children:"Mark as Read"})]})]})})},eh=()=>{const{user:t}=oe(),[e,s]=w.useState([]),[n,r]=w.useState(!0),i=t==null?void 0:t.id,o=w.useCallback(async g=>{r(!0);const{data:x,error:b}=await I.from("notifications").select("*").eq("recipient_id",g).order("created_at",{ascending:!1}).limit(50);return r(!1),b?(console.error("Error fetching initial notifications:",b),[]):(s(x||[]),x||[])},[]),l=w.useCallback(()=>{i&&o(i)},[i,o]),c=w.useCallback(g=>{const x=g.new;s(b=>[x,...b])},[]),u=w.useCallback(g=>{const x=g.new;s(b=>b.map(p=>p.id===x.id?x:p))},[]),d=async g=>{const{error:x}=await I.from("notifications").update({is_read:!0}).eq("id",g).eq("recipient_id",i).select().single();x?console.error("Error marking one as read:",x):l()},h=async()=>{s(x=>x.map(b=>({...b,is_read:!0})));const{error:g}=await I.rpc("mark_all_notifications_read");g&&console.error("Error marking all as read via RPC:",g)};w.useEffect(()=>{if(!i){s([]);return}o(i);const g=I.channel(`notifications_for_${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${i}`},c).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`recipient_id=eq.${i}`},u).subscribe();return()=>{I.removeChannel(g)}},[i,o,c,u]);const f=w.useMemo(()=>{const g={households:0,collections:0,requests:0,mosqueregistrations:0};return e.forEach(x=>{x.is_read||(x.source_table==="households"&&x.type==="info"?g.households+=1:x.source_table==="profile_change_requests"&&x.type==="warning"?(g.households+=1,g.requests+=1):x.source_table==="payments"&&x.type==="info"?g.collections+=1:x.source_table==="mosques"&&x.type==="info"?g.mosqueregistrations+=1:x.source_table==="admin_profiles"&&x.type==="info"&&(g.requests+=1))}),g},[e]),m=e.filter(g=>!g.is_read).length;return{notifications:e,unreadCount:m,pendingCounts:f,isLoading:n,markOneAsRead:d,markAllAsRead:h,fetchInitialNotifications:o}},dm=()=>{const{notifications:t,unreadCount:e,isLoading:s,markOneAsRead:n,markAllAsRead:r}=eh(),[i,o]=w.useState(!1),[l,c]=w.useState("Unread"),u=t.filter(d=>l==="Unread"?!d.is_read:!0);return a.jsxs("div",{className:"relative inline-block text-left",children:[a.jsxs("button",{onClick:()=>o(!i),className:"p-2 text-gray-400 rounded-full hover:text-gray-600 hover:bg-gray-100 relative","aria-expanded":i,children:[a.jsx(xN,{className:"w-6 h-6","aria-hidden":"true"}),a.jsx(Wk,{count:e})]}),i&&a.jsxs("div",{className:"absolute right-0 z-50 w-80 md:w-96 mt-2 origin-top-right bg-white border border-gray-200 rounded-md shadow-lg focus:outline-none",role:"menu",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 border-b border-gray-100",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Alerts (",e,")"]}),e>0&&a.jsx("button",{onClick:r,className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"Mark all as read"})]}),a.jsx("div",{className:"flex justify-around p-2 bg-gray-50 border-b border-gray-100",children:["Unread","All"].map(d=>a.jsx("button",{onClick:()=>c(d),className:`px-3 py-1 text-xs font-medium rounded-full transition ${l===d?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-200"}`,children:d},d))}),a.jsxs("ul",{className:"max-h-96 overflow-y-auto divide-y divide-gray-200",children:[s&&a.jsx("li",{className:"p-4 text-center text-gray-500",children:"Loading alerts..."}),!s&&u.length===0&&a.jsx("li",{className:"p-4 text-center text-gray-500",children:l==="All"?"No notifications yet.":`No ${l.toLowerCase()} alerts.`}),!s&&u.map(d=>a.jsx(Vk,{notification:d,onMarkRead:n},d.id))]})]})]})},Yk=()=>{const{user:t}=oe(),e=sn(),{fetchInitialNotifications:s}=eh(),n=w.useCallback(async r=>{if(!t)return;console.log(`Clearing notifications for source: ${r}`);const{error:i}=await I.rpc("mark_notifications_read_by_source",{source_table_name:r});i?console.error(`Error clearing badge for ${r}:`,i):s(t.id)},[t,s]);w.useEffect(()=>{if(!t||!t.role)return;let r=null;if(t.role==="mosque_admin")if(e.pathname.startsWith("/admin/households")){n("households"),n("profile_change_requests");return}else e.pathname.startsWith("/admin/collections")&&(r="payments");else t.role==="city_admin"?e.pathname.startsWith("/city/mosques")&&(r="mosques"):t.role==="super_admin"&&(e.pathname.startsWith("/super/mosques")?r="mosques":(e.pathname.startsWith("/super/admins")||e.pathname.startsWith("/super/requests"))&&(r="profile_change_requests"));r&&n(r)},[e.pathname,t,n])},V=()=>{const{user:t,signOut:e}=oe(),{pendingCounts:s}=eh(),n=ve(),r=sn();Yk();const i=async()=>{try{await e(),n("/login")}catch(c){console.error("Failed to sign out:",c),n("/login")}},l=(t==null?void 0:t.role)==="household"?[{icon:ls,label:"Dashboard",path:"/household/dashboard"},{icon:Ki,label:"Payment",path:"/household/payment"},{icon:Uu,label:"History",path:"/household/history"},{icon:at,label:"Profile",path:"/household/profile"}]:(t==null?void 0:t.role)==="mosque_admin"?[{icon:ls,label:"Dashboard",path:"/admin/dashboard"},{icon:Se,label:"Households",path:"/admin/households",badgeCount:s.households+s.requests},{icon:Ki,label:"Collections",path:"/admin/collections",badgeCount:s.collections},{icon:at,label:"Profile",path:"/admin/profile"}]:(t==null?void 0:t.role)==="city_admin"?[{icon:ls,label:"Dashboard",path:"/city/dashboard"},{icon:De,label:"mosques",path:"/city/mosques",badgeCount:s.mosqueregistrations},{icon:Se,label:"Admins",path:"/city/admins"},{icon:at,label:"Profile",path:"/city/profile"}]:(t==null?void 0:t.role)==="super_admin"?[{icon:ls,label:"Dashboard",path:"/super/dashboard"},{icon:De,label:"mosques",path:"/super/mosques",badgeCount:s.mosqueregistrations},{icon:Se,label:"Admins",path:"/super/admins",badgeCount:s.requests},{icon:at,label:"Profile",path:"/super/profile"}]:[];return a.jsxs(a.Fragment,{children:[a.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(pt,{to:"/dashboard",className:"flex-shrink-0 flex items-center",children:a.jsx("img",{src:S0,alt:"Mpay Logo",className:"h-12"})})}),a.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[a.jsx("div",{className:"flex items-baseline space-x-4",children:l.map(c=>{const u=c.icon,d=r.pathname.startsWith(c.path),h=c.badgeCount||0;return a.jsxs("button",{onClick:()=>n(c.path),className:`relative flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${d?"bg-primary-100 text-primary-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[a.jsx(u,{className:"h-4 w-4 mr-2"}),c.label,h>0&&a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full",children:h})]},c.path)})}),a.jsxs("div",{className:"flex items-center ml-6 space-x-4",children:[a.jsx(dm,{}),a.jsxs("button",{onClick:i,className:"flex items-center px-3 py-2 rounded-md text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Ol,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]})})}),a.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50 ",children:a.jsxs("div",{className:"flex justify-around items-center h-16",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center w-1/5 h-full text-xs font-medium text-gray-500",children:[a.jsx(dm,{}),a.jsx("span",{className:"mt-1 text-xs",children:"Alerts"})]}),l.map(c=>{const u=c.icon,d=r.pathname.startsWith(c.path),h=c.badgeCount||0;return a.jsxs("button",{onClick:()=>n(c.path),className:`relative flex flex-col items-center justify-center w-full h-full text-xs font-medium transition-colors duration-200 ${d?"text-primary-600":"text-gray-500 hover:text-primary-600"}`,children:[a.jsx(u,{className:"h-6 w-6 mb-1"}),a.jsx("span",{children:c.label}),h>0&&a.jsx("span",{className:"absolute top-1 right-2 inline-flex items-center justify-center px-2 py-0.5 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full transform translate-x-1/2 -translate-y-1/2",children:h})]},c.path)})]})})]})},Kk=()=>{var $;const{user:t}=oe(),[e,s]=w.useState(null),[n,r]=w.useState([]),[i,o]=w.useState(!0),[l,c]=w.useState(new Date().getFullYear()),[u,d]=w.useState("all"),[h,f]=w.useState(1),[m,g]=w.useState(12),[x,b]=w.useState(!1),p=["January","February","March","April","May","June","July","August","September","October","November","December"],y=[new Date().getFullYear(),new Date().getFullYear()-1,new Date().getFullYear()-2,new Date().getFullYear()-3],v=w.useCallback(async()=>{if(t)try{const{data:L,error:z}=await I.from("households").select("*, mosques (name)").eq("user_id",t.id).single();if(z)throw z;s(L)}catch(L){console.error("Error fetching household data:",L),E.error("Error loading household data")}},[t]),_=w.useCallback(async()=>{if(e)try{const{data:L,error:z}=await I.from("payments").select("*").eq("household_id",e.id).eq("year",l);if(z)throw z;r(L||[])}catch(L){console.error("Error fetching payments:",L),E.error("Error loading payment data")}finally{o(!1)}},[e,l]);w.useEffect(()=>{o(!0),v()},[v]),w.useEffect(()=>{e?_():o(!1)},[e,_]);const j=L=>n.find(z=>z.month===L)||null,N=()=>{const L=[];for(let z=h;z<=m;z++)L.push(z);return L.filter(z=>{const P=j(z),D=(P==null?void 0:P.status)||"unpaid";return u==="all"?!0:D===u})},S=()=>{c(new Date().getFullYear()),d("all"),f(1),g(12)},C=e!=null&&e.annual_amount?e.annual_amount/12:0,k=n.filter(L=>L.status==="paid"),M=n.filter(L=>L.status==="pending"),T=k.reduce((L,z)=>L+z.amount,0),A=M.reduce((L,z)=>L+z.amount,0),F=((e==null?void 0:e.annual_amount)||0)-T,U=N();return i?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-10",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Assalam wailaikum, ",(e==null?void 0:e.head_of_house)||(t==null?void 0:t.email)]})]}),e?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-8",children:[a.jsxs("div",{className:"card",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(ls,{className:"h-5 w-5 mr-2 text-primary-600"}),"Household Information"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Gr,{label:"Jamat Number",value:e.house_number}),a.jsx(Gr,{label:"Head of House",value:e.head_of_house}),a.jsx(Gr,{label:"Masjid",value:(($=e.mosques)==null?void 0:$.name)||"N/A"}),a.jsx(Gr,{label:"Contact",value:e.contact_number}),a.jsx(Gr,{label:"Members",value:`${e.members_count} (${e.male_count}M, ${e.female_count}F)`})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(pN,{className:"h-5 w-5 mr-2 text-primary-600"}),"Summary for ",l]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Jr,{label:"Paid Months",value:`${k.length} / 12`,color:"green"}),a.jsx(Jr,{label:"Total Payments",value:`${T.toLocaleString()}`,color:"green"}),a.jsx(Jr,{label:"Pending Approval",value:`${A.toLocaleString()}`,color:"yellow"}),a.jsx(Jr,{label:"Remaining Due",value:`${F.toLocaleString()}`,color:"orange"}),a.jsx(Jr,{label:"Monthly Amount",value:`${C.toLocaleString()}`,color:"gray"})]})]})]}),a.jsxs("div",{className:"lg:col-span-2 card",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-6 gap-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(Xd,{className:"h-6 w-6 mr-2 text-primary-600"}),"Payment Status"]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>b(!x),className:"btn-primary flex items-center text-sm",children:[a.jsx(w0,{className:"h-4 w-4 mr-2"}),"Filters"]}),a.jsxs("button",{onClick:S,className:"btn-primary flex items-center text-sm",children:[a.jsx(CN,{className:"h-4 w-4 mr-2"}),"Reset"]})]})]}),x&&a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),a.jsx("select",{value:l,onChange:L=>c(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:y.map(L=>a.jsx("option",{value:L,children:L},L))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),a.jsxs("select",{value:u,onChange:L=>d(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"unpaid",children:"Unpaid"}),a.jsx("option",{value:"pending_verification",children:"Pending"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Month"}),a.jsx("select",{value:h,onChange:L=>f(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:p.map((L,z)=>a.jsx("option",{value:z+1,children:L},z+1))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Month"}),a.jsx("select",{value:m,onChange:L=>g(parseInt(L.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:p.map((L,z)=>a.jsx("option",{value:z+1,children:L},z+1))})]})]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:U.map(L=>{const z=j(L),P=(z==null?void 0:z.status)||"unpaid";return a.jsx(Gk,{month:p[L-1],status:P,reason:z==null?void 0:z.rejection_reason},L)})}),U.length===0&&a.jsx("div",{className:"text-center py-12 text-gray-500",children:a.jsx("p",{className:"font-medium",children:"No months found for the selected filters."})}),a.jsxs("div",{className:"mt-8 pt-6 border-t flex flex-col sm:flex-row gap-4",children:[a.jsx(pt,{to:"/household/payment",className:"w-full sm:w-auto",children:a.jsxs("button",{className:"btn-primary flex items-center justify-center w-full",children:[a.jsx(Ki,{className:"h-4 w-4 mr-2"}),"Make a Payment"]})}),a.jsx(pt,{to:"/household/history",className:"w-full sm:w-auto",children:a.jsx("button",{className:"btn-primary flex items-center justify-center w-full",children:"View Payment History"})})]})]})]}):a.jsxs("div",{className:"card text-center py-16",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Registration Pending"}),a.jsx("p",{className:"text-gray-600 mt-2 max-w-md mx-auto",children:"Your household registration is currently awaiting approval."})]})]})]})},Gr=({label:t,value:e})=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-600",children:t}),a.jsx("span",{className:"font-semibold text-gray-900 text-right",children:e})]}),Jr=({label:t,value:e,color:s})=>{const n={green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",orange:"bg-orange-100 text-orange-800",gray:"bg-gray-100 text-gray-800",yellow:"bg-yellow-100 text-yellow-800"};return a.jsxs("div",{className:`flex justify-between items-center p-3 rounded-lg ${n[s]}`,children:[a.jsx("span",{className:"font-medium text-sm",children:t}),a.jsx("span",{className:"font-bold text-sm",children:e})]})},Gk=({month:t,status:e,reason:s})=>{const n={paid:{icon:a.jsx(ie,{className:"h-5 w-5 text-green-600"}),style:"border-green-200 bg-green-100",text:"Paid",textColor:"text-green-700"},pending:{icon:a.jsx(El,{className:"h-5 w-5 text-yellow-600"}),style:"border-yellow-300 bg-yellow-100",text:"Pending",textColor:"text-yellow-700"},rejected:{icon:a.jsx(Al,{className:"h-5 w-5 text-red-600"}),style:"border-red-300 bg-red-100",text:"Rejected",textColor:"text-red-700"},unpaid:{icon:a.jsx(tm,{className:"h-5 w-5 text-red-600"}),style:"border-red-300 bg-grey-100",text:"Unpaid",textColor:"text-red-700"}},r=n[e]||n.unpaid;return a.jsxs("div",{className:`p-4 rounded-lg border-2 relative ${r.style}`,children:[e==="rejected"&&s&&a.jsxs("div",{className:"group absolute top-0 right-0 p-1",children:[a.jsx(tm,{className:"h-5 w-5 text-red-600 cursor-pointer"}),a.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-48 p-2 text-xs text-white bg-gray-800 rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10",children:[a.jsx("span",{className:"font-bold",children:"Reason:"})," ",s]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:t}),r.icon]}),a.jsx("p",{className:`text-sm font-medium ${r.textColor}`,children:r.text})]})},Jk=()=>{const{user:t}=oe(),[e,s]=w.useState([]),[n,r]=w.useState(null),[i,o]=w.useState(!0),[l,c]=w.useState(""),[u,d]=w.useState(1),[h,f]=w.useState(new Date().getFullYear()),[m,g]=w.useState(new Date().getMonth()+1),[x,b]=w.useState(new Date().getFullYear()),[p,y]=w.useState("all"),v=["January","February","March","April","May","June","July","August","September","October","November","December"],_=[new Date().getFullYear()-1,new Date().getFullYear(),new Date().getFullYear()+1],j=(k,M)=>{const T=Intl.NumberFormat(M?"en-IN":"en-US",{notation:"compact",maximumFractionDigits:1}).format(k);return M?`${T}`:T},N=(k,M)=>{const T=k.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0});return M?`${T}`:T},S=w.useCallback(async()=>{if(t){o(!0);try{const[k,M]=await Promise.all([I.rpc("get_mosque_reporting_data",{admin_user_id:t.id,start_year:h,start_month:u,end_year:x,end_month:m}),I.rpc("get_mosque_summary_stats",{admin_user_id:t.id,start_year:h,start_month:u,end_year:x,end_month:m})]);if(k.error)throw k.error;if(M.error)throw M.error;s(k.data.households||[]),r(M.data)}catch(k){E.error(k.message||"Error loading dashboard data")}finally{o(!1)}}},[t,u,h,m,x]);w.useEffect(()=>{(t==null?void 0:t.role)==="mosque_admin"&&S()},[t,S]);const C=e.filter(k=>p==="all"?!0:p==="fully_paid"?k.unpaid_months===0:p==="partially_unpaid"?k.unpaid_months>0:!0).filter(k=>k.head_of_house.toLowerCase().includes(l.toLowerCase())||k.contact_number&&k.contact_number.includes(l));return i?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Household Reporting"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"View payment summaries for a selected date range."})]}),n&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-8",children:[a.jsxs("div",{className:"card bg-white p-6 rounded-xl shadow-md flex flex-col justify-between overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:N(n.total_households,!1),children:[a.jsx(Se,{className:"h-8 w-8 text-green-600 mb-4"}),a.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Households"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 truncate",children:j(n.total_households,!1)})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-xl shadow-md flex flex-col justify-between overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:N(n.total_population,!1),children:[a.jsx(Se,{className:"h-8 w-8 text-indigo-600 mb-4"}),a.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Population"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 truncate",children:j(n.total_population,!1)})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-xl shadow-md flex flex-col justify-between overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:N(n.expected_collection,!0),children:[a.jsx(Kt,{className:"h-8 w-8 text-blue-600 mb-4"}),a.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Expected Collection"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 truncate",children:j(n.expected_collection,!0)})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-xl shadow-md flex flex-col justify-between overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:N(n.total_collected,!0),children:[a.jsx(ie,{className:"h-8 w-8 text-green-600 mb-4"}),a.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Collected"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 truncate",children:j(n.total_collected,!0)})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-xl shadow-md flex flex-col justify-between overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:N(n.total_pending,!0),children:[a.jsx(N0,{className:"h-8 w-8 text-amber-600 mb-4"}),a.jsx("div",{className:"text-gray-500 text-sm font-medium mb-1",children:"Total Pending"}),a.jsx("p",{className:"text-xl font-bold text-gray-900 truncate",children:j(n.total_pending,!0)})]})]}),a.jsx("div",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Date Range"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"From"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:u,onChange:k=>d(Number(k.target.value)),className:"input-field w-full",children:v.map((k,M)=>a.jsx("option",{value:M+1,children:k},M))}),a.jsx("select",{value:h,onChange:k=>f(Number(k.target.value)),className:"input-field w-full",children:_.map(k=>a.jsx("option",{value:k,children:k},k))})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"To"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:m,onChange:k=>g(Number(k.target.value)),className:"input-field w-full",children:v.map((k,M)=>a.jsx("option",{value:M+1,children:k},M))}),a.jsx("select",{value:x,onChange:k=>b(Number(k.target.value)),className:"input-field w-full",children:_.map(k=>a.jsx("option",{value:k,children:k},k))})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),a.jsxs("select",{value:p,onChange:k=>y(k.target.value),className:"input-field w-full",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"fully_paid",children:"Fully Paid"}),a.jsx("option",{value:"partially_unpaid",children:"Partially/Unpaid"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by Name or Contact"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ha,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:k=>c(k.target.value),className:"input-field pl-10"})]})]})]})}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Household Payment Summary"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"th",children:"Head of House"}),a.jsx("th",{className:"th",children:"Contact Number"}),a.jsx("th",{className:"th",children:"Paid Months"}),a.jsx("th",{className:"th",children:"Unpaid Months"}),a.jsx("th",{className:"th",children:"Total Due"}),a.jsx("th",{className:"th",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(k=>{const M=k.annual_amount/12,T=k.unpaid_months*M,A=`/mosque/household/${k.id}?startMonth=${u}&startYear=${h}&endMonth=${m}&endYear=${x}`;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"td text-center font-medium text-gray-900",children:k.head_of_house}),a.jsx("td",{className:"td text-center font-mono",children:k.contact_number}),a.jsx("td",{className:"td text-center text-green-600 font-semibold",children:k.paid_months}),a.jsx("td",{className:"td text-center text-red-600 font-semibold",children:k.unpaid_months}),a.jsxs("td",{className:"td text-center font-bold",children:["",T.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]}),a.jsx("td",{className:"td text-center",children:a.jsx(pt,{to:A,className:"font-medium text-primary-600 hover:text-primary-800",children:"View Details"})})]},k.id)})})]})}),C.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Households Found"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"No active households match your search criteria for the selected date range."})]})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ma(t){return t+.5|0}const Os=(t,e,s)=>Math.max(Math.min(t,s),e);function oi(t){return Os(ma(t*2.55),0,255)}function qs(t){return Os(ma(t*255),0,255)}function is(t){return Os(ma(t/2.55)/100,0,1)}function hm(t){return Os(ma(t*100),0,100)}const yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bu=[..."0123456789ABCDEF"],Qk=t=>Bu[t&15],Xk=t=>Bu[(t&240)>>4]+Bu[t&15],$a=t=>(t&240)>>4===(t&15),Zk=t=>$a(t.r)&&$a(t.g)&&$a(t.b)&&$a(t.a);function eS(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&yt[t[1]]*17,g:255&yt[t[2]]*17,b:255&yt[t[3]]*17,a:e===5?yt[t[4]]*17:255}:(e===7||e===9)&&(s={r:yt[t[1]]<<4|yt[t[2]],g:yt[t[3]]<<4|yt[t[4]],b:yt[t[5]]<<4|yt[t[6]],a:e===9?yt[t[7]]<<4|yt[t[8]]:255})),s}const tS=(t,e)=>t<255?e(t):"";function sS(t){var e=Zk(t)?Qk:Xk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+tS(t.a,e):void 0}const nS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function O0(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function rS(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function iS(t,e,s){const n=O0(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function aS(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function th(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=aS(s,n,r,d,i),c=c*60+.5),[c|0,u||0,l]}function sh(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(qs)}function nh(t,e,s){return sh(O0,t,e,s)}function oS(t,e,s){return sh(iS,t,e,s)}function lS(t,e,s){return sh(rS,t,e,s)}function A0(t){return(t%360+360)%360}function cS(t){const e=nS.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?oi(+e[5]):qs(+e[5]));const r=A0(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=oS(r,i,o):e[1]==="hsv"?n=lS(r,i,o):n=nh(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function uS(t,e){var s=th(t);s[0]=A0(s[0]+e),s=nh(s),t.r=s[0],t.g=s[1],t.b=s[2]}function dS(t){if(!t)return;const e=th(t),s=e[0],n=hm(e[1]),r=hm(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${is(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const fm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hS(){const t={},e=Object.keys(mm),s=Object.keys(fm);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,fm[i]);i=parseInt(mm[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Ua;function fS(t){Ua||(Ua=hS(),Ua.transparent=[0,0,0,0]);const e=Ua[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const mS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function pS(t){const e=mS.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?oi(o):Os(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?oi(n):Os(n,0,255)),r=255&(e[4]?oi(r):Os(r,0,255)),i=255&(e[6]?oi(i):Os(i,0,255)),{r:n,g:r,b:i,a:s}}}function gS(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${is(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yc=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Vn=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function xS(t,e,s){const n=Vn(is(t.r)),r=Vn(is(t.g)),i=Vn(is(t.b));return{r:qs(yc(n+s*(Vn(is(e.r))-n))),g:qs(yc(r+s*(Vn(is(e.g))-r))),b:qs(yc(i+s*(Vn(is(e.b))-i))),a:t.a+s*(e.a-t.a)}}function za(t,e,s){if(t){let n=th(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=nh(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function D0(t,e){return t&&Object.assign(e||{},t)}function pm(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=qs(t[3]))):(e=D0(t,{r:0,g:0,b:0,a:1}),e.a=qs(e.a)),e}function yS(t){return t.charAt(0)==="r"?pS(t):cS(t)}class Gi{constructor(e){if(e instanceof Gi)return e;const s=typeof e;let n;s==="object"?n=pm(e):s==="string"&&(n=eS(e)||fS(e)||yS(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=D0(this._rgb);return e&&(e.a=is(e.a)),e}set rgb(e){this._rgb=pm(e)}rgbString(){return this._valid?gS(this._rgb):void 0}hexString(){return this._valid?sS(this._rgb):void 0}hslString(){return this._valid?dS(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,n.r=255&u*n.r+i*r.r+.5,n.g=255&u*n.g+i*r.g+.5,n.b=255&u*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=xS(this._rgb,e._rgb,s)),this}clone(){return new Gi(this.rgb)}alpha(e){return this._rgb.a=qs(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ma(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return za(this._rgb,2,e),this}darken(e){return za(this._rgb,2,-e),this}saturate(e){return za(this._rgb,1,e),this}desaturate(e){return za(this._rgb,1,-e),this}rotate(e){return uS(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Qt(){}const vS=(()=>{let t=0;return()=>t++})();function ae(t){return t==null}function Ee(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function X(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ct(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zt(t,e){return Ct(t)?t:e}function ee(t,e){return typeof t>"u"?e:t}const wS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function de(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function se(t,e,s,n){let r,i,o;if(Ee(t))for(i=t.length,r=0;r<i;r++)e.call(s,t[r],r);else if(X(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Ko(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Go(t){if(Ee(t))return t.map(Go);if(X(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Go(t[s[r]]);return e}return t}function I0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function bS(t,e,s,n){if(!I0(t))return;const r=e[t],i=s[t];X(r)&&X(i)?Ji(r,i,n):e[t]=Go(i)}function Ji(t,e,s){const n=Ee(e)?e:[e],r=n.length;if(!X(t))return t;s=s||{};const i=s.merger||bS;let o;for(let l=0;l<r;++l){if(o=n[l],!X(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,s)}return t}function ji(t,e){return Ji(t,e,{merger:_S})}function _S(t,e,s){if(!I0(t))return;const n=e[t],r=s[t];X(n)&&X(r)?ji(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Go(r))}const gm={"":t=>t,x:t=>t.x,y:t=>t.y};function jS(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function NS(t){const e=jS(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Nr(t,e){return(gm[e]||(gm[e]=NS(e)))(t)}function rh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qi=t=>typeof t<"u",Js=t=>typeof t=="function",xm=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function kS(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ve=Math.PI,Hs=2*Ve,Jo=Number.POSITIVE_INFINITY,SS=Ve/180,It=Ve/2,cn=Ve/4,ym=Ve*2/3,R0=Math.log10,Ws=Math.sign;function ho(t,e,s){return Math.abs(t-e)<s}function vm(t){const e=Math.round(t);t=ho(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(R0(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function CS(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function PS(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Qo(t){return!PS(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ES(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function TS(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function jn(t){return t*(Ve/180)}function MS(t){return t*(180/Ve)}function wm(t){if(!Ct(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function OS(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Ve&&(i+=Hs),{angle:i,distance:r}}function AS(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function un(t){return(t%Hs+Hs)%Hs}function DS(t,e,s,n){const r=un(t),i=un(e),o=un(s),l=un(i-r),c=un(o-r),u=un(r-i),d=un(r-o);return r===i||r===o||n||l>c&&u<d}function Rt(t,e,s){return Math.max(e,Math.min(s,t))}function IS(t){return Rt(t,-32768,32767)}function or(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function ih(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const qu=(t,e,s,n)=>ih(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),RS=(t,e,s)=>ih(t,s,n=>t[n][e]>=s);function LS(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const L0=["push","pop","shift","splice","unshift"];function FS(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),L0.forEach(s=>{const n="_onData"+rh(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function bm(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(L0.forEach(i=>{delete t[i]}),delete t._chartjs)}function F0(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const $0=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function U0(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,$0.call(window,()=>{n=!1,t.apply(e,s)}))}}function $S(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const ah=t=>t==="start"?"left":t==="end"?"right":"center",Be=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,US=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e,Ba=t=>t===0||t===1,_m=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Hs/s)),jm=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Hs/s)+1,Ni={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*It)+1,easeOutSine:t=>Math.sin(t*It),easeInOutSine:t=>-.5*(Math.cos(Ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ba(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ba(t)?t:_m(t,.075,.3),easeOutElastic:t=>Ba(t)?t:jm(t,.075,.3),easeInOutElastic(t){return Ba(t)?t:t<.5?.5*_m(t*2,.1125,.45):.5+.5*jm(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Ni.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Ni.easeInBounce(t*2)*.5:Ni.easeOutBounce(t*2-1)*.5+.5};function z0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Nm(t){return z0(t)?t:new Gi(t)}function vc(t){return z0(t)?t:new Gi(t).saturate(.5).darken(.1).hexString()}const zS=["x","y","borderWidth","radius","tension"],BS=["color","borderColor","backgroundColor"];function qS(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:BS},numbers:{type:"number",properties:zS}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function HS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const km=new Map;function WS(t,e){e=e||{};const s=t+JSON.stringify(e);let n=km.get(s);return n||(n=new Intl.NumberFormat(t,e),km.set(s,n)),n}function B0(t,e,s){return WS(e,s).format(t)}const VS={values(t){return Ee(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const u=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=YS(t,s)}const o=R0(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),B0(t,n,c)}};function YS(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var q0={formatters:VS};function KS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:q0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const An=Object.create(null),Hu=Object.create(null);function ki(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function wc(t,e,s){return typeof e=="string"?Ji(ki(t,e),s):Ji(ki(t,""),e)}class GS{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>vc(r.backgroundColor),this.hoverBorderColor=(n,r)=>vc(r.borderColor),this.hoverColor=(n,r)=>vc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return wc(this,e,s)}get(e){return ki(this,e)}describe(e,s){return wc(Hu,e,s)}override(e,s){return wc(An,e,s)}route(e,s,n,r){const i=ki(this,e),o=ki(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],u=o[r];return X(c)?Object.assign({},u,c):ee(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var je=new GS({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qS,HS,KS]);function JS(t){return!t||ae(t.size)||ae(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Sm(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function dn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function Cm(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Pm(t,e,s,n){H0(t,e,s,n,null)}function H0(t,e,s,n,r){let i,o,l,c,u,d,h,f;const m=e.pointStyle,g=e.rotation,x=e.radius;let b=(g||0)*SS;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(b),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,x,0,0,Hs):t.arc(s,n,x,0,Hs),t.closePath();break;case"triangle":d=r?r/2:x,t.moveTo(s+Math.sin(b)*d,n-Math.cos(b)*x),b+=ym,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*x),b+=ym,t.lineTo(s+Math.sin(b)*d,n-Math.cos(b)*x),t.closePath();break;case"rectRounded":u=x*.516,c=x-u,o=Math.cos(b+cn)*c,h=Math.cos(b+cn)*(r?r/2-u:c),l=Math.sin(b+cn)*c,f=Math.sin(b+cn)*(r?r/2-u:c),t.arc(s-h,n-l,u,b-Ve,b-It),t.arc(s+f,n-o,u,b-It,b),t.arc(s+h,n+l,u,b,b+It),t.arc(s-f,n+o,u,b+It,b+Ve),t.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*x,d=r?r/2:c,t.rect(s-d,n-c,2*d,2*c);break}b+=cn;case"rectRot":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":b+=cn;case"cross":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),b+=cn,h=Math.cos(b)*(r?r/2:x),o=Math.cos(b)*x,l=Math.sin(b)*x,f=Math.sin(b)*(r?r/2:x),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(b)*x,l=Math.sin(b)*x,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(b)*(r?r/2:x),n+Math.sin(b)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function W0(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function oh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function lh(t){t.restore()}function QS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ae(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function XS(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,u=s+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function ZS(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function Xi(t,e,s,n,r,i={}){const o=Ee(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=r.string,QS(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&ZS(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ae(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,s,n,i.maxWidth)),t.fillText(u,s,n,i.maxWidth),XS(t,s,n,u,i),n+=Number(r.lineHeight);t.restore()}function Xo(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Ve,It,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,It,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-It,!0),t.lineTo(s+o.topLeft,n)}const e2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,t2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function s2(t,e){const s=(""+t).match(e2);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const n2=t=>+t||0;function V0(t,e){const s={},n=X(e),r=n?Object.keys(e):e,i=X(t)?n?o=>ee(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=n2(i(o));return s}function Y0(t){return V0(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mr(t){return V0(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Pt(t){const e=Y0(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function We(t,e){t=t||{},e=e||je.font;let s=ee(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ee(t.style,e.style);n&&!(""+n).match(t2)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ee(t.family,e.family),lineHeight:s2(ee(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ee(t.weight,e.weight),string:""};return r.string=JS(r),r}function qa(t,e,s,n){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function r2(t,e,s){const{min:n,max:r}=t,i=wS(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function Rr(t,e){return Object.assign(Object.create(t),e)}function ch(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=Q0("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>ch([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return G0(l,c,()=>h2(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Tm(l).includes(c)},ownKeys(l){return Tm(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function kr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:K0(t,n),setContext:i=>kr(t,i,s,n),override:i=>kr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return G0(i,o,()=>a2(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function K0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:Js(s)?s:()=>s,isIndexable:Js(n)?n:()=>n}}const i2=(t,e)=>t?t+rh(e):e,uh=(t,e)=>X(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function G0(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function a2(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return Js(l)&&o.isScriptable(e)&&(l=o2(e,l,t,s)),Ee(l)&&l.length&&(l=l2(e,l,t,o.isIndexable)),uh(e,l)&&(l=kr(l,r,i&&i[e],o)),l}function o2(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),uh(t,c)&&(c=dh(r._scopes,r,t,c)),c}function l2(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(X(e[0])){const c=e,u=r._scopes.filter(d=>d!==c);e=[];for(const d of c){const h=dh(u,r,t,d);e.push(kr(h,i,o&&o[t],l))}}return e}function J0(t,e,s){return Js(t)?t(e,s):t}const c2=(t,e)=>t===!0?e:typeof t=="string"?Nr(e,t):void 0;function u2(t,e,s,n,r){for(const i of e){const o=c2(s,i);if(o){t.add(o);const l=J0(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function dh(t,e,s,n){const r=e._rootScopes,i=J0(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Em(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=Em(l,o,i,c,n),c===null)?!1:ch(Array.from(l),[""],r,i,()=>d2(e,s,n))}function Em(t,e,s,n,r){for(;s;)s=u2(t,e,s,n,r);return s}function d2(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Ee(r)&&X(s)?s:r||{}}function h2(t,e,s,n){let r;for(const i of e)if(r=Q0(i2(i,t),s),typeof r<"u")return uh(t,r)?dh(s,n,t,r):r}function Q0(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function Tm(t){let e=t._keys;return e||(e=t._keys=f2(t._scopes)),e}function f2(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function hh(){return typeof window<"u"&&typeof document<"u"}function fh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Zo(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Dl=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function m2(t,e){return Dl(t).getPropertyValue(e)}const p2=["top","right","bottom","left"];function Sn(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=p2[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const g2=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function x2(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(g2(r,i,t.target))l=r,c=i;else{const u=e.getBoundingClientRect();l=n.clientX-u.left,c=n.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function xn(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=Dl(s),i=r.boxSizing==="border-box",o=Sn(r,"padding"),l=Sn(r,"border","width"),{x:c,y:u,box:d}=x2(t,s),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:m,height:g}=e;return i&&(m-=o.width+l.width,g-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((u-f)/g*s.height/n)}}function y2(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&fh(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=Dl(i),c=Sn(l,"border","width"),u=Sn(l,"padding");e=o.width-u.width-c.width,s=o.height-u.height-c.height,n=Zo(l.maxWidth,i,"clientWidth"),r=Zo(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Jo,maxHeight:r||Jo}}const Ha=t=>Math.round(t*10)/10;function v2(t,e,s,n){const r=Dl(t),i=Sn(r,"margin"),o=Zo(r.maxWidth,t,"clientWidth")||Jo,l=Zo(r.maxHeight,t,"clientHeight")||Jo,c=y2(t,e,s);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=Sn(r,"border","width"),m=Sn(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,n?u/n:d-i.height),u=Ha(Math.min(u,o,c.maxWidth)),d=Ha(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Ha(u/2)),(e!==void 0||s!==void 0)&&n&&c.height&&d>c.height&&(d=c.height,u=Ha(Math.floor(d*n))),{width:u,height:d}}function Mm(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const w2=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Om(t,e){const s=m2(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const b2=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},_2=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function pr(t,e,s){return t?b2(e,s):_2()}function X0(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Z0(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Wa(t,e,s){return t.options.clip?t[s]:e[s]}function j2(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Wa(s,e,"left"),right:Wa(s,e,"right"),top:Wa(n,e,"top"),bottom:Wa(n,e,"bottom")}:e}function N2(t,e){const s=e._clip;if(s.disabled)return!1;const n=j2(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class k2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=$0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zt=new k2;const Am="transparent",S2={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=Nm(t||Am),r=n.valid&&Nm(e||Am);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class C2{constructor(e,s,n,r){const i=s[n];r=qa([e.to,r,i,e.from]);const o=qa([e.from,i,r]);this._active=!0,this._fn=e.fn||S2[e.type||typeof o],this._easing=Ni[e.easing]||Ni.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=qa([e.to,s,r,e.from]),this._from=qa([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class ey{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!X(e))return;const s=Object.keys(je.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!X(i))return;const o={};for(const l of s)o[l]=i[l];(Ee(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=E2(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&P2(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,s));continue}const d=s[u];let h=i[u];const f=n.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){e[u]=d;continue}i[u]=h=new C2(f,e,u,d),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Zt.add(this._chart,n),!0}}function P2(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function E2(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function Dm(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function T2(t,e,s){if(s===!1)return!1;const n=Dm(t,s),r=Dm(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function M2(t){let e,s,n,r;return X(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function ty(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function Im(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(d=!0,n.all)continue;break}u=t.values[c],Ct(u)&&(i||e===0||Ws(e)===Ws(u))&&(e+=u)}return!d&&!n.all?0:e}function O2(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[r]:d,[i]:t[d]};return l}function bc(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function A2(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function D2(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function I2(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function Rm(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function Lm(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,u=o.axis,d=A2(i,o,n),h=e.length;let f;for(let m=0;m<h;++m){const g=e[m],{[c]:x,[u]:b}=g,p=g._stacks||(g._stacks={});f=p[u]=I2(r,d,x),f[l]=b,f._top=Rm(f,o,!0,n.type),f._bottom=Rm(f,o,!1,n.type);const y=f._visualValues||(f._visualValues={});y[l]=b}}function _c(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function R2(t,e){return Rr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function L2(t,e,s){return Rr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Qr(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const jc=t=>t==="reset"||t==="none",Fm=(t,e)=>e?t:Object.assign({},t),F2=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:ty(s,!0),values:null};class Si{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=bc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Qr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,g)=>h==="x"?f:h==="r"?g:m,i=s.xAxisID=ee(n.xAxisID,_c(e,"x")),o=s.yAxisID=ee(n.yAxisID,_c(e,"y")),l=s.rAxisID=ee(n.rAxisID,_c(e,"r")),c=s.indexAxis,u=s.iAxisID=r(c,i,o,l),d=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(u),s.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&bm(this._data,this),e._stacked&&Qr(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(X(s)){const r=this._cachedMeta;this._data=O2(s,r)}else if(n!==s){if(n){bm(n,this);const r=this._cachedMeta;Qr(r),r._parsed=[]}s&&Object.isExtensible(s)&&FS(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=bc(s.vScale,s),s.stack!==n.stack&&(r=!0,Qr(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(Lm(this,s._parsed),s._stacked=bc(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,u=e>0&&n._parsed[e-1],d,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Ee(r[e])?f=this.parseArrayData(n,r,e,s):X(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<s;++d)n._parsed[d+e]=h=f[d],c&&(m()&&(c=!1),u=h);n._sorted=c}o&&Lm(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let f,m,g;for(f=0,m=r;f<m;++f)g=f+n,h[f]={[l]:d||i.parse(u[g],g),[c]:o.parse(s[g],g)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=s[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+n,m=s[f],u[d]={x:i.parse(Nr(m,l),f),y:o.parse(Nr(m,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:ty(r,!0),values:s._stacks[e.axis]._visualValues};return Im(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=Im(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=F2(s,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=D2(l);let f,m;function g(){m=r[f];const x=m[l.axis];return!Ct(m[e.axis])||d>x||h<x}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(u,e,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,e,m,c);break}}return u}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],Ct(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=M2(ee(this.options.clip,T2(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(n.dataset&&n.dataset.draw(e,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=L2(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=R2(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Qi(n);if(l)return Fm(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(je.elements[e]),g=()=>this.getContext(n,r,s),x=u.resolveNamedOptions(f,m,g,h);return x.$shared&&(x.$shared=c,i[o]=Object.freeze(Fm(x,c))),x}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,s),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(e,n,s))}const u=new ey(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||jc(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){jc(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!jc(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=u=>{for(u.length+=s,l=u.length-1;l>=o;l--)u[l]=u[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Qr(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}J(Si,"defaults",{}),J(Si,"datasetElementType",null),J(Si,"dataElementType",null);function $2(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,i=s.length;r<i;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=F0(n.sort((r,i)=>r-i))}return t._cache.$bar}function U2(t){const e=t.iScale,s=$2(e,t.type);let n=e._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Qi(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,i=s.length;r<i;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),c();return n}function z2(t,e,s,n){const r=s.barThickness;let i,o;return ae(r)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function B2(t,e,s,n){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:u}}function q2(t,e,s,n){const r=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(r,i),l=Math.max(r,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),e[s.axis]=u,e._custom={barStart:c,barEnd:u,start:r,end:i,min:o,max:l}}function sy(t,e,s,n){return Ee(t)?q2(t,e,s,n):e[s.axis]=s.parse(t,n),e}function $m(t,e,s,n){const r=t.iScale,i=t.vScale,o=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=s,d=s+n;u<d;++u)f=e[u],h={},h[r.axis]=l||r.parse(o[u],u),c.push(sy(f,h,i,u));return c}function Nc(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function H2(t,e,s){return t!==0?Ws(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function W2(t){let e,s,n,r,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",i="start"):(r="start",i="end"),{start:s,end:n,reverse:e,top:r,bottom:i}}function V2(t,e,s,n){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=W2(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=u:(s._bottom||0)===n?r=d:(i[Um(d,o,l,c)]=!0,r=u)),i[Um(r,o,l,c)]=!0,t.borderSkipped=i}function Um(t,e,s,n){return n?(t=Y2(t,e,s),t=zm(t,s,e)):t=zm(t,e,s),t}function Y2(t,e,s){return t===e?s:t===s?e:t}function zm(t,e,s){return t==="start"?e:t==="end"?s:t}function K2(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class fo extends Si{parsePrimitiveData(e,s,n,r){return $m(e,s,n,r)}parseArrayData(e,s,n,r){return $m(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,h=[];let f,m,g,x;for(f=n,m=n+r;f<m;++f)x=s[f],g={},g[i.axis]=i.parse(Nr(x,u),f),h.push(sy(Nr(x,d),g,o,f));return h}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,i=this.getParsed(e),o=i._custom,l=Nc(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,r);for(let m=s;m<s+n;m++){const g=this.getParsed(m),x=i||ae(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,d),p=(g._stacks||{})[l.axis],y={horizontal:u,base:x.base,enableBorderRadius:!p||Nc(g._custom)||o===p._top||o===p._bottom,x:u?x.head:b.center,y:u?b.center:x.head,height:u?b.size:Math.abs(x.size),width:u?Math.abs(x.size):b.size};f&&(y.options=h||this.resolveDataElementOptions(m,e[m].active?"active":r));const v=y.options||e[m].options;V2(y,v,p,o),K2(y,v,d.ratio),this.updateElement(e[m],m,y,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],u=d=>{const h=d._parsed.find(m=>m[n.axis]===c),f=h&&h[d.vScale.axis];if(ae(f)||isNaN(f))return!0};for(const d of r)if(!(s!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ee(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),i=s!==void 0?r.indexOf(s):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let i,o;for(i=0,o=s.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||U2(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),u=c._custom,d=Nc(u);let h=c[s.axis],f=0,m=n?this.applyStack(s,c,n):h,g,x;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&Ws(h)!==Ws(u.barEnd)&&(f=0),f+=h);const b=!ae(i)&&!d?i:f;let p=s.getPixelForValue(b);if(this.chart.getDataVisibility(e)?g=s.getPixelForValue(f+m):g=p,x=g-p,Math.abs(x)<o){x=H2(x,s,l)*o,h===l&&(p-=x/2);const y=s.getPixelForDecimal(0),v=s.getPixelForDecimal(1),_=Math.min(y,v),j=Math.max(y,v);p=Math.max(Math.min(p,j),_),g=p+x,n&&!d&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(g)-s.getValueForPixel(p))}if(p===s.getPixelForValue(l)){const y=Ws(x)*s.getLineWidthForValue(l)/2;p+=y,x-=y}return{size:x,base:p,head:g,center:g+x/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,i=r.skipNull,o=ee(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(s.grouped){const d=i?this._getStackCount(e):s.stackCount,h=r.barThickness==="flex"?B2(e,s,r,d*u):z2(e,s,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ee(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+m;l=h.start+h.chunk*g+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}J(fo,"id","bar"),J(fo,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J(fo,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function hn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mh{constructor(e){J(this,"options");this.options=e||{}}static override(e){Object.assign(mh.prototype,e)}init(){}formats(){return hn()}parse(){return hn()}format(){return hn()}add(){return hn()}diff(){return hn()}startOf(){return hn()}endOf(){return hn()}}var G2={_date:mh};function J2(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?RS:qu;if(n){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=u(i,e,s-h),m=u(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,d.lo+1).reverse().findIndex(x=>!ae(x[h.axis]));d.lo-=Math.max(0,m);const g=f.slice(d.hi).findIndex(x=>!ae(x[h.axis]));d.hi+=Math.max(0,g)}return d}}return{lo:0,hi:i.length-1}}function Il(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=J2(i[l],e,o,r);for(let m=h;m<=f;++m){const g=d[m];g.skip||n(g,u,m)}}}function Q2(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function kc(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||Il(t,s,e,function(l,c,u){!r&&!W0(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function X2(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:h}=OS(o,{x:e.x,y:e.y});DS(h,u,d)&&r.push({element:o,datasetIndex:l,index:c})}return Il(t,s,e,i),r}function Z2(t,e,s,n,r,i){let o=[];const l=Q2(s);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(e.x,e.y,r);if(n&&!m)return;const g=d.getCenterPoint(r);if(!(!!i||t.isPointInArea(g))&&!m)return;const b=l(e,g);b<c?(o=[{element:d,datasetIndex:h,index:f}],c=b):b===c&&o.push({element:d,datasetIndex:h,index:f})}return Il(t,s,e,u),o}function Sc(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?X2(t,e,s,r):Z2(t,e,s,n,r,i)}function Bm(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return Il(t,s,e,(c,u,d)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var eC={modes:{index(t,e,s,n){const r=xn(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?kc(t,r,i,n,o):Sc(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,s,n){const r=xn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?kc(t,r,i,n,o):Sc(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,u=t.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(t,e,s,n){const r=xn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return kc(t,r,i,n,o)},nearest(t,e,s,n){const r=xn(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Sc(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=xn(e,t);return Bm(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=xn(e,t);return Bm(t,r,"y",s.intersect,n)}}};const ny=["left","top","right","bottom"];function Xr(t,e){return t.filter(s=>s.pos===e)}function qm(t,e){return t.filter(s=>ny.indexOf(s.pos)===-1&&s.box.axis===e)}function Zr(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function tC(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function sC(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!ny.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function nC(t,e){const s=sC(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,u=s[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=d?d*r:c&&e.availableHeight)}return s}function rC(t){const e=tC(t),s=Zr(e.filter(u=>u.box.fullSize),!0),n=Zr(Xr(e,"left"),!0),r=Zr(Xr(e,"right")),i=Zr(Xr(e,"top"),!0),o=Zr(Xr(e,"bottom")),l=qm(e,"x"),c=qm(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Xr(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Hm(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function ry(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function iC(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!X(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&ry(o,i.getPadding());const l=Math.max(0,e.outerWidth-Hm(o,t,"left","right")),c=Math.max(0,e.outerHeight-Hm(o,t,"top","bottom")),u=l!==t.w,d=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:u,other:d}:{same:d,other:u}}function aC(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function oC(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function li(t,e,s,n){const r=[];let i,o,l,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,oC(l.horizontal,e));const{same:h,other:f}=iC(e,s,l,n);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&li(r,e,s,n)||d}function Va(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function Wm(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,u=n[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=e.w*d,f=u.size||c.height;Qi(u.start)&&(o=u.start),c.fullSize?Va(c,r.left,o,s.outerWidth-r.right-r.left,f):Va(c,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=e.h*d,f=u.size||c.width;Qi(u.start)&&(i=u.start),c.fullSize?Va(c,i,r.top,f,s.outerHeight-r.bottom-r.top):Va(c,i,e.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}e.x=i,e.y=o}var _t={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=Pt(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=rC(t.boxes),c=l.vertical,u=l.horizontal;se(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=c.reduce((x,b)=>b.box.options&&b.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},r);ry(f,Pt(n));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),g=nC(c.concat(u),h);li(l.fullSize,m,h,g),li(c,m,h,g),li(u,m,h,g)&&li(c,m,h,g),aC(m),Wm(l.leftAndTop,m,h,g),m.x+=m.w,m.y+=m.h,Wm(l.rightAndBottom,m,h,g),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},se(l.chartArea,x=>{const b=x.box;Object.assign(b,t.chartArea),b.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class iy{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class lC extends iy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const mo="$chartjs",cC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vm=t=>t===null||t==="";function uC(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[mo]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Vm(r)){const i=Om(t,"width");i!==void 0&&(t.width=i)}if(Vm(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Om(t,"height");i!==void 0&&(t.height=i)}return t}const ay=w2?{passive:!0}:!1;function dC(t,e,s){t&&t.addEventListener(e,s,ay)}function hC(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,ay)}function fC(t,e){const s=cC[t.type]||t.type,{x:n,y:r}=xn(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function el(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function mC(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||el(l.addedNodes,n),o=o&&!el(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function pC(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||el(l.removedNodes,n),o=o&&!el(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Zi=new Map;let Ym=0;function oy(){const t=window.devicePixelRatio;t!==Ym&&(Ym=t,Zi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function gC(t,e){Zi.size||window.addEventListener("resize",oy),Zi.set(t,e)}function xC(t){Zi.delete(t),Zi.size||window.removeEventListener("resize",oy)}function yC(t,e,s){const n=t.canvas,r=n&&fh(n);if(!r)return;const i=U0((l,c)=>{const u=r.clientWidth;s(l,c),u<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),gC(t,i),o}function Cc(t,e,s){s&&s.disconnect(),e==="resize"&&xC(t)}function vC(t,e,s){const n=t.canvas,r=U0(i=>{t.ctx!==null&&s(fC(i,t))},t);return dC(n,e,r),r}class wC extends iy{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(uC(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[mo])return!1;const n=s[mo].initial;["height","width"].forEach(i=>{const o=n[i];ae(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[mo],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:mC,detach:pC,resize:yC}[s]||vC;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:Cc,detach:Cc,resize:Cc}[s]||hC)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return v2(e,s,n,r)}isAttached(e){const s=e&&fh(e);return!!(s&&s.isConnected)}}function bC(t){return!hh()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?lC:wC}class Qs{constructor(){J(this,"x");J(this,"y");J(this,"active",!1);J(this,"options");J(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Qo(this.x)&&Qo(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}J(Qs,"defaults",{}),J(Qs,"defaultRoutes");function _C(t,e){const s=t.options.ticks,n=jC(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?kC(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>r)return SC(e,u,i,o/r),u;const d=NC(i,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Ya(e,u,d,ae(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Ya(e,u,d,i[h],i[h+1]);return Ya(e,u,d,c,ae(m)?e.length:c+m),u}return Ya(e,u,d),u}function jC(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function NC(t,e,s){const n=CC(t),r=e.length/s;if(!n)return Math.max(r,1);const i=CS(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function kC(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function SC(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function Ya(t,e,s,n,r){const i=ee(n,0),o=Math.min(ee(r,t.length),t.length);let l=0,c,u,d;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),d=i;d<0;)l++,d=Math.round(i+l*s);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),l++,d=Math.round(i+l*s))}function CC(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const PC=t=>t==="left"?"right":t==="right"?"left":t,Km=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Gm=(t,e)=>Math.min(e||t,t);function Jm(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function EC(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),u;if(!(s&&(n===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(r-1))/2,c+=r<e?u:-u,c<i-l||c>o+l)))return c}function TC(t,e){se(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function ei(t){return t.drawTicks?t.tickLength:0}function Qm(t,e){if(!t.display)return 0;const s=We(t.font,e),n=Pt(t.padding);return(Ee(t.text)?t.text.length:1)*s.lineHeight+n.height}function MC(t,e){return Rr(t,{scale:e,type:"scale"})}function OC(t,e,s){return Rr(t,{tick:s,index:e,type:"tick"})}function AC(t,e,s){let n=ah(t);return(s&&e!=="right"||!s&&e==="right")&&(n=PC(n)),n}function DC(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:u,scales:d}=c;let h=0,f,m,g;const x=o-r,b=l-i;if(t.isHorizontal()){if(m=Be(n,i,l),X(s)){const p=Object.keys(s)[0],y=s[p];g=d[p].getPixelForValue(y)+x-e}else s==="center"?g=(u.bottom+u.top)/2+x-e:g=Km(t,s,e);f=l-i}else{if(X(s)){const p=Object.keys(s)[0],y=s[p];m=d[p].getPixelForValue(y)-b+e}else s==="center"?m=(u.left+u.right)/2-b+e:m=Km(t,s,e);g=Be(n,o,r),h=s==="left"?-It:It}return{titleX:m,titleY:g,maxWidth:f,rotation:h}}class Lr extends Qs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=zt(e,Number.POSITIVE_INFINITY),s=zt(s,Number.NEGATIVE_INFINITY),n=zt(n,Number.POSITIVE_INFINITY),r=zt(r,Number.NEGATIVE_INFINITY),{min:zt(e,n),max:zt(s,r),minDefined:Ct(e),maxDefined:Ct(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:zt(s,zt(n,s)),max:zt(n,zt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){de(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r2(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Jm(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_C(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){de(this.options.afterUpdate,[this])}beforeSetDimensions(){de(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){de(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),de(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){de(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=de(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){de(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){de(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Gm(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,u;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=Rt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-ei(e.grid)-s.padding-Qm(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=MS(Math.min(Math.asin(Rt((d.highest.height+6)/l,-1,1)),Math.asin(Rt(c/u,-1,1))-Math.asin(Rt(f/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){de(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){de(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Qm(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=ei(i)+c):(e.height=this.maxHeight,e.width=ei(i)+c),n.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,g=jn(this.labelRotation),x=Math.cos(g),b=Math.sin(g);if(l){const p=n.mirror?0:b*h.width+x*f.height;e.height=Math.min(this.maxHeight,e.height+p+m)}else{const p=n.mirror?0:x*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+p+m)}this._calculatePadding(u,d,b,x)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let d=s.height/2,h=e.height/2;i==="start"?(d=0,h=e.height):i==="end"&&(d=s.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){de(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ae(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Jm(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/Gm(s,n));let u=0,d=0,h,f,m,g,x,b,p,y,v,_,j;for(h=0;h<s;h+=c){if(g=e[h].label,x=this._resolveTickFontOptions(h),r.font=b=x.string,p=i[b]=i[b]||{data:{},gc:[]},y=x.lineHeight,v=_=0,!ae(g)&&!Ee(g))v=Sm(r,p.data,p.gc,v,g),_=y;else if(Ee(g))for(f=0,m=g.length;f<m;++f)j=g[f],!ae(j)&&!Ee(j)&&(v=Sm(r,p.data,p.gc,v,j),_+=y);o.push(v),l.push(_),u=Math.max(v,u),d=Math.max(_,d)}TC(i,s);const N=o.indexOf(u),S=l.indexOf(d),C=k=>({width:o[k]||0,height:l[k]||0});return{first:C(0),last:C(s-1),widest:C(N),highest:C(S),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return IS(this._alignToPixels?dn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=OC(this.getContext(),e,n))}return this.$context||(this.$context=MC(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=jn(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ei(i),m=[],g=l.setContext(this.getContext()),x=g.display?g.width:0,b=x/2,p=function(L){return dn(n,L,x)};let y,v,_,j,N,S,C,k,M,T,A,F;if(o==="top")y=p(this.bottom),S=this.bottom-f,k=y-b,T=p(e.top)+b,F=e.bottom;else if(o==="bottom")y=p(this.top),T=e.top,F=p(e.bottom)-b,S=y+b,k=this.top+f;else if(o==="left")y=p(this.right),N=this.right-f,C=y-b,M=p(e.left)+b,A=e.right;else if(o==="right")y=p(this.left),M=e.left,A=p(e.right)-b,N=y+b,C=this.left+f;else if(s==="x"){if(o==="center")y=p((e.top+e.bottom)/2+.5);else if(X(o)){const L=Object.keys(o)[0],z=o[L];y=p(this.chart.scales[L].getPixelForValue(z))}T=e.top,F=e.bottom,S=y+b,k=S+f}else if(s==="y"){if(o==="center")y=p((e.left+e.right)/2);else if(X(o)){const L=Object.keys(o)[0],z=o[L];y=p(this.chart.scales[L].getPixelForValue(z))}N=y-b,C=N-f,M=e.left,A=e.right}const U=ee(r.ticks.maxTicksLimit,h),$=Math.max(1,Math.ceil(h/U));for(v=0;v<h;v+=$){const L=this.getContext(v),z=i.setContext(L),P=l.setContext(L),D=z.lineWidth,O=z.color,B=P.dash||[],W=P.dashOffset,re=z.tickWidth,fe=z.tickColor,$e=z.tickBorderDash||[],me=z.tickBorderDashOffset;_=EC(this,v,c),_!==void 0&&(j=dn(n,_,D),u?N=C=M=A=j:S=k=T=F=j,m.push({tx1:N,ty1:S,tx2:C,ty2:k,x1:M,y1:T,x2:A,y2:F,width:D,color:O,borderDash:B,borderDashOffset:W,tickWidth:re,tickColor:fe,tickBorderDash:$e,tickBorderDashOffset:me}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=ei(n.grid),m=f+d,g=h?-d:m,x=-jn(this.labelRotation),b=[];let p,y,v,_,j,N,S,C,k,M,T,A,F="middle";if(r==="top")N=this.bottom-g,S=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+g,S=this._getXAxisLabelAlignment();else if(r==="left"){const $=this._getYAxisLabelAlignment(f);S=$.textAlign,j=$.x}else if(r==="right"){const $=this._getYAxisLabelAlignment(f);S=$.textAlign,j=$.x}else if(s==="x"){if(r==="center")N=(e.top+e.bottom)/2+m;else if(X(r)){const $=Object.keys(r)[0],L=r[$];N=this.chart.scales[$].getPixelForValue(L)+m}S=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")j=(e.left+e.right)/2-m;else if(X(r)){const $=Object.keys(r)[0],L=r[$];j=this.chart.scales[$].getPixelForValue(L)}S=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const U=this._getLabelSizes();for(p=0,y=l.length;p<y;++p){v=l[p],_=v.label;const $=i.setContext(this.getContext(p));C=this.getPixelForTick(p)+i.labelOffset,k=this._resolveTickFontOptions(p),M=k.lineHeight,T=Ee(_)?_.length:1;const L=T/2,z=$.color,P=$.textStrokeColor,D=$.textStrokeWidth;let O=S;o?(j=C,S==="inner"&&(p===y-1?O=this.options.reverse?"left":"right":p===0?O=this.options.reverse?"right":"left":O="center"),r==="top"?u==="near"||x!==0?A=-T*M+M/2:u==="center"?A=-U.highest.height/2-L*M+M:A=-U.highest.height+M/2:u==="near"||x!==0?A=M/2:u==="center"?A=U.highest.height/2-L*M:A=U.highest.height-T*M,h&&(A*=-1),x!==0&&!$.showLabelBackdrop&&(j+=M/2*Math.sin(x))):(N=C,A=(1-T)*M/2);let B;if($.showLabelBackdrop){const W=Pt($.backdropPadding),re=U.heights[p],fe=U.widths[p];let $e=A-W.top,me=0-W.left;switch(F){case"middle":$e-=re/2;break;case"bottom":$e-=re;break}switch(S){case"center":me-=fe/2;break;case"right":me-=fe;break;case"inner":p===y-1?me-=fe:p>0&&(me-=fe/2);break}B={left:me,top:$e,width:fe+W.width,height:re+W.height,color:$.backdropColor}}b.push({label:_,font:k,textOffset:A,options:{rotation:x,color:z,strokeColor:P,strokeWidth:D,textAlign:O,textBaseline:F,translation:[j,N],backdrop:B}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-jn(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,d;return s==="left"?r?(d=this.right+i,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d=this.left)):s==="right"?r?(d=this.left+i,n==="near"?u="right":n==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,n==="near"?u="left":n==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=dn(e,this.left,o)-o/2,d=dn(e,this.right,l)+l/2,h=f=c):(h=dn(e,this.top,o)-o/2,f=dn(e,this.bottom,l)+l/2,u=d=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(u,h),s.lineTo(d,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&oh(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Xi(n,u,0,d,c,l)}r&&lh(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=We(n.font),o=Pt(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||X(s)?(c+=o.bottom,Ee(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=DC(this,c,s,l);Xi(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:AC(l,s,r),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ee(e.grid&&e.grid.z,-1),r=ee(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Lr.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return We(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ka{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;LC(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,IC(e,o,n),this.override&&je.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in je[r]&&(delete je[r][n],this.override&&delete An[n])}}function IC(t,e,s){const n=Ji(Object.create(null),[s?je.get(s):{},je.get(e),t.defaults]);je.set(e,n),t.defaultRoutes&&RC(e,t.defaultRoutes),t.descriptors&&je.describe(e,t.descriptors)}function RC(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");je.route(i,r,c,l)})}function LC(t){return"id"in t&&"defaults"in t}class FC{constructor(){this.controllers=new Ka(Si,"datasets",!0),this.elements=new Ka(Qs,"elements"),this.plugins=new Ka(Object,"plugins"),this.scales=new Ka(Lr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):se(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=rh(e);de(n["before"+r],[],n),s[e](n),de(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Ht=new FC;class $C{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(de(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=ee(n.options&&n.options.plugins,{}),i=UC(n);return r===!1&&!s?[]:BC(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function UC(t){const e={},s=[],n=Object.keys(Ht.plugins.items);for(let i=0;i<n.length;i++)s.push(Ht.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function zC(t,e){return!e&&t===!1?null:t===!0?{}:t}function BC(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,u=zC(n[c],r);u!==null&&i.push({plugin:l,options:qC(t.config,{plugin:l,local:s[c]},u,o)})}return i}function qC(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wu(t,e){const s=je.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function HC(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function WC(t,e){return t===e?"_index_":"_value_"}function Xm(t){if(t==="x"||t==="y"||t==="r")return t}function VC(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Vu(t,...e){if(Xm(t))return t;for(const s of e){const n=s.axis||VC(s.position)||t.length>1&&Xm(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Zm(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function YC(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return Zm(t,"x",s[0])||Zm(t,"y",s[0])}return{}}function KC(t,e){const s=An[t.type]||{scales:{}},n=e.scales||{},r=Wu(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!X(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Vu(o,l,YC(o,t),je.scales[l.type]),u=WC(c,r),d=s.scales||{};i[o]=ji(Object.create(null),[{axis:c},l,d[c],d[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Wu(l,e),d=(An[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=HC(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),ji(i[m],[{axis:f},n[m],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];ji(l,[je.scales[l.type],je.scale])}),i}function ly(t){const e=t.options||(t.options={});e.plugins=ee(e.plugins,{}),e.scales=KC(t,e)}function cy(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function GC(t){return t=t||{},t.data=cy(t.data),ly(t),t}const ep=new Map,uy=new Set;function Ga(t,e){let s=ep.get(t);return s||(s=e(),ep.set(t,s),uy.add(s)),s}const ti=(t,e,s)=>{const n=Nr(e,s);n!==void 0&&t.add(n)};class JC{constructor(e){this._config=GC(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cy(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),ly(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ga(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ga(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ga(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Ga(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(d=>{e&&(c.add(e),d.forEach(h=>ti(c,e,h))),d.forEach(h=>ti(c,r,h)),d.forEach(h=>ti(c,An[i]||{},h)),d.forEach(h=>ti(c,je,h)),d.forEach(h=>ti(c,Hu,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),uy.has(s)&&o.set(s,u),u}chartOptionScopes(){const{options:e,type:s}=this;return[e,An[s]||{},je.datasets[s]||{},{type:s},je,Hu]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=tp(this._resolverCache,e,r);let c=o;if(XC(o,s)){i.$shared=!1,n=Js(n)?n():n;const u=this.createResolver(e,n,l);c=kr(o,n,u)}for(const u of s)i[u]=c[u];return i}createResolver(e,s,n=[""],r){const{resolver:i}=tp(this._resolverCache,e,n);return X(s)?kr(i,s,void 0,r):i}}function tp(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:ch(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const QC=t=>X(t)&&Object.getOwnPropertyNames(t).some(e=>Js(t[e]));function XC(t,e){const{isScriptable:s,isIndexable:n}=K0(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(Js(l)||QC(l))||o&&Ee(l))return!0}return!1}var ZC="4.5.0";const eP=["top","bottom","left","right","chartArea"];function sp(t,e){return t==="top"||t==="bottom"||eP.indexOf(t)===-1&&e==="x"}function np(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function rp(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),de(s&&s.onComplete,[t],e)}function tP(t){const e=t.chart,s=e.options.animation;de(s&&s.onProgress,[t],e)}function dy(t){return hh()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const po={},ip=t=>{const e=dy(t);return Object.values(po).filter(s=>s.canvas===e).pop()};function sP(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function nP(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var bs;let pa=(bs=class{static register(...e){Ht.add(...e),ap()}static unregister(...e){Ht.remove(...e),ap()}constructor(e,s){const n=this.config=new JC(s),r=dy(e),i=ip(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||bC(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=vS(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $C,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$S(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],po[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Zt.listen(this,"complete",rp),Zt.listen(this,"progress",tP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return ae(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ht}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Cm(this.canvas,this.ctx),this}stop(){return Zt.stop(this),this}resize(e,s){Zt.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mm(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),de(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};se(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=Vu(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),se(i,o=>{const l=o.options,c=l.id,u=Vu(c,l),d=ee(l.type,o.dtype);(l.position===void 0||sp(l.position,u)!==sp(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===d)h=n[c];else{const f=Ht.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),se(r,(o,l)=>{o||delete n[l]}),se(n,o=>{_t.configure(this,o,o.options),_t.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(np("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||Wu(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Ht.getController(l),{datasetElementType:u,dataElementType:d}=je.datasets[l];Object.assign(c,{dataElementType:Ht.getElement(d),datasetElementType:u&&Ht.getElement(u)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){se(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||se(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(np("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){se(this.scales,e=>{_t.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!xm(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;sP(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!xm(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_t.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],se(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Js(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zt.has(this)?this.attached&&!Zt.running(this)&&Zt.start(this):(this.draw(),rp({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=N2(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&oh(s,r),e.controller.draw(),r&&lh(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return W0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=eC.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Rr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Qi(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Zt.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Cm(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete po[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};se(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,u)=>{s.addEventListener(this,c,u),e[c]=u},r=(c,u)=>{e[c]&&(s.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){se(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},se(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Ko(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=kS(e),u=nP(e,this._lastEvent,n,c);n&&(this._lastEvent=null,de(i.onHover,[e,l,this],this),c&&de(i.onClick,[e,l,this],this));const d=!Ko(l,r);return(d||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=u,d}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},J(bs,"defaults",je),J(bs,"instances",po),J(bs,"overrides",An),J(bs,"registry",Ht),J(bs,"version",ZC),J(bs,"getChart",ip),bs);function ap(){return se(pa.instances,t=>t._plugins.invalidate())}function hy(t,e){const{x:s,y:n,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,u,d,h;return t.horizontal?(h=o/2,l=Math.min(s,r),c=Math.max(s,r),u=n-h,d=n+h):(h=i/2,l=s-h,c=s+h,u=Math.min(n,r),d=Math.max(n,r)),{left:l,top:u,right:c,bottom:d}}function As(t,e,s,n){return t?0:Rt(e,s,n)}function rP(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,i=Y0(n);return{t:As(r.top,i.top,0,s),r:As(r.right,i.right,0,e),b:As(r.bottom,i.bottom,0,s),l:As(r.left,i.left,0,e)}}function iP(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=mr(r),o=Math.min(e,s),l=t.borderSkipped,c=n||X(r);return{topLeft:As(!c||l.top||l.left,i.topLeft,0,o),topRight:As(!c||l.top||l.right,i.topRight,0,o),bottomLeft:As(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:As(!c||l.bottom||l.right,i.bottomRight,0,o)}}function aP(t){const e=hy(t),s=e.right-e.left,n=e.bottom-e.top,r=rP(t,s/2,n/2),i=iP(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Pc(t,e,s,n){const r=e===null,i=s===null,l=t&&!(r&&i)&&hy(t,n);return l&&(r||or(e,l.left,l.right))&&(i||or(s,l.top,l.bottom))}function oP(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function lP(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ec(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class Ci extends Qs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=aP(this),l=oP(o.radius)?Xo:lP;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,Ec(o,s,i)),e.clip(),l(e,Ec(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,Ec(i,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return Pc(this,e,s,n)}inXRange(e,s){return Pc(this,e,null,s)}inYRange(e,s){return Pc(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+r)/2:s,y:i?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}J(Ci,"id","bar"),J(Ci,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J(Ci,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const op=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},cP=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class lp extends Qs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=de(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=We(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=op(n,i);let u,d;s.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,r,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((g,x)=>{const b=n+s/2+i.measureText(g.text).width;(x===0||u[u.length-1]+b+2*l>o)&&(h+=d,u[u.length-(x>0?0:1)]=0,m+=d,f++),c[x]={left:0,top:m,row:f,width:b,height:r},u[u.length-1]+=b+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let h=l,f=0,m=0,g=0,x=0;return this.legendItems.forEach((b,p)=>{const{itemWidth:y,itemHeight:v}=uP(n,s,i,b,r);p>0&&m+v+2*l>d&&(h+=f+l,u.push({width:f,height:m}),g+=f+l,x++,f=m=0),c[p]={left:g,top:m,col:x,width:y,height:v},f=Math.max(f,y),m+=v+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=pr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Be(n,this.left+r,this.right-this.lineWidths[l]);for(const u of s)l!==u.row&&(l=u.row,c=Be(n,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+r}else{let l=0,c=Be(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const u of s)u.col!==l&&(l=u.col,c=Be(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;oh(e,this),this._draw(),lh(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=je.color,c=pr(e.rtl,this.left,this.width),u=We(o.font),{padding:d}=o,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:g,boxHeight:x,itemHeight:b}=op(o,h),p=function(N,S,C){if(isNaN(g)||g<=0||isNaN(x)||x<0)return;r.save();const k=ee(C.lineWidth,1);if(r.fillStyle=ee(C.fillStyle,l),r.lineCap=ee(C.lineCap,"butt"),r.lineDashOffset=ee(C.lineDashOffset,0),r.lineJoin=ee(C.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=ee(C.strokeStyle,l),r.setLineDash(ee(C.lineDash,[])),o.usePointStyle){const M={radius:x*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:k},T=c.xPlus(N,g/2),A=S+f;H0(r,M,T,A,o.pointStyleWidth&&g)}else{const M=S+Math.max((h-x)/2,0),T=c.leftForLtr(N,g),A=mr(C.borderRadius);r.beginPath(),Object.values(A).some(F=>F!==0)?Xo(r,{x:T,y:M,w:g,h:x,radius:A}):r.rect(T,M,g,x),r.fill(),k!==0&&r.stroke()}r.restore()},y=function(N,S,C){Xi(r,C.text,N,S+b/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},v=this.isHorizontal(),_=this._computeTitleHeight();v?m={x:Be(i,this.left+d,this.right-n[0]),y:this.top+d+_,line:0}:m={x:this.left+d,y:Be(i,this.top+_+d,this.bottom-s[0].height),line:0},X0(this.ctx,e.textDirection);const j=b+d;this.legendItems.forEach((N,S)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const C=r.measureText(N.text).width,k=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),M=g+f+C;let T=m.x,A=m.y;c.setWidth(this.width),v?S>0&&T+M+d>this.right&&(A=m.y+=j,m.line++,T=m.x=Be(i,this.left+d,this.right-n[m.line])):S>0&&A+j>this.bottom&&(T=m.x=T+s[m.line].width+d,m.line++,A=m.y=Be(i,this.top+_+d,this.bottom-s[m.line].height));const F=c.x(T);if(p(F,A,N),T=US(k,T+g+f,v?T+M:this.right,e.rtl),y(c.x(T),A,N),v)m.x+=M+d;else if(typeof N.text!="string"){const U=u.lineHeight;m.y+=fy(N,U)+d}else m.y+=j}),Z0(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=We(s.font),r=Pt(s.padding);if(!s.display)return;const i=pr(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=Be(e.align,h,this.right-f);else{const g=this.columnSizes.reduce((x,b)=>Math.max(x,b.height),0);d=u+Be(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const m=Be(l,h,h+f);o.textAlign=i.textAlign(ah(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,Xi(o,s.text,m,d,n)}_computeTitleHeight(){const e=this.options.title,s=We(e.font),n=Pt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(or(e,this.left,this.right)&&or(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],or(e,r.left,r.left+r.width)&&or(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!fP(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=cP(r,n);r&&!i&&de(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&de(s.onHover,[e,n,this],this)}else n&&de(s.onClick,[e,n,this],this)}}function uP(t,e,s,n,r){const i=dP(n,t,e,s),o=hP(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function dP(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function hP(t,e,s){let n=t;return typeof e.text!="string"&&(n=fy(e,s)),n}function fy(t,e){const s=t.text?t.text.length:0;return e*s}function fP(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var my={id:"legend",_element:lp,start(t,e,s){const n=t.legend=new lp({ctx:t.ctx,options:s,chart:t});_t.configure(t,n,s),_t.addBox(t,n)},stop(t){_t.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;_t.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(s?0:void 0),d=Pt(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class py extends Qs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=Ee(n.text)?n.text.length:1;this._padding=Pt(n.padding);const i=r*We(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:i,options:o}=this,l=o.align;let c=0,u,d,h;return this.isHorizontal()?(d=Be(l,n,i),h=s+e,u=i-n):(o.position==="left"?(d=n+e,h=Be(l,r,s),c=Ve*-.5):(d=i-e,h=Be(l,s,r),c=Ve*.5),u=r-s),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=We(s.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Xi(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:u,textAlign:ah(s.align),textBaseline:"middle",translation:[o,l]})}}function mP(t,e){const s=new py({ctx:t.ctx,options:e,chart:t});_t.configure(t,s,e),_t.addBox(t,s),t.titleBlock=s}var gy={id:"title",_element:py,start(t,e,s){mP(t,s)},stop(t){const e=t.titleBlock;_t.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;_t.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ci={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=AS(e,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function Bt(t,e){return e&&(Ee(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function es(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pP(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function cp(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=We(e.bodyFont),u=We(e.titleFont),d=We(e.footerFont),h=i.length,f=r.length,m=n.length,g=Pt(e.padding);let x=g.height,b=0,p=n.reduce((_,j)=>_+j.before.length+j.lines.length+j.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),p){const _=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=m*_+(p-m)*c.lineHeight+(p-1)*e.bodySpacing}f&&(x+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let y=0;const v=function(_){b=Math.max(b,s.measureText(_).width+y)};return s.save(),s.font=u.string,se(t.title,v),s.font=c.string,se(t.beforeBody.concat(t.afterBody),v),y=e.displayColors?o+2+e.boxPadding:0,se(n,_=>{se(_.before,v),se(_.lines,v),se(_.after,v)}),y=0,s.font=d.string,se(t.footer,v),s.restore(),b+=g.width,{width:b,height:x}}function gP(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function xP(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function yP(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let u="center";return n==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),xP(u,t,e,s)&&(u="center"),u}function up(t,e,s){const n=s.yAlign||e.yAlign||gP(t,s);return{xAlign:s.xAlign||e.xAlign||yP(t,e,s,n),yAlign:n}}function vP(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function wP(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function dp(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=mr(o);let g=vP(e,l);const x=wP(e,c,u);return c==="center"?l==="left"?g+=u:l==="right"&&(g-=u):l==="left"?g-=Math.max(d,f)+r:l==="right"&&(g+=Math.max(h,m)+r),{x:Rt(g,0,n.width-e.width),y:Rt(x,0,n.height-e.height)}}function Ja(t,e,s){const n=Pt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function hp(t){return Bt([],es(t))}function bP(t,e,s){return Rr(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function fp(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const xy={beforeTitle:Qt,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Qt,beforeBody:Qt,beforeLabel:Qt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ae(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Qt,afterBody:Qt,beforeFooter:Qt,footer:Qt,afterFooter:Qt};function tt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?xy[e].call(s,n):r}class Yu extends Qs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new ey(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=bP(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=tt(n,"beforeTitle",this,e),i=tt(n,"title",this,e),o=tt(n,"afterTitle",this,e);let l=[];return l=Bt(l,es(r)),l=Bt(l,es(i)),l=Bt(l,es(o)),l}getBeforeBody(e,s){return hp(tt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return se(e,i=>{const o={before:[],lines:[],after:[]},l=fp(n,i);Bt(o.before,es(tt(l,"beforeLabel",this,i))),Bt(o.lines,tt(l,"label",this,i)),Bt(o.after,es(tt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return hp(tt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=tt(n,"beforeFooter",this,e),i=tt(n,"footer",this,e),o=tt(n,"afterFooter",this,e);let l=[];return l=Bt(l,es(r)),l=Bt(l,es(i)),l=Bt(l,es(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,u;for(c=0,u=s.length;c<u;++c)l.push(pP(this.chart,s[c]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,n))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,n))),se(l,d=>{const h=fp(e.callbacks,d);r.push(tt(h,"labelColor",this,d)),i.push(tt(h,"labelPointStyle",this,d)),o.push(tt(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ci[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=cp(this,n),u=Object.assign({},l,c),d=up(this.chart,n,u),h=dp(n,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=mr(l),{x:f,y:m}=e,{width:g,height:x}=s;let b,p,y,v,_,j;return i==="center"?(_=m+x/2,r==="left"?(b=f,p=b-o,v=_+o,j=_-o):(b=f+g,p=b+o,v=_-o,j=_+o),y=b):(r==="left"?p=f+Math.max(c,d)+o:r==="right"?p=f+g-Math.max(u,h)-o:p=this.caretX,i==="top"?(v=m,_=v-o,b=p-o,y=p+o):(v=m+x,_=v+o,b=p+o,y=p-o),j=v),{x1:b,x2:p,x3:y,y1:v,y2:_,y3:j}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const u=pr(n.rtl,this.x,this.width);for(e.x=Ja(this,n.titleAlign,n),s.textAlign=u.textAlign(n.titleAlign),s.textBaseline="middle",o=We(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:u}=i,d=We(i.bodyFont),h=Ja(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,g=s.y+m;if(i.usePointStyle){const x={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(f,u)+u/2,p=g+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Pm(e,x,b,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Pm(e,x,b,p)}else{e.lineWidth=X(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(f,u),b=r.leftForLtr(r.xPlus(f,1),u-2),p=mr(o.borderRadius);Object.values(p).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Xo(e,{x,y:g,w:u,h:c,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Xo(e,{x:b,y:g+1,w:u-2,h:c-2,radius:p}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(x,g,u,c),e.strokeRect(x,g,u,c),e.fillStyle=o.backgroundColor,e.fillRect(b,g+1,u-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=n,h=We(n.bodyFont);let f=h.lineHeight,m=0;const g=pr(n.rtl,this.x,this.width),x=function(C){s.fillText(C,g.x(e.x+m),e.y+f/2),e.y+=f+i},b=g.textAlign(o);let p,y,v,_,j,N,S;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Ja(this,b,n),s.fillStyle=n.bodyColor,se(this.beforeBody,x),m=l&&b!=="right"?o==="center"?u/2+d:u+2+d:0,_=0,N=r.length;_<N;++_){for(p=r[_],y=this.labelTextColors[_],s.fillStyle=y,se(p.before,x),v=p.lines,l&&v.length&&(this._drawColorBox(s,e,_,g,n),f=Math.max(h.lineHeight,c)),j=0,S=v.length;j<S;++j)x(v[j]),f=h.lineHeight;se(p.after,x)}m=0,f=h.lineHeight,se(this.afterBody,x),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=pr(n.rtl,this.x,this.width);for(e.x=Ja(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=We(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:g}=mr(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+u-f,c),s.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+u,c+d-g),s.quadraticCurveTo(l+u,c+d,l+u-g,c+d),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+d),s.quadraticCurveTo(l,c+d,l,c+d-m),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=ci[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=cp(this,e),c=Object.assign({},o,this._size),u=up(s,e,c),d=dp(e,c,u,s);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Pt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),X0(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),Z0(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Ko(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Ko(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=ci[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}J(Yu,"positioners",ci);var yy={id:"tooltip",_element:Yu,positioners:ci,afterInit(t,e,s){s&&(t.tooltip=new Yu({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const _P=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function jP(t,e,s,n){const r=t.indexOf(e);if(r===-1)return _P(t,e,s,n);const i=t.lastIndexOf(e);return r!==i?s:r}const NP=(t,e)=>t===null?null:Rt(Math.round(t),0,e);function mp(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class tl extends Lr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:i}of s)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ae(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:jP(n,e,ee(s,e),this._addedLabels),NP(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return mp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}J(tl,"id","category"),J(tl,"defaults",{ticks:{callback:mp}});function kP(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=t,m=i||1,g=d-1,{min:x,max:b}=e,p=!ae(o),y=!ae(l),v=!ae(u),_=(b-x)/(h+1);let j=vm((b-x)/g/m)*m,N,S,C,k;if(j<1e-14&&!p&&!y)return[{value:x},{value:b}];k=Math.ceil(b/j)-Math.floor(x/j),k>g&&(j=vm(k*j/g/m)*m),ae(c)||(N=Math.pow(10,c),j=Math.ceil(j*N)/N),r==="ticks"?(S=Math.floor(x/j)*j,C=Math.ceil(b/j)*j):(S=x,C=b),p&&y&&i&&ES((l-o)/i,j/1e3)?(k=Math.round(Math.min((l-o)/j,d)),j=(l-o)/k,S=o,C=l):v?(S=p?o:S,C=y?l:C,k=u-1,j=(C-S)/k):(k=(C-S)/j,ho(k,Math.round(k),j/1e3)?k=Math.round(k):k=Math.ceil(k));const M=Math.max(wm(j),wm(S));N=Math.pow(10,ae(c)?M:c),S=Math.round(S*N)/N,C=Math.round(C*N)/N;let T=0;for(p&&(f&&S!==o?(s.push({value:o}),S<o&&T++,ho(Math.round((S+T*j)*N)/N,o,pp(o,_,t))&&T++):S<o&&T++);T<k;++T){const A=Math.round((S+T*j)*N)/N;if(y&&A>l)break;s.push({value:A})}return y&&f&&C!==l?s.length&&ho(s[s.length-1].value,l,pp(l,_,t))?s[s.length-1].value=l:s.push({value:l}):(!y||C===l)&&s.push({value:C}),s}function pp(t,e,{horizontal:s,minRotation:n}){const r=jn(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class SP extends Lr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ae(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Ws(r),u=Ws(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=kP(r,i);return e.bounds==="ticks"&&TS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return B0(e,this.chart.options.locale,this.options.ticks.format)}}class sl extends SP{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ct(e)?e:0,this.max=Ct(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=jn(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}J(sl,"id","linear"),J(sl,"defaults",{ticks:{callback:q0.formatters.numeric}});const Rl={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rt=Object.keys(Rl);function gp(t,e){return t-e}function xp(t,e){if(ae(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Ct(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(Qo(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function yp(t,e,s,n){const r=rt.length;for(let i=rt.indexOf(t);i<r-1;++i){const o=Rl[rt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return rt[i]}return rt[r-1]}function CP(t,e,s,n,r){for(let i=rt.length-1;i>=rt.indexOf(s);i--){const o=rt[i];if(Rl[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return rt[s?rt.indexOf(s):0]}function PP(t){for(let e=rt.indexOf(t)+1,s=rt.length;e<s;++e)if(Rl[rt[e]].common)return rt[e]}function vp(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=ih(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function EP(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function wp(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:EP(t,n,r,s)}class nl extends Lr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new G2._date(e.adapters.date);r.init(s),ji(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:xp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ct(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=Ct(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=LS(r,i,o);return this._unit=s.unit||(n.autoSkip?yp(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):CP(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:PP(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),wp(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Rt(s,0,o),n=Rt(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||yp(i.minUnit,s,n,this._getLabelCapacity(s)),l=ee(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Qo(c)||c===!0,d={};let h=s,f,m;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)vp(d,f,g);return(f===n||r.bounds==="ticks"||m===1)&&vp(d,f,g),Object.keys(d).sort(gp).map(x=>+x)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return de(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=n[s],m=u&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:d))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=jn(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,wp(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(xp(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return F0(e.sort(gp))}}J(nl,"id","time"),J(nl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qa(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=qu(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=qu(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class bp extends nl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Qa(s,this.min),this._tableRange=Qa(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=s&&u<=n&&r.push(u);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],c=r[o-1],u=r[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Qa(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Qa(this._table,n*this._tableRange+this._minPos,!0)}}J(bp,"id","timeseries"),J(bp,"defaults",nl.defaults);const vy="label";function _p(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function TP(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function wy(t,e){t.labels=e}function by(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vy;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function MP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vy;const s={labels:[],datasets:[]};return wy(s,t.labels),by(s,t.datasets,e),s}function OP(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=t,m=w.useRef(null),g=w.useRef(null),x=()=>{m.current&&(g.current=new pa(m.current,{type:o,data:MP(l,i),options:c&&{...c},plugins:u}),_p(e,g.current))},b=()=>{_p(e,null),g.current&&(g.current.destroy(),g.current=null)};return w.useEffect(()=>{!r&&g.current&&c&&TP(g.current,c)},[r,c]),w.useEffect(()=>{!r&&g.current&&wy(g.current.config.data,l.labels)},[r,l.labels]),w.useEffect(()=>{!r&&g.current&&l.datasets&&by(g.current.config.data,l.datasets,i)},[r,l.datasets]),w.useEffect(()=>{g.current&&(r?(b(),setTimeout(x)):g.current.update(h))},[r,c,l.labels,l.datasets,h]),w.useEffect(()=>{g.current&&(b(),setTimeout(x))},[o]),w.useEffect(()=>(x(),()=>b()),[]),ta.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},d)}const AP=w.forwardRef(OP);function DP(t,e){return pa.register(e),w.forwardRef((s,n)=>ta.createElement(AP,{...s,ref:n,type:t}))}const _y=DP("bar",fo);pa.register(tl,sl,Ci,gy,yy,my);const IP=()=>{const{user:t}=oe(),[e,s]=w.useState(null),[n,r]=w.useState([]),[i,o]=w.useState(!0),l=ve(),c=(x,b)=>{const y=Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format(x);return b?`${y}`:y},u=(x,b)=>{const p=x.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0});return b?`${p}`:p},d=w.useCallback(async()=>{o(!0);try{const{data:x,error:b}=await I.rpc("get_super_admin_dashboard_data");if(b)throw b;x&&(s(x.totals),r(x.state_stats||[]))}catch(x){console.error("Error fetching dashboard stats:",x),E.error(x.message||"Failed to load dashboard data.")}finally{o(!1)}},[]);w.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&d()},[t,d]);const h=x=>{l(`/super/states/${encodeURIComponent(x)}`)},f=n.slice(0,10),m={labels:f.map(x=>x.state),datasets:[{label:"Number of mosques",data:f.map(x=>x.mosque_count),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},g={indexAxis:"y",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Top 10 States by mosque Count"}}};return i?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",(t==null?void 0:t.full_name)||"Admin"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Super Admin Dashboard | National Overview"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_mosques)||0,!1),children:[a.jsx(De,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_mosques)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total mosques"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_households)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_households)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Households"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_population)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-indigo-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_population)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Population"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_admins)||0,!1),children:[a.jsx(k0,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_admins)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total City Admins"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_collection)||0,!0),children:[a.jsx(Kt,{className:"h-8 w-8 mx-auto text-green-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_collection)||0,!0)}),a.jsx("p",{className:"text-gray-500",children:"Collection (This Year)"})]})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(sm,{className:"h-6 w-6 mr-3 text-primary-600"}),"Statistics by State"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosques"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Households"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City Admins"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"View"})})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(x=>a.jsxs("tr",{onClick:()=>h(x.state),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:x.state}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:x.mosque_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:x.household_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:x.city_admin_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx(Ar,{className:"h-5 w-5 text-gray-400"})})]},x.state))})]})}),n.length===0&&!i&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(sm,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No data found for any state."})]})]}),n.length>0&&a.jsx("div",{className:"card",children:a.jsx(_y,{options:g,data:m})})]})]})},RP=()=>{const{user:t,signOut:e}=oe(),s=ve(),[n,r]=w.useState(null),[i,o]=w.useState(!1),[l,c]=w.useState({full_name:"",head_of_house:"",members_count:0,male_count:0,female_count:0,contact_number:"",house_number:"",monthly_amount:0}),[u,d]=w.useState(!0),[h,f]=w.useState(!1),[m,g]=w.useState(!1),[x,b]=w.useState(""),[p,y]=w.useState(""),[v,_]=w.useState("");w.useEffect(()=>{t&&j()},[t]),w.useEffect(()=>{t&&n?(c({full_name:t.full_name||"",head_of_house:n.head_of_house,members_count:n.members_count,male_count:n.male_count,female_count:n.female_count,contact_number:n.contact_number,house_number:n.house_number,monthly_amount:n.annual_amount/12}),d(!1)):t&&!n&&d(!1)},[t,n]);const j=async()=>{if(t)try{const{data:A,error:F}=await I.from("households").select("*, mosque:mosques!inner(name, address)").eq("user_id",t.id).maybeSingle();if(F)throw F;r(A)}catch(A){console.error("Error fetching household profile:",A),E.error("Error loading profile information"),d(!1)}},N=async()=>{if(!n||!t){E.error("User or household data is missing.");return}if(l.male_count+l.female_count!==l.members_count){E.error("Total members count should equal male + female count");return}const A=l.monthly_amount*12;f(!0);try{const{error:F}=await I.from("households").update({head_of_house:l.head_of_house,members_count:l.members_count,male_count:l.male_count,female_count:l.female_count,contact_number:l.contact_number,house_number:l.house_number,annual_amount:A,updated_at:new Date().toISOString()}).eq("id",n.id);if(F)throw F;const{error:U}=await I.from("profiles").update({full_name:l.full_name,phone:l.contact_number,updated_at:new Date().toISOString()}).eq("id",t.id);if(U)throw U;E.success("Profile updated successfully"),o(!1),j()}catch(F){console.error("Error updating profile:",F),E.error("Error updating profile")}finally{f(!1)}},S=()=>{t&&n&&c({full_name:t.full_name||"",head_of_house:n.head_of_house,members_count:n.members_count,male_count:n.male_count,female_count:n.female_count,contact_number:n.contact_number,house_number:n.house_number,monthly_amount:n.annual_amount/12}),o(!1)},C=A=>{const F=A.target.value,U=F===""?0:parseInt(F)||0,$=l.female_count;c({...l,male_count:U,members_count:U+$})},k=A=>{const F=A.target.value,U=F===""?0:parseInt(F)||0,$=l.male_count;c({...l,female_count:U,members_count:$+U})},M=async()=>{const A=E.loading("Logging out..."),{error:F}=await I.auth.signOut();F?E.error(F.message,{id:A}):(E.success("Logged out successfully",{id:A}),s("/login"))},T=async A=>{if(A.preventDefault(),p!==v)return E.error("New passwords do not match.");if(p.length<6)return E.error("Password must be at least 6 characters.");f(!0);const F=E.loading("Changing password..."),{error:U}=await I.auth.updateUser({password:p});f(!1),U?E.error(U.message||"Failed to change password.",{id:F}):(E.success("Password changed successfully! Please log in again.",{id:F}),b(""),y(""),_(""),g(!1),await I.auth.signOut(),s("/login"))};return u?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):n?a.jsxs("div",{className:"bg-gray-50 min-h-screen pb-10",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-16",children:[a.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your information"})]}),i?a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:S,className:"btn-primary flex items-center",disabled:h,children:[a.jsx(Gt,{className:"h-4 w-4 mr-2"})," Cancel"]}),a.jsxs("button",{onClick:N,className:"btn-primary flex items-center",disabled:h,children:[h?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):a.jsxs("button",{onClick:()=>o(!0),className:"btn-primary flex items-center",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"})," Edit Profile"]})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(at,{className:"h-6 w-6 mr-2 text-primary-600"}),"Account Information"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Full Name"}),i?a.jsx("input",{type:"text",value:l.full_name,onChange:A=>c({...l,full_name:A.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.full_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Head of Household"}),i?a.jsx("input",{type:"text",value:l.head_of_house,onChange:A=>c({...l,head_of_house:A.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.head_of_house})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Total Members"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:l.members_count})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Male Count"}),i?a.jsx("input",{type:"number",value:l.male_count===0?"":l.male_count,onChange:C,className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.male_count})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Female Count"}),i?a.jsx("input",{type:"number",value:l.female_count===0?"":l.female_count,onChange:k,className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.female_count})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Monthly Payment Amount"}),i?a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500",children:""}),a.jsx("input",{type:"number",value:l.monthly_amount===0?"":l.monthly_amount,onChange:A=>c({...l,monthly_amount:parseInt(A.target.value)||0}),className:"input-field pl-7",step:"1",min:"0"})]}):a.jsxs("p",{className:"text-lg font-semibold text-primary-600 flex items-center",children:["",(n.annual_amount/12).toFixed(0)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Calculated Annual Amount"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-900 flex items-center",children:["",(l.monthly_amount*12).toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Contact Number"}),i?a.jsx("input",{type:"text",value:l.contact_number,onChange:A=>c({...l,contact_number:A.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.contact_number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Jamat Number"}),i?a.jsx("input",{type:"text",value:l.house_number,onChange:A=>c({...l,house_number:A.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.house_number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email Address"}),a.jsxs("p",{className:"text-gray-900 flex items-center",children:[a.jsx(da,{className:"h-4 w-4 mr-2 text-gray-400"}),t==null?void 0:t.email]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(ls,{className:"h-6 w-6 mr-2 text-primary-600"}),"Household Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mosque Name"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.mosque.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mosque Address"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.mosque.address})]})]})]}),a.jsxs("div",{className:"card mt-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(b0,{className:"h-6 w-6 mr-2 text-primary-600"})," Security & Actions"]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Password"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Change your password to keep your account secure."})]}),a.jsx("button",{onClick:()=>g(!0),className:"btn-primary",children:"Change"})]})})]}),a.jsx("div",{className:"mt-8 flex justify-end",children:a.jsxs("button",{onClick:M,className:"btn-Denger flex items-center",children:[a.jsx(Ol,{className:"h-4 w-4 mr-2"})," Log Out"]})})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password"}),a.jsx("input",{type:"password",value:x,onChange:A=>b(A.target.value),className:"input-field mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),a.jsx("input",{type:"password",value:p,onChange:A=>y(A.target.value),className:"input-field mt-1",placeholder:"At least 6 characters",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:v,onChange:A=>_(A.target.value),className:"input-field mt-1",required:!0})]}),a.jsx("div",{className:"pt-4 flex justify-end items-center",children:a.jsxs("div",{className:"space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:h,children:h?"Saving...":"Save"})]})})]})]})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Profile Not Found"}),a.jsx("p",{className:"text-gray-600",children:"No household profile found. Please contact your mosque administrator."})]})})]})},LP=()=>{var F;const{user:t}=oe(),e=ve(),[s,n]=w.useState(null),[r,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(!0),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[g,x]=w.useState(null),[b,p]=w.useState(1),y=new Date().getFullYear(),v=["January","February","March","April","May","June","July","August","September","October","November","December"],_=w.useCallback(async()=>{if(t){u(!0);try{const{data:U,error:$}=await I.from("households").select("*, mosques(name, upi_id)").eq("user_id",t.id).single();if($)throw $;if(!U){E.error("Could not find household details."),u(!1);return}n(U),console.log("Fetched household data:",U);const{data:L,error:z}=await I.from("payments").select("*").eq("household_id",U.id).eq("year",y);if(z)throw z;i(L||[])}catch(U){console.error("Error fetching data:",U),E.error("Error loading payment information.")}finally{u(!1)}}},[t,y]);w.useEffect(()=>{_()},[_]);const j=U=>r.find($=>$.month===U)||null,N=U=>{var L;const $=(L=j(U))==null?void 0:L.status;$==="paid"||$==="pending_verification"||l(z=>z.includes(U)?z.filter(P=>P!==U):[...z,U].sort((P,D)=>P-D))},S=()=>{if(!s)return 0;const U=s.annual_amount/12;return o.length*U},C=U=>{U.target.files&&U.target.files[0]&&x(U.target.files[0])},k=async()=>{if(console.log("--- RLS DEBUGGING ---"),console.log("Current User ID (auth.uid):",t==null?void 0:t.id),console.log("Household ID being paid for:",s==null?void 0:s.id),console.log("---------------------"),!s||o.length===0||!g){E.error("Please select at least one month and upload a screenshot.");return}h(!0);try{const{data:U,error:$}=await I.from("payments").select("id, month, status").eq("household_id",s.id).eq("year",y).in("month",o);if($)throw $;const L=s.annual_amount/12,z=o.length*L,P=`${t==null?void 0:t.id}/${Date.now()}_${g.name}`,{error:D}=await I.storage.from("payment_screenshot").upload(P,g);if(D)throw D;const{data:{publicUrl:O}}=I.storage.from("payment_screenshot").getPublicUrl(P),B=new Date().toISOString(),{data:W,error:re}=await I.from("payment_groups").insert({household_id:s.id,total_amount:z,screenshot_url:O,status:"pending",paid_at:B,created_by:t==null?void 0:t.id}).select().single();if(re)throw re;const fe=W.id,$e=o.map(Ze=>{const ga=U.find(Ny=>Ny.month===Ze);return ga&&ga.status==="rejected"?I.from("payments").update({status:"pending",receipt_url:O,payment_date:B,payment_group_id:fe,rejection_reason:null}).eq("id",ga.id):ga?Promise.resolve({error:null}):I.from("payments").insert({household_id:s.id,amount:L,payment_date:B,month:Ze,year:y,payment_method:"upi",status:"pending",receipt_url:O,payment_group_id:fe,created_by:t==null?void 0:t.id})}),me=await Promise.all($e);for(const Ze of me)if(Ze&&Ze.error)throw Ze.error;E.success("Payment submitted for verification!"),l([]),m(!1),x(null),p(1),_()}catch(U){console.error("Error submitting payment group:",U),E.error(U.message||"Submission failed. Please try again.")}finally{h(!1)}};if(c)return a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]});if(!s)return a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-20",children:a.jsxs("div",{className:"card text-center py-16",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Could Not Load Household Data"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Please contact your mosque admin."})]})})]});const M=S(),T=((F=s==null?void 0:s.mosques)==null?void 0:F.upi_id)||"your-mosque@upi",A=`upi://pay?pa=${T}&pn=mosque%20Collection&am=${M.toFixed(2)}&cu=INR`;return a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-20",children:[a.jsxs("div",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("button",{onClick:()=>e("/household/dashboard"),className:"hidden md:flex items-center text-primary-600 hover:text-primary-700 mb-4",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Make Payment"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Pay your monthly mosque collection via UPI and upload a receipt."})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Payment Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Jamat Number"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.house_number})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Head of House"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.head_of_house})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Amount"}),a.jsxs("p",{className:"text-lg font-semibold text-primary-600 flex items-center",children:["",(s.annual_amount/12).toFixed(0)]})]})]})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(Xd,{className:"h-6 w-6 mr-2 text-primary-600"}),"Select Months to Pay (",y,")"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6",children:v.map((U,$)=>{var W;const L=$+1,z=((W=j(L))==null?void 0:W.status)||"unpaid",P=o.includes(L),D=z==="paid",O=z==="pending",B=z==="rejected";return a.jsxs("button",{onClick:()=>N(L),disabled:D||O,className:`p-4 rounded-lg border-2 transition-all duration-200 text-left ${D?"border-green-200 bg-green-50 cursor-not-allowed":O?"border-yellow-300 bg-yellow-50 cursor-not-allowed":B?"border-red-300 bg-red-50 hover:bg-red-100":P?"border-primary-500 bg-primary-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:U}),D?a.jsx(ie,{className:"h-5 w-5 text-green-600"}):O?a.jsx(El,{className:"h-5 w-5 text-yellow-600"}):B?a.jsx(Al,{className:"h-5 w-5 text-red-600"}):P?a.jsx(ie,{className:"h-5 w-5 text-primary-600"}):a.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300"})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:["",(s.annual_amount/12).toFixed(0)]}),a.jsx("div",{className:`text-xs font-medium px-2 py-1 rounded-full inline-block ${D?"bg-green-100 text-green-800":O?"bg-yellow-100 text-yellow-800":B?"bg-red-100 text-red-800":P?"bg-primary-100 text-primary-800":"bg-gray-100 text-gray-800"}`,children:D?"Paid":O?"Pending":B?"Rejected":P?"Selected":"Unpaid"})]},U)})}),o.length>0&&a.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2",children:[a.jsxs("p",{className:"text-primary-700",children:[o.length," month(s) selected for a total of ",a.jsxs("span",{className:"font-bold",children:["",M.toLocaleString()]})]}),a.jsx("button",{onClick:()=>m(!0),className:"btn-primary flex-shrink-0",children:"Proceed to Pay"})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[b===1&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 1: Make UPI Payment"}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-10 text",children:[a.jsx("p",{className:"text-sm text-black-600",children:"1.Pay the total amount to the Masjid's UPI ID."}),a.jsx("p",{className:"text-sm text-black-600",children:"2.Take Screenshot after payment"}),a.jsx("p",{className:"text-sm text-black-600",children:"3.Comeback after payment to upload Screenshot"}),a.jsx("p",{className:"font-bold text-primary-600 text-lg my-2 text-center",children:T}),a.jsxs("p",{className:"font-bold text-2xl text-center",children:["",M.toLocaleString()]}),a.jsx("a",{href:A,className:"btn-primary w-full mt-4",target:"_blank",rel:"noopener noreferrer",children:"Pay using UPI App"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("button",{onClick:()=>{m(!1),p(1)},className:"btn-primary",children:"Cancel"}),a.jsx("button",{onClick:()=>p(2),className:"btn-primary",children:"I have paid, Next Step"})]})]}),b===2&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Step 2: Upload Screenshot"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload your payment confirmation screenshot for verification."}),a.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:a.jsxs("div",{className:"space-y-1 text-center",children:[a.jsx(EN,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"flex text-sm text-gray-600",children:[a.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500",children:[a.jsx("span",{children:"Upload a file"}),a.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:C,accept:"image/*"})]}),a.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),g&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:g.name})]})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("button",{onClick:()=>p(1),className:"btn-primary",children:"Back"}),a.jsx("button",{onClick:k,className:"btn-primary",disabled:!g||d,children:d?"Submitting...":"Submit for Verification"})]})]})]})})]})]})},FP=()=>{const{user:t}=oe(),e=ve(),[s,n]=w.useState([]),[r,i]=w.useState(null),[o,l]=w.useState(!0),[c,u]=w.useState(new Date().getFullYear()),[d,h]=w.useState("all"),[f,m]=w.useState("desc"),g=["January","February","March","April","May","June","July","August","September","October","November","December"];w.useEffect(()=>{t&&x()},[t,c]);const x=async()=>{if(t){l(!0);try{const{data:k,error:M}=await I.from("households").select("*, mosques(name)").eq("user_id",t.id).single();if(M)throw M;i(k);const{data:T,error:A}=await I.from("payments").select("*").eq("household_id",k.id).eq("year",c).eq("status","paid").order("payment_date",{ascending:!1});if(A)throw A;n(T||[])}catch(k){console.error("Error fetching data:",k),E.error("Error loading payment history")}finally{l(!1)}}},b=()=>{let k=s;return d!=="all"&&(k=k.filter(M=>M.payment_method===d)),k.sort((M,T)=>{const A=new Date(M.payment_date).getTime(),F=new Date(T.payment_date).getTime();return f==="desc"?F-A:A-F})},p=()=>{const k=b();if(k.length===0){E.error("No payments to export");return}const M=[["Date","Month","Year","Amount","Payment Method","Transaction ID","Status"],...k.map(U=>[cs(new Date(U.payment_date),"dd/MM/yyyy"),g[U.month-1],U.year.toString(),`${U.amount.toFixed(2)}`,U.payment_method.toUpperCase(),U.transaction_id||"N/A",U.status.toUpperCase()])].map(U=>U.join(",")).join(`
`),T=new Blob([M],{type:"text/csv"}),A=window.URL.createObjectURL(T),F=document.createElement("a");F.setAttribute("hidden",""),F.setAttribute("href",A),F.setAttribute("download",`payment-history-${c}.csv`),document.body.appendChild(F),F.click(),document.body.removeChild(F),E.success("Payment history exported successfully")},y=()=>b().reduce((k,M)=>k+M.amount,0),v=k=>{switch(k.toLowerCase()){case"upi":case"card":case"netbanking":return a.jsx(Ki,{className:"h-4 w-4"});case"cash":return a.jsx(Kt,{className:"h-4 w-4"});default:return a.jsx(Ki,{className:"h-4 w-4"})}},_=k=>{switch(k.toLowerCase()){case"upi":return"bg-blue-100 text-blue-800";case"card":return"bg-purple-100 text-purple-800";case"netbanking":return"bg-green-100 text-green-800";case"cash":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};if(o)return a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]});const j=b(),N=y(),S=[2024,2025,2026,2027,2028],C=["all","upi","card","netbanking","cash"];return a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-10 pt-4 pb-20",children:[a.jsxs("div",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("button",{onClick:()=>e("/household/dashboard"),className:"hidden md:flex items-center text-primary-600 hover:text-primary-700 mb-4",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),a.jsxs("div",{className:"flex justify-between items-center md:items-start flex-col md:flex-row",children:[a.jsxs("div",{className:"text-center md:text-left",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center justify-center md:justify-start",children:[a.jsx(Uu,{className:"h-8 w-8 mr-3 text-primary-600 hidden md:block"}),"Payment History"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Track all your payment transactions"})]}),j.length>0&&a.jsxs("button",{onClick:p,className:"btn-primary flex items-center mt-4 md:mt-0",children:[a.jsx(yN,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex flex-col items-center text-center md:flex-row md:text-left",children:[a.jsx("div",{className:"p-3 rounded-full bg-primary-100",children:a.jsx(Kt,{className:"h-6 w-6 text-primary-600"})}),a.jsxs("div",{className:"mt-4 md:mt-0 md:ml-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["",N.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Total Paid (",c,")"]})]})]})}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex flex-col items-center text-center md:flex-row md:text-left",children:[a.jsx("div",{className:"p-3 rounded-full bg-green-100",children:a.jsx(ie,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"mt-4 md:mt-0 md:ml-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.length}),a.jsx("p",{className:"text-sm text-gray-600",children:"Transactions"})]})]})}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex flex-col items-center text-center md:flex-row md:text-left",children:[a.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:a.jsx(SN,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"mt-4 md:mt-0 md:ml-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.house_number}),a.jsx("p",{className:"text-sm text-gray-600",children:"Jamaat Number"})]})]})})]}),a.jsx("div",{className:"card mb-8",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(w0,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-base font-medium text-gray-700",children:"Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),a.jsx("select",{value:c,onChange:k=>u(parseInt(k.target.value)),className:"text-sm border border-gray-300 rounded-md px-3 py-2",children:S.map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Payment Method"}),a.jsx("select",{value:d,onChange:k=>h(k.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-2",children:C.map(k=>a.jsx("option",{value:k,children:k==="all"?"All Methods":k.toUpperCase()},k))})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Sort Order"}),a.jsxs("select",{value:f,onChange:k=>m(k.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"desc",children:"Newest First"}),a.jsx("option",{value:"asc",children:"Oldest First"})]})]})]})]})}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Transaction History"}),j.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Uu,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment History"}),a.jsx("p",{className:"text-gray-600",children:d!=="all"||c!==new Date().getFullYear()?"No payments found for the selected filters.":"You haven't made any payments yet."}),a.jsx("button",{onClick:()=>e("/household/payment"),className:"btn-primary mt-4",children:"Make Your First Payment"})]}):a.jsxs("div",{children:[a.jsx("div",{className:"space-y-4 md:hidden",children:j.map(k=>a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-bold text-gray-900 text-lg",children:["",k.amount.toLocaleString()]}),a.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[g[k.month-1]," ",k.year]})]}),a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(k.payment_method)}`,children:[v(k.payment_method),a.jsx("span",{className:"ml-1",children:k.payment_method.toUpperCase()})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-600 space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-medium",children:"Date:"}),a.jsx("span",{children:cs(new Date(k.payment_date),"MMM dd, yyyy - HH:mm")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"font-medium",children:"Transaction ID:"}),a.jsx("span",{className:"font-mono break-all",children:k.transaction_id||"N/A"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsxs("span",{className:"status-paid",children:[a.jsx(ie,{className:"h-3 w-3 mr-1 inline"}),"Paid"]})]})]})]},k.id))}),a.jsx("div",{className:"overflow-x-auto hidden md:block",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Month/Year"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(k=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xd,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:cs(new Date(k.payment_date),"MMM dd, yyyy")}),a.jsx("div",{className:"text-sm text-gray-500",children:cs(new Date(k.payment_date),"HH:mm")})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[g[k.month-1]," ",k.year]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["",k.amount.toLocaleString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(k.payment_method)}`,children:[v(k.payment_method),a.jsx("span",{className:"ml-1",children:k.payment_method.toUpperCase()})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:k.transaction_id||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"status-paid",children:[a.jsx(ie,{className:"h-3 w-3 mr-1 inline"}),"Paid"]})})]},k.id))})]})})]})]})]})]})},jy=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})}),$P=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],UP=()=>{const t=ve(),{user:e}=oe(),[s,n]=w.useState([]),[r,i]=w.useState(!0),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,h]=w.useState("");w.useEffect(()=>{const g=setTimeout(()=>{h(c)},500);return()=>{clearTimeout(g)}},[c]);const f=w.useCallback(async()=>{if(e){i(!0);try{const{data:g,error:x}=await I.rpc("get_all_mosques_with_stats",{p_user_id:e.id,p_state:o||null,p_city:d||null});if(x)throw x;n(g||[])}catch(g){E.error(g.message||"Failed to fetch mosques.")}finally{i(!1)}}},[e,o,d]);w.useEffect(()=>{e!=null&&e.role&&f()},[f,e==null?void 0:e.role]);const m=g=>{t(`/mosques/${g}`)};return r&&s.length===0?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"mosque Management"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"View details for all active mosques."})]}),(e==null?void 0:e.role)==="super_admin"&&a.jsx("div",{className:"card mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by State"}),a.jsxs("select",{value:o,onChange:g=>l(g.target.value),className:"input-field",children:[a.jsx("option",{value:"",children:"All States"}),$P.map(g=>a.jsx("option",{value:g,children:g},g))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by City"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ha,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"e.g., Mumbai",value:c,onChange:g=>u(g.target.value),className:"input-field pl-10"})]})]})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:`min-w-full divide-y divide-gray-200 transition-opacity ${r?"opacity-50":"opacity-100"}`,children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosque Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(g=>a.jsxs("tr",{onClick:()=>m(g.id),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[g.city,", ",g.state]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.admin_full_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[a.jsx(Se,{className:"h-4 w-4 text-gray-400 mr-2"})," ",g.households_count," Households"]}),a.jsxs("div",{className:"text-sm text-gray-900 flex items-center mt-1",children:[a.jsx(Kt,{className:"h-4 w-4 text-green-400 mr-2"})," ",g.total_collected.toLocaleString()," Collected"]})]}),a.jsx("td",{className:"px-11 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx(pt,{to:`/super/mosques/${g.id}`,className:"text-gray-500 hover:text-blue-600 transition-colors",title:"View Details",children:a.jsx(Ks,{className:"h-5 w-5"})})})]},g.id))})]})}),s.length===0&&!r&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(De,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No active mosques found for the selected filters."})]})]})]})]})};pa.register(tl,sl,Ci,gy,yy,my);const zP=()=>{const{user:t}=oe(),{stateName:e}=aa(),[s,n]=w.useState(null),[r,i]=w.useState([]),[o,l]=w.useState(!0),c=ve(),u=e?decodeURIComponent(e):"",d=(p,y)=>{const _=Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format(p);return y?`${_}`:_},h=(p,y)=>{const v=p.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0});return y?`${v}`:v},f=w.useCallback(async()=>{if(u){l(!0);try{const{data:p,error:y}=await I.rpc("get_state_dashboard_data",{p_state_name:u});if(y)throw y;p&&(n(p.totals),i(p.city_stats||[]))}catch(p){console.error("Error fetching state dashboard data:",p),E.error(p.message||"Failed to load state data.")}finally{l(!1)}}},[u]);w.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&f()},[t,f]);const m=p=>{c(`/super/cities/${encodeURIComponent(p)}`)},g=r.slice(0,10),x={labels:g.map(p=>p.city),datasets:[{label:"Number of mosques",data:g.map(p=>p.mosque_count),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},b={indexAxis:"y",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Top 10 Cities by mosque Count"}}};return o?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(pt,{to:"/super/dashboard",className:"flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),"Back to National Overview"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:u}),a.jsx("p",{className:"text-gray-600 mt-2",children:"State-Level Overview"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:h((s==null?void 0:s.total_mosques)||0,!1),children:[a.jsx(De,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:d((s==null?void 0:s.total_mosques)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total mosques"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:h((s==null?void 0:s.total_households)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:d((s==null?void 0:s.total_households)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Households"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:h((s==null?void 0:s.total_population)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-indigo-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:d((s==null?void 0:s.total_population)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Population"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:h((s==null?void 0:s.total_collection)||0,!0),children:[a.jsx(Kt,{className:"h-8 w-8 mx-auto text-green-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:d((s==null?void 0:s.total_collection)||0,!0)}),a.jsx("p",{className:"text-gray-500",children:"Collection (This Year)"})]})]}),a.jsxs("div",{className:"card mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(Gs,{className:"h-6 w-6 mr-3 text-primary-600"}),"Statistics by City"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosques"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Households"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Population"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"View"})})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(p=>a.jsxs("tr",{onClick:()=>m(p.city),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:p.city}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-center",children:p.mosque_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-center",children:p.household_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-center",children:p.population.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx(Ar,{className:"h-5 w-5 text-gray-400"})})]},p.city))})]})}),r.length===0&&!o&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No active cities found in this state."})]})]}),r.length>0&&a.jsx("div",{className:"card",children:a.jsx(_y,{options:b,data:x})})]})]})},BP=()=>{var b;const{user:t}=oe(),{cityName:e}=aa(),[s,n]=w.useState(null),[r,i]=w.useState([]),[o,l]=w.useState([]),[c,u]=w.useState(!0),d=ve(),h=e?decodeURIComponent(e):"",f=(p,y)=>{const _=Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format(p);return y?`${_}`:_},m=(p,y)=>{const v=p.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0});return y?`${v}`:v},g=w.useCallback(async()=>{if(h){u(!0);try{const{data:p,error:y}=await I.rpc("get_city_dashboard_data",{p_city_name:h});if(y)throw y;p&&(n(p.totals),i(p.pending_mosques||[]),l(p.active_mosques||[]))}catch(p){E.error(p.message||"Failed to load city data.")}finally{u(!1)}}},[h]);w.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&g()},[t,g]);const x=p=>{d(`/mosques/${p}`)};return c?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs(pt,{to:`/super/states/${encodeURIComponent(((b=o[0])==null?void 0:b.state)||"")}`,className:"flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),"Back to State View"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:h}),a.jsx("p",{className:"text-gray-600 mt-2",children:"City-Level Overview"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:m((s==null?void 0:s.total_mosques)||0,!1),children:[a.jsx(De,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:f((s==null?void 0:s.total_mosques)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total mosques"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:m((s==null?void 0:s.total_households)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:f((s==null?void 0:s.total_households)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Households"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:m((s==null?void 0:s.total_population)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-indigo-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:f((s==null?void 0:s.total_population)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Population"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:m((s==null?void 0:s.total_collection)||0,!0),children:[a.jsx(Kt,{className:"h-8 w-8 mx-auto text-green-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:f((s==null?void 0:s.total_collection)||0,!0)}),a.jsx("p",{className:"text-gray-500",children:"Collection (This Year)"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Active mosques in ",h]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosque"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Households"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Population"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"View"})})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(p=>a.jsxs("tr",{onClick:()=>x(p.id),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:p.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:p.admin_full_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:p.households_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:p.population_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx(Ar,{className:"h-5 w-5 text-gray-400"})})]},p.id))})]})}),o.length===0&&!c&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(De,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No active mosques found in this city."})]})]})]})]})},qP=()=>{const{user:t}=oe(),{mosqueId:e}=aa(),s=ve(),[n,r]=w.useState(null),[i,o]=w.useState(null),[l,c]=w.useState(!0),[u,d]=w.useState(new Date().getFullYear()),[h,f]=w.useState(!1),[m,g]=w.useState(!1),x=w.useCallback(async()=>{if(e){c(!0);try{const{data:p,error:y}=await I.rpc("get_mosque_details_with_year",{p_mosque_id:e,p_year:u});if(y)throw y;if(p&&p.details&&p.stats)r(p.details),o(p.stats);else throw new Error("mosque data not found.")}catch(p){E.error(p.message||"Failed to load mosque details."),s(-1)}finally{c(!1)}}},[e,u,s]);w.useEffect(()=>{t&&x()},[t,x]);const b=async()=>{if(!n)return;g(!0);const p=E.loading("Deleting mosque...");try{const{error:y}=await I.functions.invoke("delete-mosque",{body:{mosqueId:n.id}});if(y)throw new Error(y.message);E.success("mosque deleted successfully!",{id:p}),s("/super/mosques")}catch(y){E.error(y.message||"Failed to delete mosque.",{id:p}),g(!1)}};return l||!n||!i?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-base text-gray-500 hover:text-gray-700 mb-4",children:[a.jsx(an,{className:"h-5 w-5 mr-2 "}),"Back"]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.name}),a.jsxs("p",{className:"text-gray-600 mt-2 flex items-center",children:[a.jsx(Gs,{className:"h-5 w-5 mr-2"})," ",n.address,", ",n.city,", ",n.state]}),a.jsxs("div",{className:"mt-4 space-y-2 text-gray-700",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(at,{className:"h-5 w-5 mr-2"})," Admin: ",a.jsx("span",{className:"font-medium ml-1",children:n.admin_name})]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-2"})," Contact: ",a.jsx("span",{className:"font-medium ml-1",children:n.admin_contact||"N/A"})]})]})]}),((t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="city_admin")&&a.jsx("button",{onClick:()=>f(!0),className:"btn-Denger ml-4",children:"Delete mosque"})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"View Stats for Year"}),a.jsx("select",{value:u,onChange:p=>d(parseInt(p.target.value)),className:"input-field w-full md:w-1/4",children:[2024,2025,2026].map(p=>a.jsx("option",{value:p,children:p},p))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Financial Overview (",u,")"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-600 flex items-center",children:[a.jsx(N0,{className:"mr-2 h-5 w-5"}),"Expected Collection"]})," ",a.jsxs("span",{className:"font-bold text-lg",children:["",i.expected_collection.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-600 flex items-center",children:[a.jsx(Kt,{className:"mr-2 h-5 w-5 text-green-500"}),"Total Collected"]})," ",a.jsxs("span",{className:"font-bold text-lg text-green-600",children:["",i.total_collected.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Community Stats"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-600 flex items-center",children:[a.jsx(Se,{className:"mr-2 h-5 w-5"}),"Total Households"]})," ",a.jsx("span",{className:"font-bold text-lg",children:i.total_households})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-600 flex items-center",children:[a.jsx(Se,{className:"mr-2 h-5 w-5"}),"Total Population"]})," ",a.jsx("span",{className:"font-bold text-lg",children:i.total_population})]}),a.jsxs("div",{className:"flex justify-between items-center pl-4",children:[a.jsx("span",{className:"text-gray-500",children:"Male"})," ",a.jsx("span",{className:"font-medium",children:i.male_population})]}),a.jsxs("div",{className:"flex justify-between items-center pl-4",children:[a.jsx("span",{className:"text-gray-500",children:"Female"})," ",a.jsx("span",{className:"font-medium",children:i.female_population})]})]})]})]})]}),h&&n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Qd,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete mosque"}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',n.name,'"? This action cannot be undone.']})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm",onClick:b,disabled:m,children:m?"Deleting...":"Delete"}),a.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm",onClick:()=>f(!1),children:"Cancel"})]})]})})]})},HP=()=>{const{user:t}=oe();ve();const[e,s]=w.useState({full_name:"",email:"",contact_number:""}),[n,r]=w.useState({full_name:"",email:"",contact_number:""}),[i,o]=w.useState(!0),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[h,f]=w.useState(!1),[m,g]=w.useState(""),[x,b]=w.useState(""),[p,y]=w.useState(""),v=w.useCallback(async()=>{if(t){o(!0);try{const{data:C,error:k}=await I.rpc("get_super_admin_profile",{p_user_id:t.id});if(k)throw k;C&&(s(C),r(C))}catch(C){E.error(C.message||"Failed to load profile.")}finally{o(!1)}}},[t]);w.useEffect(()=>{v()},[v]);const _=async C=>{if(C.preventDefault(),!t)return;c(!0);const k=E.loading("Updating profile...");try{const{error:M}=await I.from("admin_profiles").update({full_name:e.full_name,contact_number:e.contact_number}).eq("id",t.id);if(M)throw M;E.success("Profile updated successfully!",{id:k}),r(e),d(!1)}catch(M){E.error(M.message||"Failed to update profile.",{id:k})}finally{c(!1)}},j=()=>{s(n),d(!1)},N=async()=>{if(!e.email){E.error("Email not found, cannot send reset link.");return}const C=E.loading("Sending password reset email..."),{error:k}=await I.auth.resetPasswordForEmail(e.email,{redirectTo:window.location.origin+"/update-password"});k?E.error(k.message,{id:C}):(E.success("Password reset email sent! Please check your inbox.",{id:C}),f(!1))},S=async C=>{if(C.preventDefault(),!m)return E.error("Please enter your current password.");if(x!==p)return E.error("New passwords do not match.");if(x.length<6)return E.error("Password must be at least 6 characters long.");c(!0);const k=E.loading("Verifying and changing password...");try{const{error:M}=await I.auth.signInWithPassword({email:e.email,password:m});if(M)throw new Error("Incorrect current password. Please try again.");const{error:T}=await I.auth.updateUser({password:x});if(T)throw T;E.success("Password changed successfully!",{id:k}),f(!1),g(""),b(""),y("")}catch(M){E.error(M.message||"Failed to change password.",{id:k})}finally{c(!1)}};return i?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"card p-6 mb-8 flex items-center space-x-6",children:[a.jsx("div",{className:"flex-shrink-0 h-20 w-20 rounded-full bg-primary-100 flex items-center justify-center",children:a.jsx(at,{className:"h-10 w-10 text-primary-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.full_name}),a.jsx("p",{className:"text-gray-600",children:e.email}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 mt-2",children:"Super Administrator"})]})]}),a.jsx("div",{className:"card p-6 mb-8",children:a.jsxs("form",{onSubmit:_,children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(at,{className:"h-5 w-5 mr-2 text-primary-600"})," Personal Information"]}),!u&&a.jsxs("button",{type:"button",onClick:()=>d(!0),className:"btn-primary",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"col-span-2",children:u?a.jsx("input",{type:"text",value:e.full_name,onChange:C=>s({...e,full_name:C.target.value}),className:"input-field"}):a.jsx("p",{className:"text-gray-800",children:e.full_name})})]}),a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),a.jsx("div",{className:"col-span-2 flex items-center",children:u?a.jsx("input",{type:"text",value:e.contact_number||"",onChange:C=>s({...e,contact_number:C.target.value}),className:"input-field"}):a.jsxs("p",{className:"text-gray-800 flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 text-gray-400"}),e.contact_number||"N/A"]})})]}),a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"col-span-2",children:a.jsxs("p",{className:"text-gray-800 flex items-center",children:[a.jsx(da,{className:"h-4 w-4 mr-2 text-gray-400"}),e.email]})})]})]}),u&&a.jsxs("div",{className:"pt-6 mt-6 border-t flex justify-end space-x-3",children:[a.jsxs("button",{type:"button",onClick:j,className:"btn-primary",children:[a.jsx(Gt,{className:"h-5 w-5 mr-2"})," Cancel"]}),a.jsxs("button",{type:"submit",className:"btn-primary",disabled:l,children:[a.jsx(Ir,{className:"h-5 w-5 mr-2"})," ",l?"Saving...":"Save Changes"]})]})]})}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(b0,{className:"h-5 w-5 mr-2 text-primary-600"})," Account Security"]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Password"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Change your password to keep your account secure."})]}),a.jsx("button",{onClick:()=>f(!0),className:"btn-primary",children:"Change"})]})})]})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password"}),a.jsx("input",{type:"password",value:m,onChange:C=>g(C.target.value),className:"input-field mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),a.jsx("input",{type:"password",value:x,onChange:C=>b(C.target.value),className:"input-field mt-1",placeholder:"At least 6 characters",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:p,onChange:C=>y(C.target.value),className:"input-field mt-1",required:!0})]}),a.jsxs("div",{className:"pt-4 flex justify-between items-center",children:[a.jsx("button",{type:"button",onClick:N,className:"text-sm text-primary-600 hover:underline",children:"Forgot Password?"}),a.jsxs("div",{className:"space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Saving...":"Save"})]})]})]})]})})]})},WP=()=>{const t=ve(),{user:e}=oe(),[s,n]=w.useState([]),[r,i]=w.useState([]),[o,l]=w.useState(!0),c=w.useCallback(async()=>{if(e){l(!0);try{const{data:d,error:h}=await I.rpc("get_mosques_for_city_admin",{p_user_id:e.id});if(h)throw h;n(d.active_mosques||[]),i(d.pending_mosques||[])}catch(d){E.error(d.message||"Failed to fetch mosques.")}finally{l(!1)}}},[e]);w.useEffect(()=>{(e==null?void 0:e.role)==="city_admin"&&c()},[e,c]);const u=async d=>{const h=E.loading("Approving mosque...");try{const{error:f}=await I.functions.invoke("approve-request",{body:{requestId:d,requestType:"mosque"}});if(f)throw new Error(f.message);E.success("mosque approved successfully!",{id:h}),c()}catch(f){E.error(f.message||"Failed to approve mosque.",{id:h})}};return o?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"mosque Management"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Approve and manage all mosques in your assigned city: ",e==null?void 0:e.city]})]}),r.length>0&&a.jsxs("div",{className:"card mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pending mosque Approvals"}),a.jsx("div",{className:"space-y-4",children:r.map(d=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-amber-50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:d.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Admin: ",d.admin_full_name," (",d.admin_email,")"]})]}),a.jsxs("button",{onClick:()=>u(d.id),className:"btn-primary",children:[a.jsx(ie,{className:"h-5 w-5 mr-2"}),"Approve"]})]},d.id))})]}),a.jsxs("div",{className:"card",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Active mosques"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosque Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(d=>a.jsxs("tr",{onClick:()=>t(`/mosques/${d.id}`),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[d.city,", ",d.state]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:d.admin_full_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[a.jsx(Se,{className:"h-4 w-4 text-gray-400 mr-2"})," ",d.households_count," Households"]}),a.jsxs("div",{className:"text-sm text-gray-900 flex items-center mt-1",children:[a.jsx(Kt,{className:"h-4 w-4 text-green-400 mr-2"})," ",d.total_collected.toLocaleString()," Collected"]})]}),a.jsx("td",{className:"px-11 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx(pt,{to:`/mosques/${d.id}`,className:"text-gray-500 hover:text-blue-600 transition-colors",title:"View Details",children:a.jsx(Ks,{className:"h-5 w-5"})})})]},d.id))})]})}),s.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(De,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No active mosques found in your city."})]})]})]})]})},VP=({isOpen:t,onClose:e,admin:s,onDataChange:n})=>{const[r,i]=w.useState(!1),[o,l]=w.useState({...s});if(w.useEffect(()=>{t&&(l({...s}),i(!1))},[t,s]),!t)return null;const c=f=>f.stopPropagation(),u=async()=>{if(window.confirm(`Are you sure you want to delete ${s.full_name}? This action cannot be undone.`)){const f=E.loading("Deleting admin...");try{const{error:m}=await I.functions.invoke("delete-city-admin",{body:{userId:s.id}});if(m)throw m;E.success("Admin deleted successfully.",{id:f}),n(),e()}catch(m){E.error(m.message||"Failed to delete admin.",{id:f})}}},d=async()=>{const f=E.loading("Saving changes...");try{const{error:m}=await I.functions.invoke("update-city-admin-details",{body:{userId:s.id,fullName:s.full_name,updates:{contactNumber:o.contact_number}}});if(m)throw m;E.success("Changes saved successfully.",{id:f}),n(),i(!1)}catch(m){E.error(m.message||"Failed to save changes.",{id:f})}},h=f=>{const{name:m,value:g}=f.target;l(x=>({...x,[m]:g}))};return a.jsx("div",{onClick:e,className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 transition-opacity",children:a.jsxs("div",{onClick:c,className:"relative w-full max-w-lg rounded-lg bg-white p-8 shadow-2xl",children:[a.jsx("button",{onClick:e,className:"absolute -top-3 -right-3 flex h-8 w-8 items-center justify-center rounded-full bg-white text-gray-600 shadow-lg transition hover:bg-red-500 hover:text-white",children:a.jsx(Gt,{className:"h-5 w-5"})}),a.jsxs("div",{className:"mb-6 flex items-center",children:[a.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-primary-100 text-primary-600",children:a.jsx(at,{className:"h-6 w-6"})}),a.jsxs("div",{className:"ml-4",children:[r?a.jsx("input",{type:"text",name:"full_name",value:o.full_name,onChange:h,className:"input-field text-2xl font-bold"}):a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o.full_name}),a.jsx("p",{className:"text-md text-gray-500",children:"City Admin Details"})]})]}),a.jsxs("div",{className:"space-y-4 text-gray-700",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(da,{className:"mr-3 h-5 w-5 text-gray-400"}),a.jsx("span",{children:s.email})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"mr-3 h-5 w-5 text-gray-400"}),r?a.jsx("input",{type:"text",name:"contact_number",value:o.contact_number||"",onChange:h,className:"input-field"}):a.jsx("span",{children:o.contact_number||"Not Available"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gs,{className:"mr-3 h-5 w-5 text-gray-400"}),a.jsxs("span",{children:[s.city,", ",s.state]})]})]}),a.jsx("div",{className:"mt-8 flex justify-end space-x-3 border-t pt-6",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i(!1),className:"btn-primary",children:[a.jsx(Al,{className:"mr-2 h-4 w-4"}),"Cancel"]}),a.jsxs("button",{onClick:d,className:"btn-primary",children:[a.jsx(Ir,{className:"mr-2 h-4 w-4"}),"Save"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[a.jsx(Dr,{className:"mr-2 h-4 w-4"}),"Edit"]}),a.jsxs("button",{onClick:u,className:"btn-danger",children:[a.jsx(j0,{className:"mr-2 h-4 w-4"}),"Delete"]})]})})]})})},YP=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],KP=()=>{const{user:t}=oe(),[e,s]=w.useState([]),[n,r]=w.useState([]),[i,o]=w.useState(!0),[l,c]=w.useState(!1),[u,d]=w.useState(null),[h,f]=w.useState(""),[m,g]=w.useState(""),[x,b]=w.useState("");w.useEffect(()=>{const j=setTimeout(()=>{b(m)},500);return()=>{clearTimeout(j)}},[m]);const p=w.useCallback(async()=>{o(!0);try{const{data:j,error:N}=await I.rpc("get_city_admins_with_pending",{p_state:h||null,p_city:x||null});if(N)throw N;j&&(s(j.pending_admins||[]),r(j.active_admins||[]))}catch(j){E.error(j.message||"Failed to fetch city admins.")}finally{o(!1)}},[h,x]);w.useEffect(()=>{(t==null?void 0:t.role)==="super_admin"&&p()},[t,p]);const y=j=>{d(j),c(!0)},v=()=>{c(!1),d(null)},_=async j=>{const N=E.loading("Approving admin...");try{const{error:S}=await I.functions.invoke("set-city-admin-role",{body:{userId:j.id,city:j.city}});if(S)throw new Error(S.message);const{error:C}=await I.from("admin_profiles").update({status:"active"}).eq("id",j.id);if(C)throw C;E.success("Admin approved and role assigned!",{id:N}),p()}catch(S){E.error(S.message||"Failed to approve admin.",{id:N})}};return i&&e.length===0&&n.length===0?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"City Admin Management"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"Approve new registrations and manage existing city admins."})]}),a.jsx(pt,{to:"/super/requests",className:"mt-4 sm:mt-0 w-full sm:w-auto",children:a.jsxs("button",{className:"btn-primary w-full",children:[a.jsx(vN,{className:"h-5 w-5 mr-2"}),"View Change Requests"]})})]}),a.jsx("div",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by State"}),a.jsxs("select",{value:h,onChange:j=>f(j.target.value),className:"input-field",children:[a.jsx("option",{value:"",children:"All States"}),YP.map(j=>a.jsx("option",{value:j,children:j},j))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by City"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ha,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"e.g., Mumbai",value:m,onChange:j=>g(j.target.value),className:"input-field pl-10"})]})]})]})}),a.jsxs("div",{className:`space-y-8 transition-opacity ${i?"opacity-50":"opacity-100"}`,children:[e.length>0&&a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pending Approvals"}),a.jsx("div",{className:"space-y-4",children:e.map(j=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-amber-50",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[j.full_name," (",j.email,")"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",j.city,", ",j.state]})]}),a.jsxs("button",{onClick:()=>_(j),className:"btn-primary",children:[a.jsx(ie,{className:"h-5 w-5 mr-2"}),"Approve"]})]},j.id))})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(TN,{className:"h-6 w-6 mr-3 text-primary-600"}),"Active City Admins"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned Location"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(j=>a.jsxs("tr",{onClick:()=>y(j),className:"group hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900 text-center",children:j.full_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-center",children:[a.jsx("div",{children:j.email}),a.jsx("div",{children:j.contact_number||"N/A"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600 text-center",children:[j.city,", ",j.state]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:a.jsx(Ks,{className:"h-5 w-5 mx-auto text-gray-400 transition-all group-hover:scale-125 group-hover:text-primary-600"})})]},j.id))})]})})]})]})]}),u&&a.jsx(VP,{isOpen:l,onClose:v,admin:u,onDataChange:p})]})},GP=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],JP=()=>{const[t,e]=w.useState("city_admin"),[s,n]=w.useState(""),[r,i]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),[d,h]=w.useState(""),[f,m]=w.useState(""),[g,x]=w.useState(!1),b=ve(),p=async y=>{y.preventDefault(),x(!0);const v=E.loading("Submitting registration...");try{const{data:_,error:j}=await I.functions.invoke("create-admin",{body:{email:r,password:o,fullName:s,role:t,contactNumber:f,city:t==="city_admin"?c:void 0,state:t==="city_admin"?d:void 0}});if(j)throw new Error(j.message);if(_.error)throw new Error(_.error);E.success("Registration successful! Please wait for approval.",{id:v}),b("/awaiting-approval")}catch(_){E.error(_.message||"Failed to register.",{id:v})}finally{x(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(_0,{className:"h-12 w-12 text-primary-600 mx-auto"}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Admin Registration"})]}),a.jsxs("form",{className:"mt-8 space-y-4",onSubmit:p,children:[a.jsxs("select",{value:t,onChange:y=>e(y.target.value),className:"input-field",required:!0,children:[a.jsx("option",{value:"city_admin",children:"City Admin"}),a.jsx("option",{value:"super_admin",children:"Super Admin"})]}),a.jsx("input",{type:"text",placeholder:"Full Name",value:s,onChange:y=>n(y.target.value),className:"input-field",required:!0}),a.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:y=>i(y.target.value),className:"input-field",required:!0}),a.jsx("input",{type:"password",placeholder:"Password (min. 6 characters)",value:o,onChange:y=>l(y.target.value),className:"input-field",required:!0}),a.jsx("input",{type:"text",placeholder:"Contact Number",value:f,onChange:y=>m(y.target.value),className:"input-field"}),t==="city_admin"&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{value:d,onChange:y=>h(y.target.value),className:"input-field",required:t==="city_admin",children:[a.jsx("option",{value:"",disabled:!0,children:"-- Select Assigned State --"}),GP.map(y=>a.jsx("option",{value:y,children:y},y))]}),a.jsx("input",{type:"text",placeholder:"Assigned City",required:t==="city_admin",value:c,onChange:y=>u(y.target.value),className:"input-field"})]}),a.jsx("div",{className:"pt-4",children:a.jsxs("button",{type:"submit",disabled:g,className:"btn-primary w-full",children:[a.jsx(Ir,{className:"h-5 w-5 mr-2"}),g?"Submitting...":"Submit for Approval"]})})]})]})})},QP=()=>{const t=ve(),e=async()=>{const s=E.loading("Logging out...");try{const{error:n}=await I.auth.signOut();if(n)throw n;E.success("Logged out successfully",{id:s}),t("/login")}catch(n){E.error(n.message||"Failed to log out.",{id:s})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full text-center p-8 bg-white rounded-xl shadow-lg",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(_N,{className:"h-16 w-16 text-primary-600"})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Registration Submitted"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Thank you for registering. Your account is currently pending approval from an administrator."}),a.jsx("p",{className:"mt-2 text-gray-600",children:"You will be notified once your account has been activated."}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:e,className:"btn-primary w-full flex items-center justify-center",children:[a.jsx(Ol,{className:"h-5 w-5 mr-2"}),"Log Out"]})})]})})},XP=()=>{const{user:t}=oe(),[e,s]=w.useState(null),[n,r]=w.useState([]),[i,o]=w.useState(!0),l=ve(),c=(f,m)=>{const x=Intl.NumberFormat("en-IN",{notation:"compact",maximumFractionDigits:1}).format(f);return m?`${x}`:x},u=(f,m)=>{const g=f.toLocaleString("en-IN",{minimumFractionDigits:0,maximumFractionDigits:0});return m?`${g}`:g},d=w.useCallback(async()=>{if(t){o(!0);try{const{data:f,error:m}=await I.rpc("get_city_admin_dashboard_data",{p_user_id:t.id});if(m)throw m;f&&(s(f.totals),r(f.mosques_list||[]))}catch(f){E.error(f.message||"Failed to load dashboard data.")}finally{o(!1)}}},[t]);w.useEffect(()=>{(t==null?void 0:t.role)==="city_admin"&&d()},[t,d]);const h=f=>{l(`/mosques/${f}`)};return i?a.jsxs("div",{children:[a.jsx(V,{}),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{children:[a.jsx(V,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",(t==null?void 0:t.full_name)||"Admin"]}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["City Admin Dashboard | ",t==null?void 0:t.city]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_mosques)||0,!1),children:[a.jsx(De,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_mosques)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total mosques"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_households)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-primary-600 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_households)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Households"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_population)||0,!1),children:[a.jsx(Se,{className:"h-8 w-8 mx-auto text-indigo-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_population)||0,!1)}),a.jsx("p",{className:"text-gray-500",children:"Total Population"})]}),a.jsxs("div",{className:"card text-center overflow-hidden transition duration-300 hover:shadow-lg cursor-default",title:u((e==null?void 0:e.total_collection)||0,!0),children:[a.jsx(Kt,{className:"h-8 w-8 mx-auto text-green-500 mb-2"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 truncate",children:c((e==null?void 0:e.total_collection)||0,!0)}),a.jsx("p",{className:"text-gray-500",children:"Collection (This Year)"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(De,{className:"h-6 w-6 mr-3 text-primary-600"}),"mosques in ",t==null?void 0:t.city]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"mosque"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Households"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Population"}),a.jsx("th",{className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"View"})})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(f=>a.jsxs("tr",{onClick:()=>h(f.id),className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:f.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:f.admin_full_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:f.households_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-600",children:f.population_count.toLocaleString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx(Ar,{className:"h-5 w-5 text-gray-400"})})]},f.id))})]})}),n.length===0&&!i&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(De,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No active mosques found in your city."})]})]})]})]})},ZP=()=>{const{user:t}=oe(),e=ve(),[s,n]=w.useState([]),[r,i]=w.useState([]),[o,l]=w.useState(!0),c=w.useCallback(async()=>{if(t){l(!0);try{const{data:h,error:f}=await I.rpc("get_mosque_admins_for_city_admin",{p_user_id:t.id});if(f)throw f;n(h.pending_admins||[]),i(h.active_admins||[])}catch(h){E.error(h.message||"Failed to fetch mosque admins.")}finally{l(!1)}}},[t]);w.useEffect(()=>{(t==null?void 0:t.role)==="city_admin"&&c()},[t,c]);const u=async h=>{const f=E.loading("Approving admin...");try{const{error:m}=await I.functions.invoke("approve-request",{body:{requestId:h,requestType:"user"}});if(m)throw new Error(m.message);E.success("Admin approved successfully!",{id:f}),c()}catch(m){E.error(m.message||"Failed to approve admin.",{id:f})}},d=(h,f)=>{h.stopPropagation(),f&&e(`/mosques/${f}`)};return o?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Manage mosque Admins"}),a.jsxs("p",{className:"text-lg text-gray-600 mt-1",children:["Approve new admins and manage existing ones in ",a.jsx("span",{className:"font-medium text-primary-700",children:t==null?void 0:t.city}),"."]})]}),s.length>0&&a.jsxs("section",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(Zd,{className:"h-6 w-6 mr-3 text-amber-500"})," Pending Approvals"]}),a.jsx("div",{className:"space-y-4",children:s.map(h=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-lg bg-amber-50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:h.full_name}),a.jsx("p",{className:"text-sm text-gray-600",children:h.email}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),h.contact_number]})]}),a.jsxs("button",{onClick:()=>u(h.id),className:"btn-primary mt-3 sm:mt-0 w-full sm:w-auto",children:[a.jsx(k0,{className:"h-5 w-5 mr-2"}),"Approve"]})]},h.id))})]}),a.jsxs("section",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(at,{className:"h-6 w-6 mr-3 text-primary-600"}),"Active mosque Admins"]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned mosque"}),a.jsx("th",{scope:"col",className:"relative px-6 py-3",children:a.jsx("span",{className:"sr-only",children:"View"})})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(h=>a.jsxs("tr",{onClick:()=>e(`/city/admins/${h.id}`),className:"hover:bg-gray-50 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h.full_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("div",{children:h.email}),a.jsx("div",{className:"text-gray-500",children:h.contact_number})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",onClick:f=>d(f,h.mosque_id),children:h.mosque_name?a.jsxs("span",{className:"flex items-center hover:text-primary-700 hover:underline",children:[a.jsx(De,{className:"h-4 w-4 mr-2 text-gray-400"}),h.mosque_name]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Not Assigned"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("span",{className:"text-gray-400",children:a.jsx(Ar,{className:"h-6 w-6"})})})]},h.id))})]})}),r.length===0&&s.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Se,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Admins to Manage"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"There are currently no active or pending mosque admins in your city."})]})]})]})]})},eE=()=>{const{user:t}=oe(),{adminId:e}=aa(),s=ve(),[n,r]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(!1),[h,f]=w.useState(!1),m=w.useCallback(async()=>{if(e){c(!0);try{const{data:b,error:p}=await I.rpc("get_mosque_admin_details",{p_admin_id:e});if(p)throw p;if(b&&b.details)r(b.details),o(b.mosques||[]);else throw new Error("Admin data not found.")}catch(b){E.error(b.message||"Failed to load admin details."),s(-1)}finally{c(!1)}}},[e,s]);w.useEffect(()=>{t&&m()},[t,m]);const g=async()=>{if(!n)return;f(!0);const b=E.loading("Deleting admin...");try{const{error:p}=await I.functions.invoke("delete-user",{body:{userId:n.id}});if(p)throw new Error(p.message);E.success("Admin deleted successfully!",{id:b}),s("/city/admins")}catch(p){E.error(p.message||"Failed to delete admin.",{id:b}),f(!1)}},x=b=>{s(`/mosques/${b}`)};return l||!n?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-base font-medium text-gray-500 hover:text-gray-800 transition-colors mb-6",children:[a.jsx(an,{className:"h-5 w-5 mr-2"}),"Back to Admins List"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900",children:n.full_name}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"mosque Admin Details"})]}),(t==null?void 0:t.role)==="city_admin"&&a.jsx("button",{onClick:()=>d(!0),className:"btn-Denger ml-4",children:"Delete Admin"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsx("div",{className:"md:col-span-1",children:a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("dl",{className:"divide-y divide-gray-200",children:[a.jsxs("div",{className:"py-3 flex items-center justify-between",children:[a.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[a.jsx(at,{className:"h-5 w-5 mr-3 text-gray-400"}),"Name"]}),a.jsx("dd",{className:"text-sm text-gray-900",children:n.full_name})]}),a.jsxs("div",{className:"py-3 flex items-center justify-between",children:[a.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[a.jsx(da,{className:"h-5 w-5 mr-3 text-gray-400"}),"Email"]}),a.jsx("dd",{className:"text-sm text-gray-900",children:n.email})]}),a.jsxs("div",{className:"py-3 flex items-center justify-between",children:[a.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-3 text-gray-400"}),"Phone"]}),a.jsx("dd",{className:"text-sm text-gray-900",children:n.phone||"N/A"})]}),a.jsxs("div",{className:"py-3 flex items-center justify-between",children:[a.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[a.jsx(Gs,{className:"h-5 w-5 mr-3 text-gray-400"}),"City"]}),a.jsx("dd",{className:"text-sm text-gray-900",children:n.city})]})]})]})}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Assigned mosque(s)"}),i.length>0?a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(b=>a.jsxs("li",{onClick:()=>x(b.id),className:"py-4 flex items-center justify-between hover:bg-gray-100 rounded-md px-2 -mx-2 transition-colors cursor-pointer",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(De,{className:"h-6 w-6 mr-4 text-primary-600"}),a.jsx("span",{className:"text-gray-800 font-medium",children:b.name})]}),a.jsx(Ar,{className:"h-5 w-5 text-gray-400"})]},b.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(De,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Assigned mosques"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"This admin is not currently assigned to any active mosques."})]})]})})]})]}),u&&n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl transform transition-all",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Qd,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Admin"}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-500",children:['Are you sure you want to delete "',n.full_name,'"? This action is permanent and cannot be undone.']})})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",className:"btn-Denger ml-4",onClick:g,disabled:h,children:h?"Deleting...":"Delete"}),a.jsx("button",{type:"button",className:"btn-secondary mt-3 w-full sm:mt-0 sm:w-auto",onClick:()=>d(!1),children:"Cancel"})]})]})})]})},tE=()=>{const{user:t}=oe();ve();const[e,s]=w.useState({full_name:"",email:"",contact_number:"",city:"",state:""}),[n,r]=w.useState({full_name:"",email:"",contact_number:"",city:"",state:""}),[i,o]=w.useState(!0),[l,c]=w.useState(!1),[u,d]=w.useState(!1),[h,f]=w.useState(null),[m,g]=w.useState(!1),[x,b]=w.useState(""),[p,y]=w.useState(""),[v,_]=w.useState(""),j=w.useCallback(async()=>{if(t){o(!0);try{const{data:k,error:M}=await I.rpc("get_city_admin_profile",{p_user_id:t.id});if(M)throw M;if(k){const F={full_name:k.full_name,email:k.email,contact_number:k.contact_number,city:k.city,state:k.state};s(F),r(F)}const{data:T,error:A}=await I.from("profile_change_requests").select("new_city, new_state").eq("user_id",t.id).eq("status","pending").maybeSingle();if(A)throw A;f(T)}catch(k){E.error(k.message||"Failed to load profile.")}finally{o(!1)}}},[t]);w.useEffect(()=>{j()},[j]);const N=async k=>{if(k.preventDefault(),!t)return;c(!0);const M=E.loading("Saving changes..."),T=e.city!==n.city||e.state!==n.state,A=e.full_name!==n.full_name||e.contact_number!==n.contact_number;try{if(T){const{error:F}=await I.functions.invoke("request-profile-change",{body:{userId:t.id,newCity:e.city,newState:e.state}});if(F)throw new Error(F.message);E.success("Location change request submitted for approval.",{id:M})}if(A){const{error:F}=await I.from("admin_profiles").update({full_name:e.full_name,contact_number:e.contact_number}).eq("id",t.id);if(F)throw F;T||E.success("Profile updated successfully!",{id:M})}!T&&!A&&(E.dismiss(M),E.success("No changes to save.")),d(!1),j()}catch(F){E.error(F.message||"Failed to save changes.",{id:M})}finally{c(!1)}},S=()=>{s(n),d(!1)},C=async k=>{if(k.preventDefault(),!x)return E.error("Please enter your current password.");if(p!==v)return E.error("New passwords do not match.");if(p.length<6)return E.error("Password must be at least 6 characters long.");c(!0);const M=E.loading("Verifying and changing password...");try{const{error:T}=await I.auth.signInWithPassword({email:e.email,password:x});if(T)throw new Error("Incorrect current password. Please try again.");const{error:A}=await I.auth.updateUser({password:p});if(A)throw A;E.success("Password changed successfully!",{id:M}),g(!1),b(""),y(""),_("")}catch(T){E.error(T.message||"Failed to change password.",{id:M})}finally{c(!1)}};return i?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"card bg-white rounded-lg shadow-md p-6 mb-8 flex items-center space-x-6",children:[a.jsx("div",{className:"flex-shrink-0 h-20 w-20 rounded-full bg-primary-100 flex items-center justify-center",children:a.jsx(at,{className:"h-10 w-10 text-primary-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.full_name}),a.jsx("p",{className:"text-gray-600",children:e.email}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-2",children:"City Administrator"})]})]}),h&&a.jsx("div",{className:"card bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8 rounded-r-lg",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(El,{className:"h-5 w-5 text-yellow-400"})}),a.jsx("div",{className:"ml-3",children:a.jsxs("p",{className:"text-sm text-yellow-700",children:["You have a pending request to change your location to ",a.jsxs("span",{className:"font-medium",children:[h.new_city,", ",h.new_state]}),"."]})})]})}),a.jsx("div",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:a.jsxs("form",{onSubmit:N,children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Personal Information"}),!u&&a.jsxs("button",{type:"button",onClick:()=>d(!0),className:"btn-primary",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"col-span-2",children:u?a.jsx("input",{type:"text",value:e.full_name,onChange:k=>s({...e,full_name:k.target.value}),className:"input-field"}):a.jsx("p",{className:"text-gray-800",children:e.full_name})})]}),a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),a.jsx("div",{className:"col-span-2",children:u?a.jsx("input",{type:"text",value:e.contact_number||"",onChange:k=>s({...e,contact_number:k.target.value}),className:"input-field"}):a.jsx("p",{className:"text-gray-800",children:e.contact_number||"N/A"})})]}),a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),a.jsx("div",{className:"col-span-2",children:u?a.jsx("input",{type:"text",value:e.state||"",onChange:k=>s({...e,state:k.target.value}),disabled:!!h,className:`input-field ${h?"bg-gray-100 cursor-not-allowed":""}`}):a.jsx("p",{className:"text-gray-800",children:e.state})})]}),a.jsxs("div",{className:"grid grid-cols-3 items-center",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),a.jsx("div",{className:"col-span-2",children:u?a.jsx("input",{type:"text",value:e.city||"",onChange:k=>s({...e,city:k.target.value}),disabled:!!h,className:`input-field ${h?"bg-gray-100 cursor-not-allowed":""}`}):a.jsx("p",{className:"text-gray-800",children:e.city})})]})]}),u&&a.jsxs("div",{className:"pt-6 mt-6 border-t flex justify-end space-x-3",children:[a.jsxs("button",{type:"button",onClick:S,className:"btn-primary",children:[a.jsx(Gt,{className:"h-5 w-5 mr-2"})," Cancel"]}),a.jsxs("button",{type:"submit",className:"btn-primary",disabled:l,children:[a.jsx(Ir,{className:"h-5 w-5 mr-2"})," ",l?"Saving...":"Save Changes"]})]})]})}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Security"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Password"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Change your password to keep your account secure."})]}),a.jsx("button",{onClick:()=>g(!0),className:"btn-primary",children:"Change"})]})})]})]}),m&&a.jsx("div",{className:"card fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password"}),a.jsx("input",{type:"password",value:x,onChange:k=>b(k.target.value),className:"input-field mt-1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),a.jsx("input",{type:"password",value:p,onChange:k=>y(k.target.value),className:"input-field mt-1",placeholder:"At least 6 characters",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:v,onChange:k=>_(k.target.value),className:"input-field mt-1",required:!0})]}),a.jsx("div",{className:"pt-4 flex justify-end items-center",children:a.jsxs("div",{className:"space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:l,children:l?"Saving...":"Save"})]})})]})]})})]})},sE=()=>{const[t,e]=w.useState([]),[s,n]=w.useState(!0),r=w.useCallback(async()=>{n(!0);try{const{data:o,error:l}=await I.rpc("get_all_profile_change_requests");if(l)throw l;e(o||[])}catch(o){E.error(o.message||"Failed to load change requests.")}finally{n(!1)}},[]);w.useEffect(()=>{r()},[r]);const i=async(o,l)=>{const c=E.loading(`${l==="approve"?"Approving":"Rejecting"} request...`);try{const{error:u}=await I.functions.invoke("approve-request",{body:{requestId:o,requestType:"profile_change",action:l}});if(u)throw new Error(u.message);E.success(`Request ${l==="approve"?"approved":"rejected"} successfully!`,{id:c}),r()}catch(u){E.error(u.message||"Failed to process request.",{id:c})}};return s?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"mb-8",children:[a.jsxs(pt,{to:"/super/admins",className:"flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),"Back to Admin Management"]}),a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Profile Change Requests"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"Review and approve location changes for City Admins."})]}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:t.length>0?a.jsx("div",{className:"space-y-6",children:t.map(o=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-4",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[a.jsx(at,{className:"h-5 w-5 mr-2 text-gray-500"}),o.full_name]}),a.jsxs("p",{className:"text-sm text-gray-500 flex items-center mt-1",children:[a.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Requested on: ",cs(new Date(o.requested_at),"PPP")]})]}),a.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[a.jsxs("button",{onClick:()=>i(o.request_id,"reject"),className:"btn-danger-outline",children:[a.jsx(Gt,{className:"h-5 w-5 mr-2"})," Reject"]}),a.jsxs("button",{onClick:()=>i(o.request_id,"approve"),className:"btn-primary",children:[a.jsx(Tl,{className:"h-5 w-5 mr-2"})," Approve"]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-md p-4 flex items-center justify-center space-x-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"From"}),a.jsxs("p",{className:"font-medium text-gray-800 flex items-center",children:[a.jsx(Gs,{className:"h-4 w-4 mr-1"})," ",o.current_city,", ",o.current_state]})]}),a.jsx(v0,{className:"h-6 w-6 text-gray-400 flex-shrink-0"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-primary-700 uppercase font-semibold",children:"To"}),a.jsxs("p",{className:"font-bold text-primary-700 flex items-center",children:[a.jsx(Gs,{className:"h-4 w-4 mr-1"})," ",o.new_city,", ",o.new_state]})]})]})]},o.request_id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"All Clear!"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"There are no pending profile change requests."})]})})]})]})},nE=()=>{const{user:t}=oe(),[e,s]=w.useState(null),[n,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(""),[h,f]=w.useState(null),[m,g]=w.useState(null),x=w.useCallback(async()=>{if(t){c(!0);try{const{data:N,error:S}=await I.rpc("get_mosque_households_page_data",{admin_user_id:t.id});if(S)throw S;s(N.mosque_details),r(N.active_households||[]),o(N.pending_households||[])}catch(N){E.error(N.message||"Error loading households data")}finally{c(!1)}}},[t]);w.useEffect(()=>{(t==null?void 0:t.role)==="mosque_admin"&&x()},[t,x]);const b=async N=>{const S=E.loading("Approving household...");try{const{error:C}=await I.functions.invoke("approve-request",{body:{requestId:N,requestType:"household"}});if(C)throw C;E.success("Household approved!",{id:S}),x()}catch(C){E.error(C.message||"Failed to approve household.",{id:S})}},p=async N=>{E.error("Reject functionality not yet implemented.")},y=async N=>{if(N.preventDefault(),!h)return;const S=E.loading("Updating household...");try{const{error:C}=await I.functions.invoke("update-household",{body:{householdId:h.id,updates:h}});if(C)throw new Error(C.message);E.success("Household updated successfully!",{id:S}),f(null),x()}catch(C){E.error(C.message||"Failed to update household.",{id:S})}},v=async()=>{if(!m)return;const N=E.loading("Deleting household...");try{const{error:S}=await I.functions.invoke("delete-household",{body:{householdId:m.id}});if(S)throw new Error(S.message);E.success("Household deleted successfully!",{id:N}),g(null),x()}catch(S){E.error(S.message||"Failed to delete household.",{id:N})}},_=()=>{h&&(g(h),f(null))},j=n.filter(N=>N.house_number.toLowerCase().includes(u.toLowerCase())||N.head_of_house.toLowerCase().includes(u.toLowerCase()));return l?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e&&a.jsxs("header",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:e.name}),a.jsxs("p",{className:"text-lg text-gray-600 mt-1 flex items-center",children:[a.jsx(Gs,{className:"h-5 w-5 mr-2"})," ",e.address,", ",e.city,", ",e.state]})]}),i.length>0&&a.jsxs("section",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pending Household Approvals"}),a.jsx("div",{className:"space-y-4",children:i.map(N=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border rounded-lg bg-amber-50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-bold text-gray-800",children:N.name}),a.jsxs("div",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(ls,{className:"h-4 w-4 mr-2"})," House No: ",a.jsx("span",{className:"font-medium ml-1",children:N.house_number})]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(Se,{className:"h-4 w-4 mr-2"})," Members: ",a.jsx("span",{className:"font-medium ml-1",children:N.members_count})]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"})," Contact: ",a.jsx("span",{className:"font-medium ml-1",children:N.contact_number})]})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0 w-full sm:w-auto self-center sm:self-end",children:[a.jsxs("button",{onClick:()=>p(N.id),className:"btn-danger-outline w-full",children:[a.jsx(Gt,{className:"h-5 w-5 mr-2"})," Reject"]}),a.jsxs("button",{onClick:()=>b(N.id),className:"btn-primary w-full",children:[a.jsx(Tl,{className:"h-5 w-5 mr-2"})," Approve"]})]})]},N.id))})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[a.jsx(ls,{className:"h-6 w-6 mr-3 text-primary-600"})," Active Households"]}),a.jsxs("div",{className:"relative mt-4 md:mt-0",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ha,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search by name or Jamat No...",value:u,onChange:N=>d(N.target.value),className:"input-field pl-10 w-full md:w-64"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"th text-center",children:"Jamat No."}),a.jsx("th",{className:"th text-center",children:"Head of House"}),a.jsx("th",{className:"th text-center",children:"Members"}),a.jsx("th",{className:"th text-center",children:"Contact"}),a.jsx("th",{className:"th text-center",children:"Annual Amount"}),a.jsx("th",{className:"th text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"td font-mono text-center",children:N.house_number}),a.jsx("td",{className:"td font-medium text-gray-900 text-center",children:N.head_of_house}),a.jsx("td",{className:"td text-center",children:N.members_count}),a.jsx("td",{className:"td text-center",children:N.contact_number}),a.jsxs("td",{className:"td text-center",children:["",N.annual_amount.toLocaleString()]}),a.jsx("td",{className:"td text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>f(N),className:"text-blue-600 hover:text-blue-800",title:"Edit",children:a.jsx(Dr,{className:"h-5 w-5"})})})})]},N.id))})]})}),j.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Households Found"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"No active households match your search criteria."})]})]})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Edit Household"}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsx("input",{type:"text",value:h.house_number,onChange:N=>f({...h,house_number:N.target.value}),className:"input-field",placeholder:"Jamat Number"}),a.jsx("input",{type:"text",value:h.head_of_house,onChange:N=>f({...h,head_of_house:N.target.value}),className:"input-field",placeholder:"Head of House"}),a.jsx("input",{type:"number",value:h.members_count,onChange:N=>f({...h,members_count:parseInt(N.target.value)}),className:"input-field",placeholder:"Members Count"}),a.jsx("input",{type:"text",value:h.contact_number,onChange:N=>f({...h,contact_number:N.target.value}),className:"input-field",placeholder:"Contact Number"}),a.jsx("input",{type:"number",value:h.annual_amount,onChange:N=>f({...h,annual_amount:parseInt(N.target.value)}),className:"input-field",placeholder:"Annual Amount"}),a.jsxs("div",{className:"pt-4 flex justify-between items-center",children:[a.jsxs("button",{type:"button",onClick:_,className:"btn-danger-outline",children:[a.jsx(j0,{className:"h-5 w-5 mr-2"}),"Delete Household"]}),a.jsxs("div",{className:"space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>f(null),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})]})]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Qd,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Household"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:['Are you sure you want to delete the household of "',m.head_of_house,'"? This action cannot be undone.']})]})]}),a.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:v,className:"btn-danger w-full sm:ml-3 sm:w-auto",children:"Delete"}),a.jsx("button",{type:"button",onClick:()=>g(null),className:"btn-primary mt-3 w-full sm:mt-0 sm:w-auto",children:"Cancel"})]})]})})]})},rE=()=>{const{user:t}=oe(),[e,s]=w.useState([]),[n,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(!0),[u,d]=w.useState(""),[h,f]=w.useState(null),[m,g]=w.useState(cs(new Date(new Date().getFullYear(),new Date().getMonth(),1),"yyyy-MM-dd")),[x,b]=w.useState(cs(new Date,"yyyy-MM-dd")),[p,y]=w.useState(!1),[v,_]=w.useState({household_id:"",amount:"",payment_date:cs(new Date,"yyyy-MM-dd"),month:new Date().getMonth()+1,year:new Date().getFullYear(),payment_method:"Cash"}),[j,N]=w.useState(null),[S,C]=w.useState(""),k=["January","February","March","April","May","June","July","August","September","October","November","December"],M=[new Date().getFullYear()-1,new Date().getFullYear(),new Date().getFullYear()+1],T=w.useCallback(async()=>{if(t){c(!0);try{const[P,D,O]=await Promise.all([I.rpc("get_pending_payment_groups_for_mosque",{admin_user_id:t.id}),I.rpc("get_payment_groups_for_mosque",{admin_user_id:t.id,start_date:m,end_date:x}),I.rpc("get_all_households_for_mosque",{admin_user_id:t.id})]);if(P.error)throw P.error;if(D.error)throw D.error;if(O.error)throw O.error;s(P.data||[]),r(D.data||[]),o(O.data||[])}catch(P){E.error(P.message||"Error loading collections data")}finally{c(!1)}}},[t,m,x]);w.useEffect(()=>{(t==null?void 0:t.role)==="mosque_admin"&&T()},[t,T]);const A=async P=>{if(!P){E.error("No receipt URL provided.");return}const D=E.loading("Generating secure link...");try{const B=new URL(P).pathname.split("/"),re=B.indexOf("payment_screenshot");if(re===-1)throw new Error("Invalid receipt URL structure. Bucket not found.");const fe=B.slice(re+1).join("/"),{data:{session:$e}}=await I.auth.getSession();if(!$e)throw new Error("Authentication error: No active session.");const{data:me,error:Ze}=await I.functions.invoke("get-signed-receipt-url",{headers:{Authorization:`Bearer ${$e.access_token}`},body:{filePath:fe}});if(Ze)throw Ze;window.open(me.signedUrl,"_blank"),E.dismiss(D)}catch(O){E.error(O.message||"Could not open receipt.",{id:D})}},F=async P=>{const D=E.loading("Approving...");try{const{error:O}=await I.rpc("approve_payment_group",{p_group_id:P});if(O)throw O;E.success("Payment approved!",{id:D}),T()}catch(O){E.error(O.message||"Failed to approve.",{id:D})}},U=async P=>{if(P.preventDefault(),!j||!S)return;const D=E.loading("Rejecting...");try{const{error:O}=await I.from("payment_groups").update({status:"rejected",rejection_reason:S}).eq("id",j.id);if(O)throw O;const{error:B}=await I.from("payments").update({status:"rejected",rejection_reason:S}).eq("payment_group_id",j.id);if(B)throw B;E.success("Payment rejected.",{id:D}),N(null),C(""),T()}catch(O){E.error(O.message||"Failed to reject.",{id:D})}},$=async P=>{P.preventDefault();const D=E.loading("Adding payment...");try{const{data:O,error:B}=await I.from("payment_groups").insert({household_id:v.household_id,total_amount:parseFloat(v.amount),paid_at:v.payment_date,status:"paid"}).select("id").single();if(B)throw B;if(!O)throw new Error("Failed to create payment group.");const W=O.id,{error:re}=await I.from("payments").insert({payment_group_id:W,month:v.month,year:v.year,amount:parseFloat(v.amount),payment_method:v.payment_method});if(re)throw await I.from("payment_groups").delete().eq("id",W),re;E.success("Payment added successfully!",{id:D}),y(!1),T()}catch(O){E.error(O.message||"Failed to add payment.",{id:D})}},L=n.filter(P=>P.head_of_house.toLowerCase().includes(u.toLowerCase())||P.house_number.toLowerCase().includes(u.toLowerCase())),z=P=>{f(D=>D===P?null:P)};return l?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("p",{children:"Loading..."})}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Collections"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"View and manage all payment transactions."})]}),e.length>0&&a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Pending Approvals (",e.length,")"]}),a.jsx("div",{className:"space-y-4",children:e.map(P=>a.jsxs("div",{className:"p-4 border rounded-lg bg-yellow-50 border-yellow-200",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-grow cursor-pointer pr-4",onClick:()=>z(P.id),children:[a.jsxs("div",{className:"flex items-center justify-start gap-2",children:[a.jsxs("p",{className:"font-bold text-gray-800",children:[P.head_of_house," ",a.jsxs("span",{className:"font-normal text-gray-600",children:["(House: ",P.house_number,")"]})]}),h===P.id?a.jsx(Zf,{className:"h-5 w-5 text-gray-600"}):a.jsx(Xf,{className:"h-5 w-5 text-gray-600"})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Paid **",P.total_amount.toLocaleString(),"** for ",P.months.length," month(s)"]})]}),a.jsxs("div",{className:"flex items-center gap-2 w-auto flex-shrink-0",children:[a.jsxs("button",{onClick:D=>{D.stopPropagation(),A(P.screenshot_url)},className:"text-primary-600 hover:bg-gray-100 hover:text-primary-800 transition p-1 rounded-md flex flex-col items-center justify-center text-sm",children:[a.jsx(Ks,{className:"h-5 w-5"}),a.jsx("span",{className:"text-xs mt-0.5",children:"Receipt"})]}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),N(P)},className:"text-red-600 hover:bg-red-50 hover:text-red-800 transition p-1 rounded-md flex flex-col items-center justify-center text-sm",children:[a.jsx(Gt,{className:"h-5 w-5"}),a.jsx("span",{className:"text-xs mt-0.5",children:"Reject"})]}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),F(P.id)},className:"text-green-600 hover:bg-green-50 hover:text-green-800 transition p-1 rounded-md flex flex-col items-center justify-center text-sm",children:[a.jsx(Tl,{className:"h-5 w-5"}),a.jsx("span",{className:"text-xs mt-0.5",children:"Approve"})]})]})]}),h===P.id&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-yellow-200",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Months Included:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:P.months.sort().map(D=>{const[O,B]=D.split("-");return a.jsxs("li",{children:[k[parseInt(O)-1]," ",B]},D)})})]})]},P.id))})]}),a.jsx("div",{className:"card bg-white p-6 rounded-lg shadow-md mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Date"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"date",value:m,onChange:P=>g(P.target.value),className:"input-field"}),a.jsx("span",{className:"text-gray-500",children:"to"}),a.jsx("input",{type:"date",value:x,onChange:P=>b(P.target.value),className:"input-field"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search by Name or Jamat No."}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ha,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",placeholder:"Search...",value:u,onChange:P=>d(P.target.value),className:"input-field pl-10"})]})]})]})}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Transaction Log"}),a.jsxs("button",{onClick:()=>y(!0),className:"btn-primary",children:[a.jsx(kN,{className:"h-5 w-5 mr-2"}),"Add Payment"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"th text-center",children:"Date"}),a.jsx("th",{className:"th text-center",children:"Head of House"}),a.jsx("th",{className:"th text-center",children:"Jamat No."}),a.jsx("th",{className:"th text-center",children:"Amount"}),a.jsx("th",{className:"th text-center",children:"Months"}),a.jsx("th",{className:"th text-center",children:"Method"}),a.jsx("th",{className:"th text-center",children:"Status"}),a.jsx("th",{className:"th text-center",children:"Receipt"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(P=>a.jsxs(ta.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>z(P.id),children:[a.jsx("td",{className:"td text-center",children:cs(new Date(P.paid_at),"dd MMM, yyyy")}),a.jsx("td",{className:"td font-medium text-gray-900 text-center",children:P.head_of_house}),a.jsx("td",{className:"td font-mono text-center",children:P.house_number}),a.jsxs("td",{className:"td font-semibold text-green-600 text-center",children:["",P.total_amount.toLocaleString()]}),a.jsxs("td",{className:"td text-center",children:[P.months.length," month(s) ",h===P.id?a.jsx(Zf,{className:"h-4 w-4 inline-block ml-1"}):a.jsx(Xf,{className:"h-4 w-4 inline-block ml-1"})]}),a.jsx("td",{className:"td text-center",children:a.jsx("span",{className:"badge-blue",children:P.payment_method||"N/A"})}),a.jsx("td",{className:"td text-center",children:a.jsx("span",{className:`capitalize badge-${P.status==="paid"?"green":P.status==="pending"?"yellow":"red"}`,children:P.status})}),a.jsx("td",{className:"td text-center",children:P.screenshot_url?a.jsx("button",{onClick:D=>{D.stopPropagation(),A(P.screenshot_url)},className:"text-gray-500 hover:text-primary-600",children:a.jsx(Ks,{className:"h-6 w-6 mx-auto"})}):a.jsx("span",{className:"text-gray-400",children:""})})]}),h===P.id&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:8,className:"p-4",children:a.jsxs("div",{className:"pl-8",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-2",children:"Months Included:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:P.months.sort().map(D=>{const[O,B]=D.split("-");return a.jsxs("li",{children:[k[parseInt(O)-1]," ",B]},D)})})]})})})]},P.id))})]})}),L.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No Transactions Found"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"No payments were recorded in the selected date range."})]})]})]}),j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reject Payment"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Please provide a reason for rejecting this payment for ",j.head_of_house,"."]}),a.jsxs("form",{onSubmit:U,children:[a.jsx("textarea",{value:S,onChange:P=>C(P.target.value),className:"input-field w-full",rows:3,placeholder:"e.g., Screenshot is unclear, amount does not match...",required:!0}),a.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>N(null),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-danger",children:"Confirm Rejection"})]})]})]})}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Payment"}),a.jsx("button",{onClick:()=>y(!1),children:a.jsx(Gt,{className:"h-6 w-6 text-gray-500"})})]}),a.jsxs("form",{onSubmit:$,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Select Household"}),a.jsxs("select",{required:!0,value:v.household_id,onChange:P=>_({...v,household_id:P.target.value}),className:"input-field",children:[a.jsx("option",{value:"",disabled:!0,children:"-- Select a household --"}),i.map(P=>a.jsx("option",{value:P.id,children:P.name},P.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Amount"}),a.jsx("input",{type:"number",required:!0,value:v.amount,onChange:P=>_({...v,amount:P.target.value}),className:"input-field",placeholder:"e.g., 500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Payment for Month/Year"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:v.month,onChange:P=>_({...v,month:Number(P.target.value)}),className:"input-field w-full",children:k.map((P,D)=>a.jsx("option",{value:D+1,children:P},D))}),a.jsx("select",{value:v.year,onChange:P=>_({...v,year:Number(P.target.value)}),className:"input-field w-full",children:M.map(P=>a.jsx("option",{value:P,children:P},P))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Payment Date"}),a.jsx("input",{type:"date",required:!0,value:v.payment_date,onChange:P=>_({...v,payment_date:P.target.value}),className:"input-field"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Payment Method"}),a.jsxs("select",{value:v.payment_method,onChange:P=>_({...v,payment_method:P.target.value}),className:"input-field",children:[a.jsx("option",{children:"Cash"}),a.jsx("option",{children:"Online"}),a.jsx("option",{children:"Other"})]})]}),a.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>y(!1),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",children:"Save Payment"})]})]})]})})]})},iE=()=>{const{user:t}=oe(),e=ve(),[s,n]=w.useState(null),[r,i]=w.useState(null),[o,l]=w.useState(null),[c,u]=w.useState(null),[d,h]=w.useState(!0),[f,m]=w.useState(!1),[g,x]=w.useState(!1),[b,p]=w.useState(!1),[y,v]=w.useState(""),[_,j]=w.useState(""),N=w.useCallback(async()=>{if(t){h(!0);try{const{data:T,error:A}=await I.rpc("get_mosque_admin_profile",{p_user_id:t.id});if(A)throw A;T&&(n(T.profile),i(T.mosque),l(T.profile),u(T.mosque))}catch(T){E.error(T.message||"Failed to load profile.")}finally{h(!1)}}},[t]);w.useEffect(()=>{N()},[N]);const S=async T=>{if(T.preventDefault(),!t||!s||!r)return;m(!0);const A=E.loading("Updating profile...");try{const{error:F}=await I.functions.invoke("update-mosque-profile",{body:{userId:t.id,profileUpdates:s,mosqueUpdates:r}});if(F)throw new Error(F.message);E.success("Profile updated successfully!",{id:A}),l(s),u(r),x(!1)}catch(F){E.error(F.message||"Failed to update profile.",{id:A})}finally{m(!1)}},C=()=>{n(o),i(c),x(!1)},k=async T=>{if(T.preventDefault(),y!==_)return E.error("Passwords do not match.");if(y.length<6)return E.error("Password must be at least 6 characters.");m(!0);const A=E.loading("Changing password..."),{error:F}=await I.auth.updateUser({password:y});m(!1),F?E.error(F.message||"Failed to change password.",{id:A}):(E.success("Password changed successfully!",{id:A}),p(!1),v(""),j(""))},M=async()=>{const T=E.loading("Logging out..."),{error:A}=await I.auth.signOut();A?E.error(A.message,{id:T}):(E.success("Logged out successfully",{id:T}),e("/login"))};return d||!s||!r?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("form",{onSubmit:S,children:[a.jsx("header",{className:"card mb-8 bg-white p-6 rounded-lg shadow-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"My Profile"}),a.jsx("p",{className:"text-lg text-gray-600 mt-1",children:"Manage your personal and mosque details."})]}),!g&&a.jsxs("button",{type:"button",onClick:()=>x(!0),className:"btn-primary",children:[a.jsx(Dr,{className:"h-4 w-4 mr-2"})," Edit Profile"]})]})}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(at,{className:"h-6 w-6 mr-3 text-primary-600"})," Personal Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Full Name"}),g?a.jsx("input",{type:"text",value:s.full_name,onChange:T=>n({...s,full_name:T.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.full_name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Contact Number"}),g?a.jsx("input",{type:"text",value:s.contact_number||"",onChange:T=>n({...s,contact_number:T.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.contact_number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Email Address"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.email||""})]})]})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[a.jsx(De,{className:"h-6 w-6 mr-3 text-primary-600"})," mosque Details"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"mosque Name"}),g?a.jsx("input",{type:"text",value:r.name,onChange:T=>i({...r,name:T.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"Default Annual Amount"}),g?a.jsx("input",{type:"number",value:r.annual_amount,onChange:T=>i({...r,annual_amount:parseInt(T.target.value)}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.annual_amount})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"label",children:"mosque Address"}),g?a.jsx("input",{type:"text",value:r.address,onChange:T=>i({...r,address:T.target.value}),className:"input-field"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.address})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"label flex items-center",children:[a.jsx(MN,{className:"h-4 w-4 mr-2 text-gray-500"})," UPI ID for Collections"]}),g?a.jsx("input",{type:"text",value:r.upi_id||"",onChange:T=>i({...r,upi_id:T.target.value}),className:"input-field",placeholder:"e.g., mosque-name@upi"}):a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.upi_id||"Not Set"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"City"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.city||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"label",children:"State"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:s.state||"N/A"})]})]})]})]}),g&&a.jsxs("div",{className:"mt-8 flex justify-end space-x-3",children:[a.jsxs("button",{type:"button",onClick:C,className:"btn-primary",children:[a.jsx(Gt,{className:"h-5 w-5 mr-2"})," Cancel"]}),a.jsxs("button",{type:"submit",className:"btn-primary",disabled:f,children:[a.jsx(Ir,{className:"h-5 w-5 mr-2"})," ",f?"Saving...":"Save Changes"]})]})]}),a.jsxs("div",{className:"card bg-white p-6 rounded-lg shadow-md mt-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Account Security"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-800",children:"Password"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Change your password to keep your account secure."})]}),a.jsx("button",{onClick:()=>p(!0),className:"btn-primary",children:"Change"})]}),a.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg bg-red-50 border-red-200",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-red-800",children:"Log Out"}),a.jsx("p",{className:"text-sm text-red-600",children:"You will be returned to the login screen."})]}),a.jsxs("button",{onClick:M,className:"btn-danger-outline",children:[a.jsx(Ol,{className:"h-4 w-4 mr-2"}),"Log Out"]})]})]})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md shadow-xl",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),a.jsxs("form",{onSubmit:k,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password"}),a.jsx("input",{type:"password",value:y,onChange:T=>v(T.target.value),className:"input-field mt-1",placeholder:"At least 6 characters",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),a.jsx("input",{type:"password",value:_,onChange:T=>j(T.target.value),className:"input-field mt-1",required:!0})]}),a.jsx("div",{className:"pt-4 flex justify-end items-center",children:a.jsxs("div",{className:"space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn-primary",children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary",disabled:f,children:f?"Saving...":"Save"})]})})]})]})})]})},aE=()=>{const t=ve(),e=()=>t("/register"),s=()=>t("/login");return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(De,{className:"h-8 w-8 text-green-600"}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"mosqueCollect"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[a.jsx("a",{href:"#features",className:"text-gray-600 hover:text-green-600 transition-colors",children:"Features"}),a.jsx("a",{href:"#how-it-works",className:"text-gray-600 hover:text-green-600 transition-colors",children:"How It Works"}),a.jsx("a",{href:"#roles",className:"text-gray-600 hover:text-green-600 transition-colors",children:"User Roles"}),a.jsx("button",{onClick:s,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Login / Register"})]}),a.jsx("div",{className:"md:hidden",children:a.jsx("button",{onClick:s,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-700 transition-colors",children:"Login"})})]})})}),a.jsx("section",{className:"bg-gradient-to-br from-green-50 to-emerald-100 pt-20 pb-32",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Streamline Your mosque",a.jsx("span",{className:"text-green-600 block",children:"Collection Management"})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"A comprehensive digital solution for managing monthly household contributions across mosque communities. From individual households to national oversight, manage collections with transparency and efficiency."}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:a.jsxs("button",{onClick:e,className:"bg-green-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-green-700 transform hover:scale-105 transition-all shadow-lg hover:shadow-xl",children:["Start Managing Collections",a.jsx(v0,{className:"inline ml-2 h-5 w-5"})]})})]}),a.jsxs("div",{className:"mt-20 grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:"5,000+"}),a.jsx("div",{className:"text-gray-600",children:"Active Households"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:"250+"}),a.jsx("div",{className:"text-gray-600",children:"mosques Connected"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:"2.5M+"}),a.jsx("div",{className:"text-gray-600",children:"Collections Managed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600",children:"50+"}),a.jsx("div",{className:"text-gray-600",children:"Cities Covered"})]})]})]})}),a.jsx("section",{id:"features",className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Powerful Features for Every Need"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"From household payments to administrative oversight, our platform provides comprehensive tools for transparent and efficient collection management."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(PN,{className:"h-6 w-6 text-green-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Digital Payments"}),a.jsx("p",{className:"text-gray-600",children:"Simple UPI integration with QR codes. Upload payment receipts for instant verification and tracking of all transactions."})]}),a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(gN,{className:"h-6 w-6 text-blue-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Real-time Dashboards"}),a.jsx("p",{className:"text-gray-600",children:"Comprehensive analytics and reporting tools for mosque admins, city administrators, and super admins at every level."})]}),a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(_0,{className:"h-6 w-6 text-purple-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Role-Based Security"}),a.jsx("p",{className:"text-gray-600",children:"Four-tier permission system ensuring data security and appropriate access levels for households, mosque admins, city admins, and super admins."})]}),a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-yellow-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(ie,{className:"h-6 w-6 text-yellow-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Approval Workflows"}),a.jsx("p",{className:"text-gray-600",children:"Structured approval processes for new registrations, payment verifications, and administrative changes across all levels."})]}),a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-red-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(Zd,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Monthly Tracking"}),a.jsx("p",{className:"text-gray-600",children:"Automated monthly collection cycles with clear payment status indicators and reminder systems for overdue contributions."})]}),a.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"bg-indigo-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:a.jsx(em,{className:"h-6 w-6 text-indigo-600"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Multi-City Management"}),a.jsx("p",{className:"text-gray-600",children:"Scalable architecture supporting mosque collections across multiple cities and states with centralized oversight capabilities."})]})]})]})}),a.jsx("section",{id:"roles",className:"py-20 bg-gradient-to-br from-gray-50 to-green-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Built for Every Level of Administration"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our hierarchical system ensures appropriate access and functionality for each user type, from individual households to national oversight."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mr-4",children:a.jsx(bN,{className:"h-8 w-8 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Household Users"}),a.jsx("p",{className:"text-gray-600",children:"Individual families contributing to their mosque"})]})]}),a.jsxs("ul",{className:"space-y-3 text-gray-700",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-green-500 mr-3"})," View payment status and history"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-green-500 mr-3"})," Make digital payments with UPI"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-green-500 mr-3"})," Upload payment receipts for verification"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-green-500 mr-3"})," Export payment history as CSV"]})]})]}),a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mr-4",children:a.jsx(De,{className:"h-8 w-8 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"mosque Admins"}),a.jsx("p",{className:"text-gray-600",children:"Managing individual mosque operations"})]})]}),a.jsxs("ul",{className:"space-y-3 text-gray-700",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-blue-500 mr-3"})," Approve household registrations"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-blue-500 mr-3"})," Verify and approve payments"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-blue-500 mr-3"})," View collection analytics"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-blue-500 mr-3"})," Manage mosque settings and UPI details"]})]})]}),a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mr-4",children:a.jsx(Se,{className:"h-8 w-8 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"City Admins"}),a.jsx("p",{className:"text-gray-600",children:"Overseeing city-wide mosque operations"})]})]}),a.jsxs("ul",{className:"space-y-3 text-gray-700",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-purple-500 mr-3"})," Approve new mosque registrations"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-purple-500 mr-3"})," Manage mosque admin assignments"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-purple-500 mr-3"})," City-wide collection analytics"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-purple-500 mr-3"})," Request location changes"]})]})]}),a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mr-4",children:a.jsx(em,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Super Admins"}),a.jsx("p",{className:"text-gray-600",children:"National-level system oversight"})]})]}),a.jsxs("ul",{className:"space-y-3 text-gray-700",children:[a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-yellow-600 mr-3"})," National dashboard and analytics"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-yellow-600 mr-3"})," Approve city admin registrations"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-yellow-600 mr-3"})," Handle location change requests"]}),a.jsxs("li",{className:"flex items-center",children:[a.jsx(ie,{className:"h-5 w-5 text-yellow-600 mr-3"})," State and city drill-down reports"]})]})]})]})]})}),a.jsx("section",{id:"how-it-works",className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Process"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our streamlined workflow ensures accountability and transparency at every step of the collection process."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-400 to-green-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-lg",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:"1"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Register & Get Approved"}),a.jsx("p",{className:"text-gray-600",children:"Households register with their mosque details. mosque admins approve registrations after verification of community membership."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-blue-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-lg",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:"2"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Make Monthly Payments"}),a.jsx("p",{className:"text-gray-600",children:"Use the integrated UPI system to make payments directly. Upload receipts through the app for quick processing and record-keeping."})]}),a.jsxs("div",{className:"text-center group",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-purple-600 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform shadow-lg",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:"3"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Track & Analyze"}),a.jsx("p",{className:"text-gray-600",children:"Real-time dashboards provide insights into collection patterns, payment statuses, and financial summaries across all administrative levels."})]})]})]})}),a.jsx("footer",{className:"bg-gray-900 text-white py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8 text-center text-gray-400",children:a.jsx("p",{children:" 2025 mosqueCollect. All rights reserved. Built with dedication for the Muslim community."})})})})]})},oE=()=>{const{user:t}=oe(),{householdId:e}=aa(),s=ve(),n=sn(),r=new URLSearchParams(n.search),i=parseInt(r.get("startMonth")||"1"),o=parseInt(r.get("startYear")||new Date().getFullYear().toString()),l=parseInt(r.get("endMonth")||"12"),c=parseInt(r.get("endYear")||new Date().getFullYear().toString()),[u,d]=w.useState(null),[h,f]=w.useState([]),[m,g]=w.useState(!0),[x,b]=w.useState(i),[p,y]=w.useState(o),[v,_]=w.useState(l),[j,N]=w.useState(c),S=["January","February","March","April","May","June","July","August","September","October","November","December"],C=[new Date().getFullYear()-2,new Date().getFullYear()-1,new Date().getFullYear(),new Date().getFullYear()+1],k=w.useCallback(async()=>{if(e){g(!0);try{const{data:$,error:L}=await I.rpc("get_household_payment_details",{p_household_id:e,start_year:o,start_month:i,end_year:c,end_month:l});if(L)throw L;d($.details);const z=[],P=new Set($.payments.map(B=>`${B.month}-${B.year}`));let D=new Date(o,i-1);const O=new Date(c,l-1);for(;D<=O;){const B=D.getMonth()+1,W=D.getFullYear();z.push({month:S[B-1],month_number:B,year:W,status:P.has(`${B}-${W}`)?"paid":"unpaid"}),D.setMonth(D.getMonth()+1)}f(z)}catch($){E.error($.message||"Failed to load details."),s(-1)}finally{g(!1)}}},[e,i,o,l,c,s]);w.useEffect(()=>{t&&k()},[t,k]);const M=()=>{s(`?startMonth=${x}&startYear=${p}&endMonth=${v}&endYear=${j}`)},T=h.filter($=>$.status==="paid").length,A=h.filter($=>$.status==="unpaid").length,F=u?u.annual_amount/12:0,U=A*F;return m||!u?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsx("div",{className:"flex items-center justify-center pt-32",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})]}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx(V,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("header",{className:"mb-8",children:[a.jsxs(pt,{to:"/admin/dashboard",className:"flex items-center text-base font-medium text-gray-500 hover:text-gray-800 transition-colors mb-4",children:[a.jsx(an,{className:"h-5 w-5 mr-2"}),"Back to Reporting"]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:u.head_of_house}),a.jsxs("div",{className:"text-lg text-gray-600 mt-2 space-y-2",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(ls,{className:"h-5 w-5 mr-3 text-gray-400"}),"House No: ",a.jsx("span",{className:"font-medium ml-2",children:u.house_number})]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-3 text-gray-400"}),"Contact: ",a.jsx("span",{className:"font-medium ml-2",children:u.contact_number})]})]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-end",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Date Range"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"From"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:x,onChange:$=>b(Number($.target.value)),className:"input-field w-full",children:S.map(($,L)=>a.jsx("option",{value:L+1,children:$},L))}),a.jsx("select",{value:p,onChange:$=>y(Number($.target.value)),className:"input-field w-full",children:C.map($=>a.jsx("option",{value:$,children:$},$))})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"To"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("select",{value:v,onChange:$=>_(Number($.target.value)),className:"input-field w-full",children:S.map(($,L)=>a.jsx("option",{value:L+1,children:$},L))}),a.jsx("select",{value:j,onChange:$=>N(Number($.target.value)),className:"input-field w-full",children:C.map($=>a.jsx("option",{value:$,children:$},$))})]})]})]})]}),a.jsx("button",{onClick:M,className:"btn-primary w-full",children:"Apply Filter"})]})}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Payment History"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6 border-b pb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Paid Months"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:T})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Unpaid Months"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:A})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Due"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:["",U.toLocaleString()]})]})]}),a.jsx("ul",{className:"space-y-3",children:h.map(($,L)=>a.jsxs("li",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[a.jsx("div",{children:a.jsxs("p",{className:"font-semibold text-gray-800",children:[$.month," ",a.jsx("span",{className:"text-gray-500 font-normal",children:$.year})]})}),a.jsx("div",{className:"flex items-center space-x-4",children:$.status==="paid"?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Tl,{className:"h-4 w-4 mr-1.5"})," Paid"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[a.jsx(Gt,{className:"h-4 w-4 mr-1.5"})," Unpaid"]})})]},L))})]})]})]})};function we({children:t,roles:e}){const{user:s,loading:n}=oe();return n?a.jsx(jy,{}):s?!s.role||!e.includes(s.role)?a.jsx(ut,{to:"/dashboard"}):a.jsx(a.Fragment,{children:t}):a.jsx(ut,{to:"/login"})}function lE(){const{user:t,loading:e}=oe();return e?a.jsx(jy,{}):a.jsxs(Yb,{children:[a.jsx(Z,{path:"/",element:t?a.jsx(ut,{to:"/dashboard"}):a.jsx(aE,{})}),a.jsx(Z,{path:"/login",element:t?a.jsx(ut,{to:"/dashboard"}):a.jsx(ON,{})}),a.jsx(Z,{path:"/register",element:t?a.jsx(ut,{to:"/dashboard"}):a.jsx(DN,{})}),a.jsx(Z,{path:"/register/admin",element:a.jsx(JP,{})}),a.jsx(Z,{path:"/awaiting-approval",element:a.jsx(QP,{})}),a.jsx(Z,{path:"/dashboard",element:t?t.role==="household"?a.jsx(ut,{to:"/household/dashboard"}):t.role==="mosque_admin"?a.jsx(ut,{to:"/admin/dashboard"}):t.role==="super_admin"?a.jsx(ut,{to:"/super/dashboard"}):t.role=="city_admin"?a.jsx(ut,{to:"/city/dashboard"}):a.jsx(ut,{to:"/login"}):a.jsx(ut,{to:"/login"})}),a.jsx(Z,{path:"/household/dashboard",element:a.jsx(we,{roles:["household"],children:a.jsx(Kk,{})})}),a.jsx(Z,{path:"/household/profile",element:a.jsx(we,{roles:["household"],children:a.jsx(RP,{})})}),a.jsx(Z,{path:"/household/payment",element:a.jsx(we,{roles:["household"],children:a.jsx(LP,{})})}),a.jsx(Z,{path:"/household/history",element:a.jsx(we,{roles:["household"],children:a.jsx(FP,{})})}),a.jsx(Z,{path:"/admin/dashboard",element:a.jsx(we,{roles:["mosque_admin"],children:a.jsx(Jk,{})})}),a.jsx(Z,{path:"/admin/households/",element:a.jsx(we,{roles:["mosque_admin"],children:a.jsx(nE,{})})}),a.jsx(Z,{path:"/mosque/household/:householdId/",element:a.jsx(we,{roles:["mosque_admin"],children:a.jsx(oE,{})})}),a.jsx(Z,{path:"/admin/collections",element:a.jsx(we,{roles:["mosque_admin"],children:a.jsx(rE,{})})}),a.jsx(Z,{path:"/admin/profile",element:a.jsx(we,{roles:["mosque_admin"],children:a.jsx(iE,{})})}),a.jsx(Z,{path:"/city/dashboard",element:a.jsx(we,{roles:["city_admin"],children:a.jsx(XP,{})})}),a.jsx(Z,{path:"/city/mosques",element:a.jsx(we,{roles:["city_admin"],children:a.jsx(WP,{})})}),a.jsx(Z,{path:"city/admins",element:a.jsx(we,{roles:["city_admin"],children:a.jsx(ZP,{})})}),a.jsx(Z,{path:"/city/admins/:adminId",element:a.jsx(we,{roles:["city_admin"],children:a.jsx(eE,{})})}),a.jsx(Z,{path:"/city/profile",element:a.jsx(we,{roles:["city_admin"],children:a.jsx(tE,{})})}),a.jsx(Z,{path:"/super/requests",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(sE,{})})}),a.jsx(Z,{path:"/super/dashboard",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(IP,{})})}),a.jsx(Z,{path:"/super/states/:stateName",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(zP,{})})}),a.jsx(Z,{path:"/super/cities/:cityName",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(BP,{})})}),a.jsx(Z,{path:"/super/profile",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(HP,{})})}),a.jsx(Z,{path:"/super/mosques",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(UP,{})})}),a.jsx(Z,{path:"super/admins",element:a.jsx(we,{roles:["super_admin"],children:a.jsx(KP,{})})}),a.jsx(Z,{path:"/",element:a.jsx(ut,{to:"/dashboard"})}),a.jsx(Z,{path:"*",element:a.jsx(ut,{to:"/"})}),a.jsx(Z,{path:"/mosques/:mosqueId",element:a.jsx(we,{roles:["super_admin","city_admin","mosque_admin"],children:a.jsx(qP,{})})})]})}function cE(){return a.jsx(e_,{children:a.jsx(hN,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(lE,{}),a.jsx(Y_,{position:"top-right"})]})})})}Tc.createRoot(document.getElementById("root")).render(a.jsx(ta.StrictMode,{children:a.jsx(cE,{})}));
